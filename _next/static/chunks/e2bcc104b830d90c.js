(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61353,e=>{"use strict";var a=e.i(43476),t=e.i(2747);function s(){return(0,a.jsxs)("div",{className:"p-4 md:p-6 space-y-6 animate-pulse",children:[(0,a.jsx)(t.Skeleton,{className:"h-8 w-64 bg-white/5"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,a.jsx)(t.Skeleton,{className:"h-[120px] bg-white/5"},e))}),(0,a.jsx)(t.Skeleton,{className:"h-[400px] bg-white/5"})]})}e.s(["PageSkeleton",()=>s])},40160,e=>{"use strict";let a=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>a],40160)},40803,e=>{"use strict";var a=e.i(43476),t=e.i(19455),s=e.i(75157);function r({icon:e,title:r,description:l,action:i,size:d="lg",className:n}){return(0,a.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center text-center animate-fade-in","sm"===d?"py-8":"md"===d?"py-12":"py-16",n),children:[(0,a.jsx)("div",{className:(0,s.cn)("rounded-2xl border-2 border-[hsl(35,30%,70%)] bg-[hsl(35,20%,85%)] mb-4 flex items-center justify-center","sm"===d?"p-3":"md"===d?"p-4":"p-5"),children:(0,a.jsx)("div",{className:(0,s.cn)("sm"===d?"h-8 w-8":"md"===d?"h-12 w-12":"h-16 w-16","text-[hsl(30,35%,45%)]"),children:e})}),(0,a.jsx)("h3",{className:(0,s.cn)("font-display font-semibold text-foreground mb-2","sm"===d?"text-base":"md"===d?"text-lg":"text-xl"),children:r}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground max-w-md mb-6",children:l}),i&&(0,a.jsxs)(t.Button,{onClick:i.onClick,className:"gap-2",children:[i.icon,i.label]})]})}e.s(["EmptyState",()=>r])},15288,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));r.displayName="Card";let l=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let i=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let d=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...t}));n.displayName="CardContent",t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},2335,e=>{"use strict";var a=e.i(71645);function t(e,t){let[s,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),s}e.s(["useDebounce",()=>t])},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},55436,e=>{"use strict";let a=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>a],55436)},39315,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(66027),r=e.i(11795),l=e.i(57951),i=e.i(2335),d=e.i(19455),n=e.i(55593),c=e.i(15288),o=e.i(40803),m=e.i(61353),u=e.i(78583),h=e.i(75254);let p=(0,h.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var f=e.i(40160),x=e.i(27612),y=e.i(55436);let g=(0,h.default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]]),v=(0,h.default)("file-image",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),j=(0,h.default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var w=e.i(46696);function N(){let{user:e}=(0,l.useAuth)(),h=e?.id||"",[N,b]=(0,t.useState)(""),k=(0,i.useDebounce)(N,500),[C,S]=(0,t.useState)("all"),[_,M]=(0,t.useState)(!1),[z,D]=(0,t.useState)(null),[R,T]=(0,t.useState)(!1),{data:B,isLoading:L,refetch:A}=function(e){let{user:a}=(0,l.useAuth)();return(0,s.useQuery)({queryKey:["documents",void 0],queryFn:async()=>{console.log("Fetching documents from Supabase...");let e=r.supabase.from("documents").select("*").order("created_at",{ascending:!1}),{data:a,error:t}=await e;if(t)throw console.error("Error fetching documents:",t),t;let{data:s}=await r.supabase.from("profiles").select("id, full_name, email"),l=new Map(s?.map(e=>[e.id,e.full_name||e.email||"Neznámy"])||[]);return(a||[]).map(e=>({...e,created_by_user:{id:e.created_by,full_name:l.get(e.created_by)||"Neznámy používateľ",email:"",phone:null,avatar_url:null,region_id:null,theme_preference:"system",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}))},enabled:!!a})}();async function F(e){let a=e.target.files?.[0];if(a){T(!0);try{let e=(0,r.createClient)(),t=`documents/${h}/${Date.now()}-${a.name}`,{error:s}=await e.storage.from("documents").upload(t,a,{cacheControl:"3600",upsert:!1});if(s)throw s;let{error:l}=await e.from("documents").insert({name:a.name,storage_path:t,file_type:a.type,file_size:a.size,uploaded_by:h});if(l)throw l;w.toast.success("Dokument bol nahratý"),A()}catch{w.toast.error("Chyba pri nahrávaní súboru")}finally{T(!1),e.target.value=""}}}async function V(e,a){let t=(0,r.createClient)(),{data:s,error:l}=await t.storage.from("documents").download(e);if(l)return void w.toast.error("Chyba pri sťahovaní");let i=URL.createObjectURL(s),d=document.createElement("a");d.href=i,d.download=a,d.click(),URL.revokeObjectURL(i)}return((0,t.useMemo)(()=>B?B.filter(e=>{let a=!k||e.title.toLowerCase().includes(k.toLowerCase()),t="all"===C||e.category===C;return a&&t}):[],[B,k,C]),L)?(0,a.jsx)(m.PageSkeleton,{}):(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-xs",children:[(0,a.jsx)(y.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Input,{placeholder:"Hľadať dokumenty...",value:N,onChange:e=>b(e.target.value),className:"pl-9 bg-surface-card border-border-dark"})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)(d.Button,{asChild:!0,className:"bg-primary hover:bg-primary-hover text-white cursor-pointer",disabled:R,children:(0,a.jsxs)("span",{children:[(0,a.jsx)(p,{className:"w-4 h-4 mr-1.5"}),R?"Nahrávam...":"Nahrať súbor"]})}),(0,a.jsx)("input",{type:"file",className:"hidden",onChange:F,accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"})]})]}),B?.length?(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:B.map(e=>{var t,s;return(0,a.jsx)(c.Card,{className:"bg-surface-card border-border-dark hover:border-primary/30 transition-colors",children:(0,a.jsxs)(c.CardContent,{className:"flex items-center gap-4 p-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(t=e.file_type)?t.includes("image")?(0,a.jsx)(v,{className:"w-5 h-5 text-blue-400"}):t.includes("spreadsheet")||t.includes("excel")?(0,a.jsx)(j,{className:"w-5 h-5 text-green-400"}):(0,a.jsx)(u.FileText,{className:"w-5 h-5 text-orange-400"}):(0,a.jsx)(g,{className:"w-5 h-5 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(s=e.file_size?Number(e.file_size):null)?s<1024?`${s} B`:s<1048576?`${(s/1024).toFixed(1)} KB`:`${(s/1048576).toFixed(1)} MB`:"—"," · ",new Date(e.created_at).toLocaleDateString("sk-SK")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 hover:text-primary",onClick:()=>V(e.file_url,e.title),children:(0,a.jsx)(f.Download,{className:"h-4 w-4"})}),(0,a.jsx)(d.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-destructive hover:bg-destructive/10",onClick:()=>D({id:e.id,title:e.title}),children:(0,a.jsx)(x.Trash2,{className:"h-4 w-4"})})]})]})},e.id)})}):(0,a.jsx)(o.EmptyState,{icon:(0,a.jsx)(u.FileText,{className:"h-12 w-12 text-muted-foreground"}),title:"Žiadne dokumenty",description:"Nahrajte prvý dokument kliknutím na tlačidlo vyššie."})]})}e.s(["DocumentsClientView",()=>N],39315)},69581,e=>{e.n(e.i(39315))}]);
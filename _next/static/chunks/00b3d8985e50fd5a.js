(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70533,e=>{"use strict";e.s(["AppLayout",()=>eF,"useSidebar",()=>eO],70533);var t=e.i(43476),r=e.i(71645),n=e.i(22016),a=e.i(18566),l=e.i(75254);let i=(0,l.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var s=e.i(61911),o=e.i(88844);let c=(0,l.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),d=(0,l.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,l.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var f=e.i(63059);let h=(0,l.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var m=e.i(52008),p=e.i(75157),x=e.i(19455),v=e.i(99676),g=e.i(57951);let w=[{title:"Prehľad",href:"/app/dashboard",icon:i,roles:["admin","manager","sales"],group:"main"},{title:"Leady a klienti",href:"/app/clients",icon:s.Users,roles:["admin","manager","sales"],group:"main"},{title:"Obchodníci",href:"/app/salespeople",icon:s.Users,roles:["admin","manager"],group:"main"},{title:"Sklad",href:"/app/stock",icon:o.Package,roles:["admin"],group:"main"},{title:"Dokumenty",href:"/app/documents",icon:c,roles:["admin","manager","sales"],group:"main"},{title:"Nastavenia",href:"/app/settings",icon:d,roles:["admin","manager","sales"],group:"system"}];function b(){let{collapsed:e,setCollapsed:l}=eO(),i=(0,a.usePathname)(),s=(0,a.useRouter)(),{user:o,logout:c,isLoading:d}=(0,g.useAuth)(),[b,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y(!0)},[]);let j=w.filter(e=>{if(!b)return e.roles.includes("sales");if(o?.role){let t=String(o.role).toLowerCase();return"admin"===t||"správca"===t||e.roles.includes(t)}return e.roles.includes("sales")}),N=j.filter(e=>"main"===e.group),S=j.filter(e=>"system"===e.group),C=async()=>{console.log("Logout triggered"),await c(),s.push("/login")},k=b&&o?.name?o.name:"Neznámy Používateľ",R=b&&o?.avatar?o.avatar:k.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase();return(0,t.jsxs)("aside",{className:(0,p.cn)("flex flex-col h-full bg-[#0A0A0A] border-r border-border-dark transition-all duration-300 relative",e?"w-16":"w-64"),children:[(0,t.jsx)("div",{className:"flex items-center space-x-2 px-6 py-6 border-b border-border-dark h-[81px] flex-shrink-0",children:e?(0,t.jsx)("div",{className:"w-full flex justify-center",children:(0,t.jsx)(m.Layers,{className:"text-primary w-8 h-8"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Layers,{className:"text-primary w-8 h-8 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-2xl font-bold tracking-tight text-white uppercase",children:"ArtStone"})]})}),(0,t.jsx)(x.Button,{variant:"ghost",size:"icon",onClick:()=>l(!e),className:"absolute -right-3 top-6 h-6 w-6 rounded-full border border-border-dark bg-surface-dark text-muted-foreground hover:text-white z-50 hidden md:flex",children:e?(0,t.jsx)(f.ChevronRight,{className:"h-3 w-3"}):(0,t.jsx)(u,{className:"h-3 w-3"})}),(0,t.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:[!e&&(0,t.jsx)("div",{className:"px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Hlavné"}),N.map(r=>{let a=i.startsWith(r.href);return(0,t.jsxs)(n.default,{href:r.href,className:(0,p.cn)("flex items-center px-4 py-3 text-sm font-medium rounded-lg group transition-all duration-300",a?"bg-steel text-white shadow-glow border-y border-y-gray-600 border-r border-r-gray-600 border-l-2 border-l-primary":"text-gray-400 hover:bg-white/5 hover:text-white",e&&"justify-center px-0 py-3 block text-center"),title:e?r.title:void 0,children:[(0,t.jsx)(r.icon,{className:(0,p.cn)("h-5 w-5 flex-shrink-0 drop-shadow-sm",a?"text-primary filter drop-shadow-[0_0_5px_rgba(255,107,53,0.8)]":"text-gray-500 group-hover:text-gray-300",!e&&"mr-3")}),!e&&(0,t.jsx)("span",{children:r.title})]},r.href)}),S.length>0&&(0,t.jsxs)(t.Fragment,{children:[!e&&(0,t.jsx)("div",{className:"px-2 text-xs font-semibold text-gray-500 uppercase tracking-wider mt-8 mb-2",children:"Systém"}),e&&(0,t.jsx)("div",{className:"h-px bg-border-dark w-full my-4"}),S.map(r=>{let a=i.startsWith(r.href);return(0,t.jsxs)(n.default,{href:r.href,className:(0,p.cn)("flex items-center px-4 py-3 text-sm font-medium rounded-lg group transition-all duration-300",a?"bg-steel text-white shadow-glow border-y border-y-gray-600 border-r border-r-gray-600 border-l-2 border-l-primary":"text-gray-400 hover:bg-white/5 hover:text-white",e&&"justify-center px-0 py-3 block text-center"),title:e?r.title:void 0,children:[(0,t.jsx)(r.icon,{className:(0,p.cn)("h-5 w-5 flex-shrink-0 drop-shadow-sm",a?"text-primary filter drop-shadow-[0_0_5px_rgba(255,107,53,0.8)]":"text-gray-500 group-hover:text-gray-300",!e&&"mr-3")}),!e&&(0,t.jsx)("span",{children:r.title})]},r.href)})]})]}),(0,t.jsx)("div",{className:"p-4 border-t border-border-dark bg-[#0F0F0F] flex-shrink-0",children:(0,t.jsxs)("div",{className:(0,p.cn)("flex items-center",e&&"justify-center flex-col gap-2"),children:[(0,t.jsx)(v.Avatar,{className:"h-9 w-9 rounded-full ring-2 ring-border-dark",children:(0,t.jsx)(v.AvatarFallback,{className:"bg-primary/10 text-primary font-bold",children:R})}),!e&&(0,t.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-white truncate",children:k}),(0,t.jsx)("div",{className:"text-xs font-medium text-gray-500 hover:text-primary cursor-pointer transition-colors",onClick:C,children:"Odhlásiť sa"})]}),e&&(0,t.jsx)(h,{className:"h-4 w-4 text-gray-500 hover:text-primary cursor-pointer mt-2",onClick:C})]})})]})}let y=(0,l.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var j=e.i(65733),N=e.i(45423);let S=(0,l.default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var C=e.i(55146);e.i(74080);var k=e.i(20783),R=Symbol("radix.slottable");function D(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===R}var E=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{var a,l;let i,s,o,c=(l=a=`Primitive.${n}`,(i=r.forwardRef((e,t)=>{let{children:n,...a}=e;if(r.isValidElement(n)){var l;let e,i,s=(l=n,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),o=function(e,t){let r={...t};for(let n in t){let a=e[n],l=t[n];/^on[A-Z]/.test(n)?a&&l?r[n]=(...e)=>{let t=l(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...l}:"className"===n&&(r[n]=[a,l].filter(Boolean).join(" "))}return{...e,...r}}(a,n.props);return n.type!==r.Fragment&&(o.ref=t?(0,k.composeRefs)(t,s):s),r.cloneElement(n,o)}return r.Children.count(n)>1?r.Children.only(null):null})).displayName=`${l}.SlotClone`,s=i,(o=r.forwardRef((e,n)=>{let{children:a,...l}=e,i=r.Children.toArray(a),o=i.find(D);if(o){let e=o.props.children,a=i.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(s,{...l,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,t.jsx)(s,{...l,ref:n,children:a})})).displayName=`${a}.Slot`,o),d=r.forwardRef((e,r)=>{let{asChild:a,...l}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?c:n,{...l,ref:r})});return d.displayName=`Primitive.${n}`,{...e,[n]:d}},{}),_=e.i(96626),T=e.i(30207),P=e.i(86318),M=e.i(34620),L=e.i(70152),A=e.i(81140),z="ScrollArea",[H,O]=function(e,n=[]){let a=[],l=()=>{let t=a.map(e=>r.createContext(e));return function(n){let a=n?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...n,[e]:a}}),[n,a])}};return l.scopeName=e,[function(n,l){let i=r.createContext(l),s=a.length;a=[...a,l];let o=n=>{let{scope:a,children:l,...o}=n,c=a?.[e]?.[s]||i,d=r.useMemo(()=>o,Object.values(o));return(0,t.jsx)(c.Provider,{value:d,children:l})};return o.displayName=n+"Provider",[o,function(t,a){let o=a?.[e]?.[s]||i,c=r.useContext(o);if(c)return c;if(void 0!==l)return l;throw Error(`\`${t}\` must be used within \`${n}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=n.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}(l,...n)]}(z),[F,I]=H(z),W=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,type:l="hover",dir:i,scrollHideDelay:s=600,...o}=e,[c,d]=r.useState(null),[u,f]=r.useState(null),[h,m]=r.useState(null),[p,x]=r.useState(null),[v,g]=r.useState(null),[w,b]=r.useState(0),[y,j]=r.useState(0),[N,S]=r.useState(!1),[C,R]=r.useState(!1),D=(0,k.useComposedRefs)(n,e=>d(e)),_=(0,P.useDirection)(i);return(0,t.jsx)(F,{scope:a,type:l,dir:_,scrollHideDelay:s,scrollArea:c,viewport:u,onViewportChange:f,content:h,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:R,onCornerWidthChange:b,onCornerHeightChange:j,children:(0,t.jsx)(E.div,{dir:_,...o,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});W.displayName=z;var X="ScrollAreaViewport",q=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,children:l,nonce:i,...s}=e,o=I(X,a),c=r.useRef(null),d=(0,k.useComposedRefs)(n,c,o.onViewportChange);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),(0,t.jsx)(E.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,t.jsx)("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});q.displayName=X;var Y="ScrollAreaScrollbar",U=r.forwardRef((e,n)=>{let{forceMount:a,...l}=e,i=I(Y,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,c="horizontal"===e.orientation;return r.useEffect(()=>(c?s(!0):o(!0),()=>{c?s(!1):o(!1)}),[c,s,o]),"hover"===i.type?(0,t.jsx)(B,{...l,ref:n,forceMount:a}):"scroll"===i.type?(0,t.jsx)($,{...l,ref:n,forceMount:a}):"auto"===i.type?(0,t.jsx)(V,{...l,ref:n,forceMount:a}):"always"===i.type?(0,t.jsx)(K,{...l,ref:n}):null});U.displayName=Y;var B=r.forwardRef((e,n)=>{let{forceMount:a,...l}=e,i=I(Y,e.__scopeScrollArea),[s,o]=r.useState(!1);return r.useEffect(()=>{let e=i.scrollArea,t=0;if(e){let r=()=>{window.clearTimeout(t),o(!0)},n=()=>{t=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",n)}}},[i.scrollArea,i.scrollHideDelay]),(0,t.jsx)(_.Presence,{present:a||s,children:(0,t.jsx)(V,{"data-state":s?"visible":"hidden",...l,ref:n})})}),$=r.forwardRef((e,n)=>{var a;let{forceMount:l,...i}=e,s=I(Y,e.__scopeScrollArea),o="horizontal"===e.orientation,c=eh(()=>u("SCROLL_END"),100),[d,u]=(a={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},r.useReducer((e,t)=>a[e][t]??e,"hidden"));return r.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,s.scrollHideDelay,u]),r.useEffect(()=>{let e=s.viewport,t=o?"scrollLeft":"scrollTop";if(e){let r=e[t],n=()=>{let n=e[t];r!==n&&(u("SCROLL"),c()),r=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[s.viewport,o,u,c]),(0,t.jsx)(_.Presence,{present:l||"hidden"!==d,children:(0,t.jsx)(K,{"data-state":"hidden"===d?"hidden":"visible",...i,ref:n,onPointerEnter:(0,A.composeEventHandlers)(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:(0,A.composeEventHandlers)(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),V=r.forwardRef((e,n)=>{let a=I(Y,e.__scopeScrollArea),{forceMount:l,...i}=e,[s,o]=r.useState(!1),c="horizontal"===e.orientation,d=eh(()=>{if(a.viewport){let e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;o(c?e:t)}},10);return em(a.viewport,d),em(a.content,d),(0,t.jsx)(_.Presence,{present:l||s,children:(0,t.jsx)(K,{"data-state":s?"visible":"hidden",...i,ref:n})})}),K=r.forwardRef((e,n)=>{let{orientation:a="vertical",...l}=e,i=I(Y,e.__scopeScrollArea),s=r.useRef(null),o=r.useRef(0),[c,d]=r.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=eo(c.viewport,c.content),f={...l,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,r,n="ltr"){let a=ec(r),l=t||a/2,i=r.scrollbar.paddingStart+l,s=r.scrollbar.size-r.scrollbar.paddingEnd-(a-l),o=r.content-r.viewport;return eu([i,s],"ltr"===n?[0,o]:[-1*o,0])(e)}(e,o.current,c,t)}return"horizontal"===a?(0,t.jsx)(Q,{...f,ref:n,onThumbPositionChange:()=>{if(i.viewport&&s.current){let e=ed(i.viewport.scrollLeft,c,i.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=h(e,i.dir))}}):"vertical"===a?(0,t.jsx)(Z,{...f,ref:n,onThumbPositionChange:()=>{if(i.viewport&&s.current){let e=ed(i.viewport.scrollTop,c);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=h(e))}}):null}),Q=r.forwardRef((e,n)=>{let{sizes:a,onSizesChange:l,...i}=e,s=I(Y,e.__scopeScrollArea),[o,c]=r.useState(),d=r.useRef(null),u=(0,k.useComposedRefs)(n,d,s.onScrollbarXChange);return r.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(ee,{"data-orientation":"horizontal",...i,ref:u,sizes:a,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ec(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,r)=>{if(s.viewport){var n,a;let l=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(l),n=l,a=r,n>0&&n<a&&t.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&l({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:es(o.paddingLeft),paddingEnd:es(o.paddingRight)}})}})}),Z=r.forwardRef((e,n)=>{let{sizes:a,onSizesChange:l,...i}=e,s=I(Y,e.__scopeScrollArea),[o,c]=r.useState(),d=r.useRef(null),u=(0,k.useComposedRefs)(n,d,s.onScrollbarYChange);return r.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,t.jsx)(ee,{"data-orientation":"vertical",...i,ref:u,sizes:a,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ec(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,r)=>{if(s.viewport){var n,a;let l=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(l),n=l,a=r,n>0&&n<a&&t.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&l({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:es(o.paddingTop),paddingEnd:es(o.paddingBottom)}})}})}),[G,J]=H(Y),ee=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,sizes:l,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:f,onResize:h,...m}=e,p=I(Y,a),[x,v]=r.useState(null),g=(0,k.useComposedRefs)(n,e=>v(e)),w=r.useRef(null),b=r.useRef(""),y=p.viewport,j=l.content-l.viewport,N=(0,T.useCallbackRef)(f),S=(0,T.useCallbackRef)(d),C=eh(h,10);function R(e){w.current&&u({x:e.clientX-w.current.left,y:e.clientY-w.current.top})}return r.useEffect(()=>{let e=e=>{let t=e.target;x?.contains(t)&&N(e,j)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[y,x,j,N]),r.useEffect(S,[l,S]),em(x,C),em(p.content,C),(0,t.jsx)(G,{scope:a,scrollbar:x,hasThumb:i,onThumbChange:(0,T.useCallbackRef)(s),onThumbPointerUp:(0,T.useCallbackRef)(o),onThumbPositionChange:S,onThumbPointerDown:(0,T.useCallbackRef)(c),children:(0,t.jsx)(E.div,{...m,ref:g,style:{position:"absolute",...m.style},onPointerDown:(0,A.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),w.current=x.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),R(e))}),onPointerMove:(0,A.composeEventHandlers)(e.onPointerMove,R),onPointerUp:(0,A.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),et="ScrollAreaThumb",er=r.forwardRef((e,r)=>{let{forceMount:n,...a}=e,l=J(et,e.__scopeScrollArea);return(0,t.jsx)(_.Presence,{present:n||l.hasThumb,children:(0,t.jsx)(en,{ref:r,...a})})}),en=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,style:l,...i}=e,s=I(et,a),o=J(et,a),{onThumbPositionChange:c}=o,d=(0,k.useComposedRefs)(n,e=>o.onThumbChange(e)),u=r.useRef(void 0),f=eh(()=>{u.current&&(u.current(),u.current=void 0)},100);return r.useEffect(()=>{let e=s.viewport;if(e){let t=()=>{f(),u.current||(u.current=ef(e,c),c())};return c(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[s.viewport,f,c]),(0,t.jsx)(E.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:(0,A.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;o.onThumbPointerDown({x:r,y:n})}),onPointerUp:(0,A.composeEventHandlers)(e.onPointerUp,o.onThumbPointerUp)})});er.displayName=et;var ea="ScrollAreaCorner",el=r.forwardRef((e,r)=>{let n=I(ea,e.__scopeScrollArea),a=!!(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&a?(0,t.jsx)(ei,{...e,ref:r}):null});el.displayName=ea;var ei=r.forwardRef((e,n)=>{let{__scopeScrollArea:a,...l}=e,i=I(ea,a),[s,o]=r.useState(0),[c,d]=r.useState(0),u=!!(s&&c);return em(i.scrollbarX,()=>{let e=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(e),d(e)}),em(i.scrollbarY,()=>{let e=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(e),o(e)}),u?(0,t.jsx)(E.div,{...l,ref:n,style:{width:s,height:c,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function es(e){return e?parseInt(e,10):0}function eo(e,t){let r=e/t;return isNaN(r)?0:r}function ec(e){let t=eo(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-r)*t,18)}function ed(e,t,r="ltr"){let n=ec(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-a,i=t.content-t.viewport,s=(0,L.clamp)(e,"ltr"===r?[0,i]:[-1*i,0]);return eu([0,i],[0,l-n])(s)}function eu(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}var ef=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return!function a(){let l={left:e.scrollLeft,top:e.scrollTop},i=r.left!==l.left,s=r.top!==l.top;(i||s)&&t(),r=l,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function eh(e,t){let n=(0,T.useCallbackRef)(e),a=r.useRef(0);return r.useEffect(()=>()=>window.clearTimeout(a.current),[]),r.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,t)},[n,t])}function em(e,t){let r=(0,T.useCallbackRef)(t);(0,M.useLayoutEffect)(()=>{let t=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(t),n.unobserve(e)}}},[e,r])}let ep=r.forwardRef(({className:e,children:r,...n},a)=>(0,t.jsxs)(W,{ref:a,className:(0,p.cn)("relative overflow-hidden",e),...n,children:[(0,t.jsx)(q,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(ex,{}),(0,t.jsx)(el,{})]}));ep.displayName=W.displayName;let ex=r.forwardRef(({className:e,orientation:r="vertical",...n},a)=>(0,t.jsx)(U,{ref:a,orientation:r,className:(0,p.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:(0,t.jsx)(er,{className:"relative flex-1 rounded-full bg-border"})}));ex.displayName=U.displayName;var ev=e.i(87486),eg=e.i(66027),ew=e.i(54616),eb=e.i(12598),ey=e.i(11795),ej=e.i(77241),eN=e.i(55545),eS=e.i(55024),eC=e.i(99151),ek=e.i(45110),eR=e.i(81092);function eD(e,t){let r=(0,eR.toDate)(e)-(0,eR.toDate)(t);return r<0?-1:r>0?1:r}var eE=e.i(34662),e_=e.i(7847),eT=e.i(79002),eP=e.i(78583),eM=e.i(43531);function eL({notification:e,onClose:r}){var n,l;let i=(0,a.useRouter)(),s=function(){let e=(0,eb.useQueryClient)(),{user:t}=(0,g.useAuth)();return(0,ew.useMutation)({mutationFn:async e=>{let{error:r}=await ey.supabase.from("notifications").update({is_read:!0}).eq("id",e).eq("user_id",t?.id);if(r)throw r},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["notifications-unread-count"]})}})}(),o=(n=new Date(e.created_at),l={addSuffix:!0,locale:e_.sk},function(e,t,r){var n;let a,l=(0,eS.getDefaultOptions)(),i=r?.locale??l.locale??eN.defaultLocale,s=eD(e,t);if(isNaN(s))throw RangeError("Invalid time value");let o=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:s}),[c,d]=(0,ek.normalizeDates)(r?.in,...s>0?[t,e]:[e,t]),u=(n=void 0,e=>{let t=(n?Math[n]:Math.trunc)(e);return 0===t?0:t})(((0,eR.toDate)(d)-(0,eR.toDate)(c))/1e3),f=Math.round((u-((0,eC.getTimezoneOffsetInMilliseconds)(d)-(0,eC.getTimezoneOffsetInMilliseconds)(c))/1e3)/60);if(f<2)if(r?.includeSeconds)if(u<5)return i.formatDistance("lessThanXSeconds",5,o);else if(u<10)return i.formatDistance("lessThanXSeconds",10,o);else if(u<20)return i.formatDistance("lessThanXSeconds",20,o);else if(u<40)return i.formatDistance("halfAMinute",0,o);else if(u<60)return i.formatDistance("lessThanXMinutes",1,o);else return i.formatDistance("xMinutes",1,o);else if(0===f)return i.formatDistance("lessThanXMinutes",1,o);else return i.formatDistance("xMinutes",f,o);if(f<45)return i.formatDistance("xMinutes",f,o);if(f<90)return i.formatDistance("aboutXHours",1,o);if(f<eE.minutesInDay){let e=Math.round(f/60);return i.formatDistance("aboutXHours",e,o)}if(f<2520)return i.formatDistance("xDays",1,o);else if(f<eE.minutesInMonth){let e=Math.round(f/eE.minutesInDay);return i.formatDistance("xDays",e,o)}else if(f<2*eE.minutesInMonth)return a=Math.round(f/eE.minutesInMonth),i.formatDistance("aboutXMonths",a,o);if((a=function(e,t,r){var n,a;let l,i,s,o,[c,d,u]=(0,ek.normalizeDates)(void 0,e,e,t),f=eD(d,u),h=Math.abs(function(e,t,r){let[n,a]=(0,ek.normalizeDates)(void 0,e,t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}(d,u));if(h<1)return 0;1===d.getMonth()&&d.getDate()>27&&d.setDate(30),d.setMonth(d.getMonth()-f*h);let m=eD(d,u)===-f;+(l=(0,eR.toDate)(c,void 0),n=void 0,(i=(0,eR.toDate)(l,n?.in)).setHours(23,59,59,999),i)==+(a=void 0,o=(s=(0,eR.toDate)(l,a?.in)).getMonth(),s.setFullYear(s.getFullYear(),o+1,0),s.setHours(23,59,59,999),s)&&1===h&&1===eD(c,u)&&(m=!1);let p=f*(h-m);return 0===p?0:p}(d,c))<12){let e=Math.round(f/eE.minutesInMonth);return i.formatDistance("xMonths",e,o)}{let e=a%12,t=Math.trunc(a/12);return e<3?i.formatDistance("aboutXYears",t,o):e<9?i.formatDistance("overXYears",t,o):i.formatDistance("almostXYears",t+1,o)}}(n,(0,ej.constructFrom)(n,Date.now()),l));return(0,t.jsxs)("div",{onClick:()=>{if(e.is_read||s.mutate(e.id),e.entity_type&&e.entity_id){let t="client"===e.entity_type?"/app/clients":"/app/leads";i.push(t),r?.()}},className:(0,p.cn)("flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-colors","hover:bg-accent",!e.is_read&&"bg-primary/5"),children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(()=>{switch(e.type){case"new_client":return(0,t.jsx)(eT.UserPlus,{className:"h-4 w-4 text-blue-500"});case"new_lead":return(0,t.jsx)(eP.FileText,{className:"h-4 w-4 text-green-500"});default:return(0,t.jsx)(eP.FileText,{className:"h-4 w-4"})}})()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("p",{className:(0,p.cn)("text-sm font-medium",!e.is_read&&"text-foreground font-semibold"),children:e.title}),!e.is_read&&(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary flex-shrink-0"})]}),e.message&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5 line-clamp-2",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:o})]}),e.is_read&&(0,t.jsx)(eM.Check,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5"})]})}function eA(){let[e,n]=(0,r.useState)(!1),{data:a=[],isLoading:l}=function(){let{user:e}=(0,g.useAuth)();return(0,eg.useQuery)({queryKey:["notifications",e?.id],queryFn:async()=>{let{data:t,error:r}=await ey.supabase.from("notifications").select("*").eq("user_id",e?.id).order("created_at",{ascending:!1}).limit(20);if(r)throw r;return t},enabled:!!e,refetchInterval:3e4})}(),{data:i=0}=function(){let{user:e}=(0,g.useAuth)();return(0,eg.useQuery)({queryKey:["notifications-unread-count",e?.id],queryFn:async()=>{let{count:t,error:r}=await ey.supabase.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",e?.id).eq("is_read",!1);if(r)throw r;return t||0},enabled:!!e,refetchInterval:3e4})}(),s=function(){let e=(0,eb.useQueryClient)(),{user:t}=(0,g.useAuth)();return(0,ew.useMutation)({mutationFn:async()=>{let{error:e}=await ey.supabase.from("notifications").update({is_read:!0}).eq("user_id",t?.id).eq("is_read",!1);if(e)throw e},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["notifications-unread-count"]})}})}();return(0,t.jsxs)(C.DropdownMenu,{open:e,onOpenChange:n,children:[(0,t.jsx)(C.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(x.Button,{variant:"ghost",size:"icon-sm",className:"relative",children:[(0,t.jsx)(N.Bell,{className:"h-4 w-4"}),i>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"absolute top-1 right-1 h-2 w-2 rounded-full bg-primary"}),(0,t.jsx)(ev.Badge,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:i>9?"9+":i})]})]})}),(0,t.jsxs)(C.DropdownMenuContent,{align:"end",className:"w-80 p-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:"Notifikácie"}),i>0&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[i," ",1===i?"nová":"nové"]})]}),i>0&&(0,t.jsxs)(x.Button,{variant:"ghost",size:"sm",onClick:()=>{s.mutate()},disabled:s.isPending,className:"h-8 text-xs",children:[(0,t.jsx)(S,{className:"h-3 w-3 mr-1"}),"Označiť všetko"]})]}),(0,t.jsx)(ep,{className:"h-[400px]",children:l?(0,t.jsx)("div",{className:"p-8 text-center text-sm text-muted-foreground",children:"Načítavam..."}):0===a.length?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(N.Bell,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Žiadne notifikácie"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Zatiaľ nemáte žiadne nové správy"})]}):(0,t.jsx)("div",{className:"p-2 space-y-1",children:a.map(e=>(0,t.jsx)(eL,{notification:e,onClose:()=>n(!1)},e.id))})})]})]})}function ez({title:e}){let{mobileOpen:r,setMobileOpen:n}=eO();return(0,t.jsx)("header",{className:"sticky top-0 z-40 h-16 border-b border-border-dark bg-surface-dark md:hidden",children:(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 h-full",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.Button,{variant:"ghost",size:"icon",onClick:()=>n(!r),className:"text-text-secondary hover:text-primary transition-colors",children:(0,t.jsx)(y,{className:"h-5 w-5"})}),(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-primary-foreground font-bold text-sm",children:"AS"})}),(0,t.jsx)("span",{className:"text-xl font-bold tracking-tight text-white uppercase hidden sm:inline-block",children:"ArtStone"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(eA,{}),(0,t.jsx)(j.ThemeToggle,{})]})]})})}let eH=(0,r.createContext)({collapsed:!1,setCollapsed:()=>{},mobileOpen:!1,setMobileOpen:()=>{}}),eO=()=>(0,r.useContext)(eH);function eF({children:e,title:n}){let[a,l]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>{window.innerWidth>=1024&&s(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.jsx)(eH.Provider,{value:{collapsed:a,setCollapsed:l,mobileOpen:i,setMobileOpen:s},children:(0,t.jsxs)("div",{className:"flex min-h-screen w-full body-metallic text-gray-300 antialiased overflow-hidden",children:[i&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 z-30 lg:hidden backdrop-blur-sm transition-opacity",onClick:()=>s(!1)}),(0,t.jsx)("div",{className:`fixed left-0 top-0 h-screen z-40 transition-transform duration-300 lg:translate-x-0 ${i?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:(0,t.jsx)(b,{})}),(0,t.jsxs)("div",{className:`flex-1 flex flex-col min-h-screen transition-all duration-300 ${a?"lg:ml-16":"lg:ml-64"} w-full`,children:[(0,t.jsx)(ez,{title:n}),(0,t.jsx)("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto w-full",children:e})})]})]})})}}]);
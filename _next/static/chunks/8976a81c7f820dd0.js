(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10160,e=>{"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>s])},40160,e=>{"use strict";let s=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>s],40160)},78894,e=>{"use strict";let s=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],78894)},81914,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(65268),l=e.i(4049),n=e.i(44141),i=e.i(19455),r=e.i(55593),c=e.i(10204),d=e.i(24687),o=e.i(76639),m=e.i(67489),x=e.i(84774),u=e.i(7233),h=e.i(27612),j=e.i(31278),p=e.i(21557),v=e.i(46696);function g({open:e,onOpenChange:N,defaultClientId:f}={}){let[b,y]=(0,t.useState)(!1),w=void 0!==e?e:b,k=e=>{N?N(e):y(e)},[C,S]=(0,t.useState)(""),[T,D]=(0,t.useState)(""),[_,P]=(0,t.useState)(""),[z,H]=(0,t.useState)([]),[I,F]=(0,t.useState)(0),[M,V]=(0,t.useState)(0),[q,A]=(0,t.useState)("custom"),[L,R]=(0,t.useState)(""),[B,O]=(0,t.useState)(1),[Q,K]=(0,t.useState)(0),Z=(0,a.useCreateQuote)(),{data:E=[]}=(0,l.useClients)(),{data:U=[]}=(0,n.useInventoryItems)();(0,t.useMemo)(()=>{f&&E.length>0&&E.find(e=>e.id===f)&&S(f)},[f,E,w]),(0,t.useMemo)(()=>{let e=new URLSearchParams(window.location.search),s=e.get("leadId"),t=e.get("action");if(s&&"new"===t&&E.length>0){let e=E.find(e=>e.lead_origin_id===s);e&&(S(e.id),k(!0))}},[E]);let $=(0,t.useMemo)(()=>z.reduce((e,s)=>e+s.quantity*s.unit_price,0),[z]),G=Math.max(0,$-I+M),J=.2*G,W=G+J,X=async()=>{if(!C)return void v.toast.error("Vyberte klienta");if(0===z.length)return void v.toast.error("Pridajte aspoň jednu položku");try{await Z.mutateAsync({client_id:C,valid_until:T||void 0,notes:_||void 0,discount:I,shipping:M,items:z.map(e=>({description:e.description,quantity:e.quantity,unit_price:e.unit_price,inventory_item_id:e.inventory_item_id}))}),v.toast.success("Cenová ponuka vytvorená"),k(!1),S(""),D(""),P(""),H([]),F(0),V(0),window.history.replaceState({},"",window.location.pathname)}catch(e){console.error("Create quote error:",e),v.toast.error(e.message||"Nepodarilo sa vytvoriť cenovú ponuku"),e.details&&v.toast.error(e.details)}};return(0,s.jsx)(o.Dialog,{open:w,onOpenChange:k,children:(0,s.jsxs)(o.DialogContent,{className:"max-w-[95vw] sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(o.DialogHeader,{children:(0,s.jsx)(o.DialogTitle,{children:"Vytvoriť cenovú ponuku"})}),(0,s.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Label,{children:"Klient *"}),(0,s.jsxs)(m.Select,{value:C,onValueChange:S,children:[(0,s.jsx)(m.SelectTrigger,{children:(0,s.jsx)(m.SelectValue,{placeholder:"Vyberte klienta"})}),(0,s.jsx)(m.SelectContent,{children:E.map(e=>(0,s.jsxs)(m.SelectItem,{value:e.id,children:[e.contact_name," ",e.company_name?`(${e.company_name})`:""]},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Label,{children:"Platnosť do"}),(0,s.jsx)(r.Input,{type:"date",value:T,onChange:e=>D(e.target.value)})]})]}),(0,s.jsxs)("div",{className:"space-y-4 border rounded-lg p-4 bg-muted/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,s.jsx)(p.Calculator,{className:"h-4 w-4"}),"Položky ponuky"]}),z.length>0&&(0,s.jsxs)(x.Table,{children:[(0,s.jsx)(x.TableHeader,{children:(0,s.jsxs)(x.TableRow,{children:[(0,s.jsx)(x.TableHead,{children:"Popis"}),(0,s.jsx)(x.TableHead,{className:"w-[100px] text-right",children:"Množstvo"}),(0,s.jsx)(x.TableHead,{className:"w-[120px] text-right",children:"Cena/ks"}),(0,s.jsx)(x.TableHead,{className:"w-[120px] text-right",children:"Spolu"}),(0,s.jsx)(x.TableHead,{className:"w-[50px]"})]})}),(0,s.jsx)(x.TableBody,{children:z.map(e=>(0,s.jsxs)(x.TableRow,{children:[(0,s.jsx)(x.TableCell,{children:e.description}),(0,s.jsx)(x.TableCell,{className:"text-right",children:e.quantity}),(0,s.jsxs)(x.TableCell,{className:"text-right",children:[e.unit_price.toFixed(2)," €"]}),(0,s.jsxs)(x.TableCell,{className:"text-right",children:[(e.quantity*e.unit_price).toFixed(2)," €"]}),(0,s.jsx)(x.TableCell,{children:(0,s.jsx)(i.Button,{variant:"ghost",size:"icon-sm",onClick:()=>{var s;return s=e.id,void H(z.filter(e=>e.id!==s))},children:(0,s.jsx)(h.Trash2,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})})]},e.id))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-card p-3 rounded border",children:[(0,s.jsxs)("div",{className:"md:col-span-3 space-y-2",children:[(0,s.jsx)(c.Label,{className:"text-xs",children:"Predloha (Sklad)"}),(0,s.jsxs)(m.Select,{value:q,onValueChange:e=>{if(A(e),"custom"===e)R(""),K(0);else{let s=U.find(s=>s.id===e);s&&(R(s.name),K(s.sale_price||0))}},children:[(0,s.jsx)(m.SelectTrigger,{className:"h-8",children:(0,s.jsx)(m.SelectValue,{placeholder:"Vlastná položka"})}),(0,s.jsxs)(m.SelectContent,{children:[(0,s.jsx)(m.SelectItem,{value:"custom",children:"Vlastná položka"}),U.map(e=>(0,s.jsxs)(m.SelectItem,{value:e.id,children:[e.name," (",e.qty_available," ks)"]},e.id))]})]})]}),(0,s.jsxs)("div",{className:"md:col-span-4 space-y-2",children:[(0,s.jsx)(c.Label,{className:"text-xs",children:"Popis *"}),(0,s.jsx)(r.Input,{className:"h-8",value:L,onChange:e=>R(e.target.value),placeholder:"Názov položky alebo služby"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,s.jsx)(c.Label,{className:"text-xs",children:"Množstvo *"}),(0,s.jsx)(r.Input,{type:"number",className:"h-8",min:"1",value:B,onChange:e=>O(parseInt(e.target.value)||0)})]}),(0,s.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,s.jsx)(c.Label,{className:"text-xs",children:"Cena/ks (€)"}),(0,s.jsx)(r.Input,{type:"number",className:"h-8",min:"0",step:"0.01",value:Q,onChange:e=>K(parseFloat(e.target.value)||0)})]}),(0,s.jsx)("div",{className:"md:col-span-1",children:(0,s.jsx)(i.Button,{size:"sm",className:"w-full h-8",onClick:()=>{L?B<=0?v.toast.error("Množstvo musí byť väčšie ako 0"):(H([...z,{id:Math.random().toString(36).substr(2,9),description:L,quantity:B,unit_price:Q,inventory_item_id:"custom"===q?void 0:q}]),A("custom"),R(""),O(1),K(0)):v.toast.error("Popis položky je povinný")},children:(0,s.jsx)(u.Plus,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"grid gap-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-end gap-4 items-center",children:[(0,s.jsx)(c.Label,{className:"w-24 text-right",children:"Zľava (€)"}),(0,s.jsx)(r.Input,{type:"number",className:"w-32 h-8 text-right",min:"0",step:"0.01",value:I,onChange:e=>F(parseFloat(e.target.value)||0)})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 items-center",children:[(0,s.jsx)(c.Label,{className:"w-24 text-right",children:"Doprava (€)"}),(0,s.jsx)(r.Input,{type:"number",className:"w-32 h-8 text-right",min:"0",step:"0.01",value:M,onChange:e=>V(parseFloat(e.target.value)||0)})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-8 pt-2 mt-2 border-t border-dashed",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Základ"}),(0,s.jsxs)("p",{className:"font-medium",children:[$.toFixed(2)," €"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upravený základ"}),(0,s.jsxs)("p",{className:"font-medium text-foreground",children:[($-I+M).toFixed(2)," €"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"DPH (20%)"}),(0,s.jsxs)("p",{className:"font-medium",children:[J.toFixed(2)," €"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Spolu s DPH"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-primary",children:[W.toFixed(2)," €"]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Label,{children:"Poznámka"}),(0,s.jsx)(d.Textarea,{placeholder:"Interná poznámka k ponuke...",value:_,onChange:e=>P(e.target.value)})]})]}),(0,s.jsxs)(o.DialogFooter,{children:[(0,s.jsx)(i.Button,{variant:"outline",onClick:()=>k(!1),children:"Zrušiť"}),(0,s.jsx)(i.Button,{onClick:X,disabled:Z.isPending,children:Z.isPending?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Vytváram..."]}):"Vytvoriť ponuku"})]})]})})}e.s(["CreateQuoteDialog",()=>g])},60772,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(81914),l=e.i(76639),n=e.i(84774),i=e.i(87486),r=e.i(2747),c=e.i(65268),d=e.i(6700),o=e.i(19455),m=e.i(40160);let x={draft:"Návrh",sent:"Odoslaná",accepted:"Prijatá",rejected:"Zamietnutá"},u={draft:"secondary",sent:"info",accepted:"success",rejected:"destructive"};function h({quoteId:e,open:t,onOpenChange:a}){let{data:h,isLoading:j}=(0,c.useQuote)(e||"");console.log("QuoteDetailDialog render:",{quoteId:e,quote:h,isLoading:j});let p=e=>new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}).format(e);return(0,s.jsx)(l.Dialog,{open:t,onOpenChange:a,children:(0,s.jsxs)(l.DialogContent,{className:"max-w-[95vw] sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(l.DialogHeader,{children:(0,s.jsx)(l.DialogTitle,{className:"flex items-center gap-3",children:j?(0,s.jsx)(r.Skeleton,{className:"h-6 w-32"}):h?(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{children:["Cenová ponuka ",h?.quote_number]}),h&&(0,s.jsx)(i.Badge,{variant:u[h.status],children:x[h.status]})]}),(0,s.jsxs)(o.Button,{size:"sm",variant:"outline",onClick:()=>(0,d.generateQuotePDF)(h),children:[(0,s.jsx)(m.Download,{className:"h-4 w-4 mr-2"}),"Stiahnuť PDF"]})]}):(0,s.jsx)("span",{children:"Detail ponuky"})})}),j?(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsx)(r.Skeleton,{className:"h-20 w-full"}),(0,s.jsx)(r.Skeleton,{className:"h-40 w-full"}),(0,s.jsx)(r.Skeleton,{className:"h-20 w-40 ml-auto"})]}):h?(0,s.jsxs)("div",{className:"space-y-8 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-8 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-muted-foreground mb-1",children:"Klient"}),(0,s.jsx)("div",{className:"font-medium text-lg",children:h.client?.contact_name}),h.client?.company_name&&(0,s.jsx)("div",{className:"text-muted-foreground",children:h.client.company_name}),(0,s.jsxs)("div",{className:"text-muted-foreground mt-1",children:[h.client?.email&&(0,s.jsx)("div",{children:h.client.email}),h.client?.phone&&(0,s.jsx)("div",{children:h.client.phone}),h.client?.address&&(0,s.jsxs)("div",{children:[h.client.address,", ",h.client?.postal_code]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"Vytvorené"}),(0,s.jsx)("div",{children:new Date(h.created_at).toLocaleDateString("sk-SK")})]}),h.valid_until&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"Platnosť do"}),(0,s.jsx)("div",{children:new Date(h.valid_until).toLocaleDateString("sk-SK")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-muted-foreground",children:"Vytvoril"}),(0,s.jsx)("div",{children:h.created_by_user?.full_name||"Neznámy užívateľ"})]})]})})]}),(0,s.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,s.jsxs)(n.Table,{children:[(0,s.jsx)(n.TableHeader,{children:(0,s.jsxs)(n.TableRow,{className:"bg-muted/50",children:[(0,s.jsx)(n.TableHead,{children:"Položka"}),(0,s.jsx)(n.TableHead,{className:"text-right",children:"Množstvo"}),(0,s.jsx)(n.TableHead,{className:"text-right",children:"Cena/ks"}),(0,s.jsx)(n.TableHead,{className:"text-right",children:"Spolu"})]})}),(0,s.jsxs)(n.TableBody,{children:[h.items?.map(e=>(0,s.jsxs)(n.TableRow,{children:[(0,s.jsx)(n.TableCell,{className:"font-medium",children:e.description}),(0,s.jsxs)(n.TableCell,{className:"text-right",children:[e.quantity," ks"]}),(0,s.jsx)(n.TableCell,{className:"text-right",children:p(e.unit_price)}),(0,s.jsx)(n.TableCell,{className:"text-right",children:p(e.total)})]},e.id)),(!h.items||0===h.items.length)&&(0,s.jsx)(n.TableRow,{children:(0,s.jsx)(n.TableCell,{colSpan:4,className:"text-center text-muted-foreground py-4",children:"Žiadne položky"})})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2 border-t pt-4",children:[(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-[300px] text-sm text-muted-foreground",children:[(0,s.jsx)("span",{children:"Základ (bez DPH):"}),(0,s.jsx)("span",{children:p(h.subtotal)})]}),(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-[300px] text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{children:["DPH (",h.tax_rate,"%):"]}),(0,s.jsx)("span",{children:p(h.tax_amount)})]}),(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-[300px] text-lg font-bold text-primary mt-2 border-t border-dashed pt-2",children:[(0,s.jsx)("span",{children:"Spolu:"}),(0,s.jsx)("span",{children:p(h.total)})]})]}),h.notes&&(0,s.jsxs)("div",{className:"bg-muted/30 p-4 rounded-lg text-sm",children:[(0,s.jsx)("h4",{className:"font-semibold mb-1",children:"Poznámka"}),(0,s.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:h.notes})]})]}):(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Cenová ponuka sa nenašla"})]})})}var j=e.i(68499),p=e.i(78894);function v({open:e,onOpenChange:t,quoteNumber:a,onConfirm:l,isDeleting:n=!1}){return(0,s.jsx)(j.AlertDialog,{open:e,onOpenChange:t,children:(0,s.jsxs)(j.AlertDialogContent,{children:[(0,s.jsxs)(j.AlertDialogHeader,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:(0,s.jsx)(p.AlertTriangle,{className:"h-6 w-6 text-destructive"})}),(0,s.jsx)(j.AlertDialogTitle,{children:"Vymazať cenovú ponuku"})]}),(0,s.jsxs)(j.AlertDialogDescription,{className:"text-left pt-4",children:["Naozaj chcete vymazať cenovú ponuku ",(0,s.jsxs)("strong",{className:"text-foreground",children:['"',a,'"']}),"?",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Táto akcia je nevratná a ponuka bude trvalo odstránená vrátane všetkých položiek a rezervácií."]})]}),(0,s.jsxs)(j.AlertDialogFooter,{children:[(0,s.jsx)(j.AlertDialogCancel,{disabled:n,children:"Zrušiť"}),(0,s.jsx)(j.AlertDialogAction,{onClick:e=>{e.preventDefault(),l()},disabled:n,className:"bg-destructive hover:bg-destructive/90",children:n?"Vymazávam...":"Vymazať"})]})]})})}var g=e.i(55593),N=e.i(15288),f=e.i(40803),b=e.i(67489),y=e.i(7233),w=e.i(55436),k=e.i(78583),C=e.i(41071),S=e.i(86536),T=e.i(27612),D=e.i(55146),_=e.i(52169),P=e.i(2335),z=e.i(11795),H=e.i(46696);let I={draft:"Návrh",sent:"Odoslaná",accepted:"Prijatá",rejected:"Zamietnutá"},F={draft:"secondary",sent:"info",accepted:"success",rejected:"destructive"};function M(){let[e,l]=(0,t.useState)(""),x=(0,P.useDebounce)(e,500),[u,j]=(0,t.useState)("all"),[p,M]=(0,t.useState)(null),[V,q]=(0,t.useState)(!1),[A,L]=(0,t.useState)(!1),[R,B]=(0,t.useState)(null),{data:O,isLoading:Q,isError:K,error:Z}=(0,c.useQuotes)(),E=(0,c.useUpdateQuoteStatus)(),U=(0,_.useCreateInvoiceFromQuote)(),$=(0,c.useDeleteQuote)();(0,t.useEffect)(()=>{K&&(console.error("Error loading quotes:",Z),H.toast.error("Nepodarilo sa načítať cenové ponuky"))},[K,Z]);let G=e=>new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}).format(e),J=(0,t.useMemo)(()=>O?O.filter(e=>{if("all"!==u&&e.status!==u)return!1;if(x){let s=x.toLowerCase();return e.quote_number.toLowerCase().includes(s)||(e.client?.contact_name||"").toLowerCase().includes(s)||(e.client?.company_name||"").toLowerCase().includes(s)}return!0}):[],[O,u,x]),W=J?.reduce((e,s)=>e+s.total,0)||0,X=J?.filter(e=>"accepted"===e.status).reduce((e,s)=>e+s.total,0)||0,Y=J?.length?Math.round(J.filter(e=>"accepted"===e.status).length/J.length*100):0,ee=async(e,s)=>{try{await E.mutateAsync({quoteId:e,status:s}),H.toast.success("Status ponuky aktualizovaný")}catch(e){H.toast.error("Nepodarilo sa aktualizovať status")}},es=async e=>{try{await U.mutateAsync(e),H.toast.success("Faktúra vytvorená")}catch(e){H.toast.error("Nepodarilo sa vytvoriť faktúru")}},et=async e=>{try{let s=(0,z.createClient)(),{data:t,error:a}=await s.from("quotes").select(`
          *,
          client:clients(id, contact_name, company_name, email, phone, address),
          items:quote_items(*)
        `).eq("id",e.id).single();if(a)throw a;t&&((0,d.generateQuotePDF)(t),H.toast.success("PDF vygenerované"))}catch(e){console.error("Error generating PDF:",e),H.toast.error("Nepodarilo sa vygenerovať PDF")}},ea=async()=>{if(R)try{await $.mutateAsync(R.id),H.toast.success("Cenová ponuka vymazaná"),B(null)}catch(s){console.error("Delete quote error:",s);let e=s?.message||"Nepodarilo sa vymazať ponuku";H.toast.error(e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-1 gap-3",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(w.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,s.jsx)(g.Input,{placeholder:"Hľadať podľa čísla, klienta...",value:e,onChange:e=>l(e.target.value),className:"pl-9"})]}),(0,s.jsxs)(b.Select,{value:u,onValueChange:j,children:[(0,s.jsx)(b.SelectTrigger,{className:"w-40",children:(0,s.jsx)(b.SelectValue,{placeholder:"Status"})}),(0,s.jsxs)(b.SelectContent,{children:[(0,s.jsx)(b.SelectItem,{value:"all",children:"Všetky statusy"}),Object.entries(I).map(([e,t])=>(0,s.jsx)(b.SelectItem,{value:e,children:t},e))]})]})]}),(0,s.jsxs)(o.Button,{onClick:()=>L(!0),children:[(0,s.jsx)(y.Plus,{className:"mr-2 h-4 w-4"})," Nová ponuka"]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mt-6",children:[(0,s.jsx)(N.Card,{className:"shadow-soft",children:(0,s.jsx)(N.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Celkom ponúk"}),Q?(0,s.jsx)(r.Skeleton,{className:"h-8 w-16 mt-1"}):(0,s.jsx)("p",{className:"text-2xl font-semibold",children:J?.length||0})]}),(0,s.jsx)(k.FileText,{className:"h-8 w-8 text-muted-foreground/50"})]})})}),(0,s.jsx)(N.Card,{className:"shadow-soft",children:(0,s.jsx)(N.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Celková hodnota"}),Q?(0,s.jsx)(r.Skeleton,{className:"h-8 w-24 mt-1"}):(0,s.jsx)("p",{className:"text-2xl font-semibold",children:G(W)})]})})}),(0,s.jsx)(N.Card,{className:"shadow-soft",children:(0,s.jsx)(N.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Prijaté ponuky"}),Q?(0,s.jsx)(r.Skeleton,{className:"h-8 w-24 mt-1"}):(0,s.jsx)("p",{className:"text-2xl font-semibold text-success",children:G(X)})]})})}),(0,s.jsx)(N.Card,{className:"shadow-soft",children:(0,s.jsx)(N.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Úspešnosť"}),Q?(0,s.jsx)(r.Skeleton,{className:"h-8 w-16 mt-1"}):(0,s.jsxs)("p",{className:"text-2xl font-semibold",children:[Y,"%"]})]})})})]}),(0,s.jsx)(N.Card,{className:"shadow-soft mt-6",children:(0,s.jsx)(N.CardContent,{className:"p-0",children:(0,s.jsxs)(n.Table,{children:[(0,s.jsx)(n.TableHeader,{children:(0,s.jsxs)(n.TableRow,{children:[(0,s.jsx)(n.TableHead,{children:"Číslo"}),(0,s.jsx)(n.TableHead,{children:"Klient"}),(0,s.jsx)(n.TableHead,{children:"Status"}),(0,s.jsx)(n.TableHead,{className:"text-right",children:"Suma"}),(0,s.jsx)(n.TableHead,{children:"Platnosť do"}),(0,s.jsx)(n.TableHead,{children:"Vytvoril"}),(0,s.jsx)(n.TableHead,{className:"w-12"})]})}),(0,s.jsx)(n.TableBody,{children:Q?Array.from({length:5}).map((e,t)=>(0,s.jsxs)(n.TableRow,{children:[(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(r.Skeleton,{className:"h-5 w-24"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(r.Skeleton,{className:"h-5 w-32"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(r.Skeleton,{className:"h-5 w-20"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(r.Skeleton,{className:"h-5 w-20"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(r.Skeleton,{className:"h-5 w-24"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(r.Skeleton,{className:"h-5 w-28"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(r.Skeleton,{className:"h-5 w-8"})})]},t)):K?(0,s.jsx)(n.TableRow,{children:(0,s.jsx)(n.TableCell,{colSpan:7,className:"text-center py-8 text-destructive",children:"Nepodarilo sa načítať dáta. Skúste obnoviť stránku."})}):J?.length===0?(0,s.jsx)(n.TableRow,{children:(0,s.jsx)(n.TableCell,{colSpan:7,className:"p-0",children:(0,s.jsx)(f.EmptyState,{icon:(0,s.jsx)(k.FileText,{className:"h-full w-full"}),title:e?"Nenašli sa žiadne výsledky":"Zatiaľ žiadne cenové ponuky",description:e?`Pre v\xfdraz "${e}" sme nenašli žiadnu zhodu.`:"Vytvorte cenovú ponuku pre klienta a začnite predávať.",action:{label:"Vytvoriť ponuku",onClick:()=>L(!0),icon:(0,s.jsx)(y.Plus,{className:"h-4 w-4"})}})})}):J?.map(e=>(0,s.jsxs)(n.TableRow,{className:"cursor-pointer hover:bg-muted/50",children:[(0,s.jsx)(n.TableCell,{children:(0,s.jsx)("span",{className:"font-medium text-foreground",children:e.quote_number})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:e.client?.contact_name||"-"}),e.client?.company_name&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.client.company_name})]})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)(i.Badge,{variant:F[e.status],children:I[e.status]})}),(0,s.jsx)(n.TableCell,{className:"text-right font-medium",children:G(e.total)}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.valid_until?new Date(e.valid_until).toLocaleDateString("sk-SK"):"-"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.created_by_user?.full_name||"-"})}),(0,s.jsx)(n.TableCell,{children:(0,s.jsxs)(D.DropdownMenu,{children:[(0,s.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(o.Button,{variant:"ghost",size:"icon-sm",children:(0,s.jsx)(C.MoreHorizontal,{className:"h-4 w-4"})})}),(0,s.jsxs)(D.DropdownMenuContent,{align:"end",children:[(0,s.jsxs)(D.DropdownMenuItem,{onSelect:s=>{s.preventDefault(),M(e.id),q(!0)},children:[(0,s.jsx)(S.Eye,{className:"h-4 w-4 mr-2"}),"Zobraziť"]}),(0,s.jsxs)(D.DropdownMenuItem,{onClick:()=>et(e),children:[(0,s.jsx)(m.Download,{className:"h-4 w-4 mr-2"}),"Stiahnuť PDF"]}),"draft"===e.status&&(0,s.jsx)(D.DropdownMenuItem,{onClick:()=>ee(e.id,"sent"),children:"Odoslať klientovi"}),"sent"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.DropdownMenuItem,{onClick:()=>ee(e.id,"accepted"),children:"Označiť ako prijatú"}),(0,s.jsx)(D.DropdownMenuItem,{onClick:()=>ee(e.id,"rejected"),children:"Označiť ako zamietnutú"})]}),"accepted"===e.status&&(0,s.jsx)(D.DropdownMenuItem,{onClick:()=>es(e.id),children:"Vytvoriť faktúru"}),(0,s.jsx)(D.DropdownMenuItem,{children:"Duplikovať"}),(0,s.jsxs)(D.DropdownMenuItem,{className:"text-destructive",onClick:()=>B({id:e.id,number:e.quote_number}),children:[(0,s.jsx)(T.Trash2,{className:"h-4 w-4 mr-2"}),"Vymazať"]})]})]})})]},e.id))})]})})}),(0,s.jsx)(a.CreateQuoteDialog,{open:A,onOpenChange:L}),(0,s.jsx)(h,{quoteId:p,open:V,onOpenChange:q}),(0,s.jsx)(v,{open:!!R,onOpenChange:e=>!e&&B(null),quoteNumber:R?.number||"",onConfirm:ea,isDeleting:$.isPending})]})}e.s(["QuotesClientView",()=>M],60772)},13708,e=>{e.n(e.i(60772))},48503,e=>{e.v(s=>Promise.all(["static/chunks/adabfc2d4bff09a9.js"].map(s=>e.l(s))).then(()=>s(15833)))},70653,e=>{e.v(s=>Promise.all(["static/chunks/049ce48f7172c019.js"].map(s=>e.l(s))).then(()=>s(24154)))},95111,e=>{e.v(s=>Promise.all(["static/chunks/6407f2194df4bf9f.js"].map(s=>e.l(s))).then(()=>s(38201)))}]);
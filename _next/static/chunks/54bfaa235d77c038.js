(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2747,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",e),...a})}e.s(["Skeleton",()=>a])},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},48256,e=>{"use strict";let t=(0,e.i(75254).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],48256)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},61353,e=>{"use strict";var t=e.i(43476),r=e.i(2747);function a(){return(0,t.jsxs)("div",{className:"p-4 md:p-6 space-y-6 animate-pulse",children:[(0,t.jsx)(r.Skeleton,{className:"h-8 w-64 bg-[hsl(35,20%,80%)]"}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,t.jsx)(r.Skeleton,{className:"h-[120px] bg-[hsl(35,20%,80%)]"},e))}),(0,t.jsx)(r.Skeleton,{className:"h-[400px] bg-[hsl(35,20%,80%)]"})]})}e.s(["PageSkeleton",()=>a])},92930,e=>{"use strict";let t=(0,e.i(75254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],92930)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},97104,e=>{"use strict";var t=e.i(66027),r=e.i(54616),a=e.i(12598),s=e.i(11795),n=e.i(57951);function i(e){let{user:r}=(0,n.useAuth)();return(0,t.useQuery)({queryKey:["leads",e],queryFn:async()=>{let t=[];console.log("useLeads: fetching leads");let{data:r,error:a}=await s.supabase.from("leads").select("*").order("created_at",{ascending:!1});if(console.log("useLeads: Supabase response",{dbData:r,error:a}),a)throw console.error("useLeads: Error fetching leads",a),a;if(t=r,e?.status&&(t=t.filter(t=>t.status===e.status)),e?.source&&(t=t.filter(t=>t.source_type===e.source)),e?.regionId&&(t=t.filter(t=>t.region_id===e.regionId)),e?.assignedUserId&&(t=t.filter(t=>t.assigned_user_id===e.assignedUserId)),e?.search){let r=e.search.toLowerCase();t=t.filter(e=>e.contact_name?.toLowerCase().includes(r)||e.email?.toLowerCase().includes(r)||e.company_name?.toLowerCase().includes(r))}return t},enabled:!!r})}function o(e){return(0,t.useQuery)({queryKey:["leads",e],queryFn:async()=>{let{data:t,error:r}=await s.supabase.from("leads").select(`
          *,
          region:regions(id, name),
          assigned_user:profiles!leads_assigned_user_id_fkey(id, full_name, email)
        `).eq("id",e).single();if(r)throw r;return t},enabled:!!e})}function l(){let e=(0,a.useQueryClient)(),{user:t}=(0,n.useAuth)();return(0,r.useMutation)({mutationFn:async e=>{let{data:r,error:a}=await s.supabase.from("leads").insert({contact_name:e.contact_name,company_name:e.company_name,email:e.email,phone:e.phone,address:e.address,postal_code:e.postal_code,region_id:e.region_id,status:e.status||"new",source_type:e.source_type||"manual",notes:e.notes,assigned_user_id:e.assigned_user_id||t?.id,created_by:t?.id}).select().single();if(a)throw console.error("Supabase create lead error:",a),a;return r},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["recent-leads"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})},onError:e=>{console.error("Mutation create lead error:",e)}})}function d(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:async({id:e,...t})=>{let{data:r,error:a}=await s.supabase.from("leads").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw console.error("Supabase update lead error:",a),a;return r},onSuccess:t=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["leads",t.id]})},onError:e=>{console.error("Mutation update lead error:",e)}})}function c(){let e=(0,a.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let{error:t}=await s.supabase.from("leads").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}function u(){let e=(0,a.useQueryClient)(),{user:t}=(0,n.useAuth)();return(0,r.useMutation)({mutationFn:async({leadId:e,userId:r})=>{let{data:a,error:n}=await s.supabase.from("leads").update({assigned_user_id:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;if(await s.supabase.from("activities").insert({entity_type:"lead",entity_id:e,activity_type:"note",title:"Lead priradený",description:`Lead bol priraden\xfd nov\xe9mu obchodn\xedkovi`,created_by:t?.id}),r&&r!==t?.id){let{data:t}=await s.supabase.from("leads").select("contact_name,company_name").eq("id",e).single();await s.supabase.from("notifications").insert({user_id:r,type:"new_lead",title:"Nový lead priradený",message:`Lead ${t?.contact_name||t?.company_name||""} v\xe1m bol priraden\xfd`,entity_type:"lead",entity_id:e})}return a},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["activities"]})}})}function m(){let e=(0,a.useQueryClient)(),{user:t}=(0,n.useAuth)();return(0,r.useMutation)({mutationFn:async({leadId:e,status:r,note:a})=>{let{data:n,error:i}=await s.supabase.from("leads").update({status:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return await s.supabase.from("activities").insert({entity_type:"lead",entity_id:e,activity_type:"status_change",title:"Zmena statusu",description:a||`Status zmenen\xfd na: ${r}`,created_by:t?.id}),n},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["activities"]})}})}function h(){let e=(0,a.useQueryClient)(),{user:t}=(0,n.useAuth)();return(0,r.useMutation)({mutationFn:async e=>{let{data:r,error:a}=await s.supabase.from("leads").select("*").eq("id",e).single();if(a)throw a;if(!r)throw Error("Lead not found");if(r.converted_to_client_id)throw Error("Tento lead už bol konvertovaný na klienta");if(r.email){let{data:e}=await s.supabase.from("clients").select("id, contact_name").eq("email",r.email).single();if(e)throw Error(`Klient s emailom ${r.email} už existuje`)}let{data:n,error:i}=await s.supabase.from("clients").insert({contact_name:r.contact_name,company_name:r.company_name,email:r.email,phone:r.phone,address:r.address,postal_code:r.postal_code,region_id:r.region_id,assigned_user_id:r.assigned_user_id,notes:r.notes,status:"active",converted_from_lead_id:r.id,created_by:t?.id}).select().single();if(i)throw console.error("Error creating client:",i),i;let{data:o,error:l}=await s.supabase.from("activities").select("*").eq("entity_type","lead").eq("entity_id",e);if(!l&&o&&o.length>0){let e=o.map(e=>({entity_type:"client",entity_id:n.id,activity_type:e.activity_type,title:e.title,description:e.description,created_by:e.created_by,created_at:e.created_at}));await s.supabase.from("activities").insert(e)}let{error:d}=await s.supabase.from("leads").update({converted_to_client_id:n.id,converted_at:new Date().toISOString(),status:"won",updated_at:new Date().toISOString()}).eq("id",e);return d&&console.error("Error updating lead:",d),await s.supabase.from("activities").insert({entity_type:"client",entity_id:n.id,activity_type:"note",title:"Klient vytvorený z leadu",description:`Klient bol \xfaspešne konvertovan\xfd z leadu "${r.contact_name}"`,created_by:t?.id}),{client:n,lead:r,activitiesCopied:o?.length||0}},onSuccess:t=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["activities"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["recent-leads"]})},onError:e=>{console.error("Lead conversion error:",e)}})}e.s(["useAssignLead",()=>u,"useConvertLead",()=>h,"useCreateLead",()=>l,"useDeleteLead",()=>c,"useLead",()=>o,"useLeads",()=>i,"useUpdateLead",()=>d,"useUpdateLeadStatus",()=>m])},12352,e=>{"use strict";var t=e.i(43476),r=e.i(97104),a=e.i(18566),s=e.i(61353),n=e.i(55545),i=e.i(55024),o=e.i(99151),l=e.i(45110),d=e.i(34662),c=e.i(81092);function u(e,t){let r=(0,c.toDate)(e,t?.in);return r.setHours(0,0,0,0),r}var m=e.i(14522);function h(e,t){return(0,m.startOfWeek)(e,{...t,weekStartsOn:1})}var x=e.i(77241);function f(e,t){let r=(0,c.toDate)(e,t?.in),a=r.getFullYear(),s=(0,x.constructFrom)(r,0);s.setFullYear(a+1,0,4),s.setHours(0,0,0,0);let n=h(s),i=(0,x.constructFrom)(r,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);let o=h(i);return r.getTime()>=n.getTime()?a+1:r.getTime()>=o.getTime()?a:a-1}function p(e,t){let r=(0,c.toDate)(e,t?.in),a=r.getFullYear(),s=(0,i.getDefaultOptions)(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=(0,x.constructFrom)(t?.in||e,0);o.setFullYear(a+1,0,n),o.setHours(0,0,0,0);let l=(0,m.startOfWeek)(o,t),d=(0,x.constructFrom)(t?.in||e,0);d.setFullYear(a,0,n),d.setHours(0,0,0,0);let u=(0,m.startOfWeek)(d,t);return+r>=+l?a+1:+r>=+u?a:a-1}function g(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let y={y(e,t){let r=e.getFullYear(),a=r>0?r:1-r;return g("yy"===t?a%100:a,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):g(r+1,2)},d:(e,t)=>g(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>g(e.getHours()%12||12,t.length),H:(e,t)=>g(e.getHours(),t.length),m:(e,t)=>g(e.getMinutes(),t.length),s:(e,t)=>g(e.getSeconds(),t.length),S(e,t){let r=t.length;return g(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},b={G:function(e,t,r){let a=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return y.y(e,t)},Y:function(e,t,r,a){let s=p(e,a),n=s>0?s:1-s;return"YY"===t?g(n%100,2):"Yo"===t?r.ordinalNumber(n,{unit:"year"}):g(n,t.length)},R:function(e,t){return g(f(e),t.length)},u:function(e,t){return g(e.getFullYear(),t.length)},Q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return g(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return g(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){let a=e.getMonth();switch(t){case"M":case"MM":return y.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){let a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return g(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){let s,n,o,l,u,h=(s=(0,c.toDate)(e,a?.in),Math.round(((0,m.startOfWeek)(s,a)-(n=(0,i.getDefaultOptions)(),o=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=p(s,a),(u=(0,x.constructFrom)(a?.in||s,0)).setFullYear(l,0,o),u.setHours(0,0,0,0),(0,m.startOfWeek)(u,a)))/d.millisecondsInWeek)+1);return"wo"===t?r.ordinalNumber(h,{unit:"week"}):g(h,t.length)},I:function(e,t,r){let a,s,n,i=Math.round((h(a=(0,c.toDate)(e,void 0))-(s=f(a,void 0),(n=(0,x.constructFrom)(a,0)).setFullYear(s,0,4),n.setHours(0,0,0,0),h(n)))/d.millisecondsInWeek)+1;return"Io"===t?r.ordinalNumber(i,{unit:"week"}):g(i,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):y.d(e,t)},D:function(e,t,r){let a,s,n=function(e,t,r){let[a,s]=(0,l.normalizeDates)(void 0,e,t),n=u(a),i=u(s);return Math.round((n-(0,o.getTimezoneOffsetInMilliseconds)(n)-(i-(0,o.getTimezoneOffsetInMilliseconds)(i)))/d.millisecondsInDay)}(a=(0,c.toDate)(e,void 0),((s=(0,c.toDate)(a,void 0)).setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s))+1;return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):g(n,t.length)},E:function(e,t,r){let a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){let s=e.getDay(),n=(s-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(n);case"ee":return g(n,2);case"eo":return r.ordinalNumber(n,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){let s=e.getDay(),n=(s-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(n);case"cc":return g(n,t.length);case"co":return r.ordinalNumber(n,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){let a=e.getDay(),s=0===a?7:a;switch(t){case"i":return String(s);case"ii":return g(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){let a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){let a,s=e.getHours();switch(a=12===s?"noon":0===s?"midnight":s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){let a,s=e.getHours();switch(a=s>=17?"evening":s>=12?"afternoon":s>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return y.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):y.H(e,t)},K:function(e,t,r){let a=e.getHours()%12;return"Ko"===t?r.ordinalNumber(a,{unit:"hour"}):g(a,t.length)},k:function(e,t,r){let a=e.getHours();return(0===a&&(a=24),"ko"===t)?r.ordinalNumber(a,{unit:"hour"}):g(a,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):y.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):y.s(e,t)},S:function(e,t){return y.S(e,t)},X:function(e,t,r){let a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return v(a);case"XXXX":case"XX":return j(a);default:return j(a,":")}},x:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"x":return v(a);case"xxxx":case"xx":return j(a);default:return j(a,":")}},O:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+w(a,":");default:return"GMT"+j(a,":")}},z:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+w(a,":");default:return"GMT"+j(a,":")}},t:function(e,t,r){return g(Math.trunc(e/1e3),t.length)},T:function(e,t,r){return g(+e,t.length)}};function w(e,t=""){let r=e>0?"-":"+",a=Math.abs(e),s=Math.trunc(a/60),n=a%60;return 0===n?r+String(s):r+String(s)+t+g(n,2)}function v(e,t){return e%60==0?(e>0?"-":"+")+g(Math.abs(e)/60,2):j(e,t)}function j(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+g(Math.trunc(r/60),2)+t+g(r%60,2)}let N=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},k=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},_={p:k,P:(e,t)=>{let r,a=e.match(/(P+)(p+)?/)||[],s=a[1],n=a[2];if(!n)return N(e,t);switch(s){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",N(s,t)).replace("{{time}}",k(n,t))}},M=/^D+$/,q=/^Y+$/,S=["D","DD","YY","YYYY"],D=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,P=/^'([^]*?)'?$/,z=/''/g,C=/[a-zA-Z]/;function O(e,t,r){let a=(0,i.getDefaultOptions)(),s=r?.locale??a.locale??n.defaultLocale,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,d=(0,c.toDate)(e,r?.in);if(!(d instanceof Date||"object"==typeof d&&"[object Date]"===Object.prototype.toString.call(d))&&"number"!=typeof d||isNaN(+(0,c.toDate)(d)))throw RangeError("Invalid time value");let u=t.match(L).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,_[t])(e,s.formatLong):e}).join("").match(D).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var r;let t;return{isToken:!1,value:(t=(r=e).match(P))?t[1].replace(z,"'"):r}}if(b[t])return{isToken:!0,value:e};if(t.match(C))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(u=s.localize.preprocessor(d,u));let m={firstWeekContainsDate:o,weekStartsOn:l,locale:s};return u.map(a=>{if(!a.isToken)return a.value;let n=a.value;return(!r?.useAdditionalWeekYearTokens&&q.test(n)||!r?.useAdditionalDayOfYearTokens&&M.test(n))&&function(e,t,r){var a,s,n;let i,o=(a=e,s=t,n=r,i="Y"===a[0]?"years":"days of the month",`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${s}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(o),S.includes(e))throw RangeError(o)}(n,t,String(e)),(0,b[n[0]])(d,n,s.localize,m)}).join("")}var Q=e.i(7847),A=e.i(71689),F=e.i(84614),T=e.i(63488),E=e.i(43432),K=e.i(46897),H=e.i(48256),Y=e.i(69638),W=e.i(75254);let I=(0,W.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),G=(0,W.default)("cloud-download",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);var B=e.i(92930);let $=(0,W.default)("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var U=e.i(19455);function R({leadId:e}){let n=(0,a.useRouter)(),{data:i,isLoading:o}=(0,r.useLead)(e);if(o)return(0,t.jsx)(s.PageSkeleton,{});if(!i)return(0,t.jsx)("div",{className:"text-center p-10 text-gray-500",children:"Lead nebol nájdený."});let l={new:"bg-blue-900/30 text-blue-400 border-blue-900/50",contacted:"bg-yellow-900/30 text-yellow-500 border-yellow-900/50",qualified:"bg-purple-900/30 text-purple-400 border-purple-900/50",proposal:"bg-indigo-900/30 text-indigo-400 border-indigo-900/50",won:"bg-green-900/30 text-green-400 border-green-900/50",lost:"bg-red-900/30 text-red-400 border-red-900/50"};return(0,t.jsxs)("div",{className:"space-y-6 animate-fade-in pb-10",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-[#111] p-6 rounded-xl border border-border-dark shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>n.back(),className:"p-2 hover:bg-white/5 rounded-lg transition-colors border border-transparent hover:border-border-dark",children:(0,t.jsx)(A.ArrowLeft,{className:"w-5 h-5 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("h1",{className:"text-2xl font-display font-bold text-white tracking-tight",children:i.contact_name}),(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold border ${l[i.status]||l.new}`,children:{new:"Nový Dopyt",contacted:"Kontaktovaný",qualified:"Kvalifikovaný",proposal:"Ponuka Odoslaná",won:"Získaný",lost:"Stratený"}[i.status]||i.status})]}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-400 flex items-center",children:[i.company_name||"Súkromná osoba",(0,t.jsx)("span",{className:"mx-2",children:"•"}),"Vytvorené: ",O(new Date(i.created_at),"d. MMMM yyyy",{locale:Q.sk})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3 w-full md:w-auto",children:[(0,t.jsxs)(U.Button,{variant:"outline",className:"flex-1 md:flex-none border-border-dark text-gray-300 hover:text-white bg-[#1A1A1A]",children:[(0,t.jsx)(B.Edit2,{className:"w-4 h-4 mr-2"})," Upraviť"]}),(0,t.jsx)(U.Button,{className:"flex-1 md:flex-none shadow-lg shadow-primary/20 bg-primary hover:bg-primary-hover text-white",children:"Konvertovať na Klienta"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6 lg:col-span-1",children:[(0,t.jsxs)("div",{className:"bg-surface-card rounded-xl shadow-lg border border-border-dark p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center mb-6",children:[(0,t.jsx)(F.User,{className:"w-5 h-5 mr-2 text-primary"}),"Informácie o leadovi"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(T.Mail,{className:"w-5 h-5 text-gray-500 mr-3 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Email"}),(0,t.jsx)("p",{className:"text-sm font-medium text-white hover:text-primary transition-colors cursor-pointer",children:i.email||"—"})]})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(E.Phone,{className:"w-5 h-5 text-gray-500 mr-3 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Telefón"}),(0,t.jsx)("p",{className:"text-sm font-medium text-white",children:i.phone||"—"})]})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(K.MapPin,{className:"w-5 h-5 text-gray-500 mr-3 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase font-medium",children:"Adresa lokality"}),(0,t.jsxs)("p",{className:"text-sm text-gray-300",children:[i.address||"—",i.postal_code&&(0,t.jsx)("br",{}),i.postal_code&&`${i.postal_code}`,i.region?.name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("br",{}),i.region.name]})]})]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-border-dark mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"Zdroj leadu"}),(0,t.jsx)("span",{className:"text-sm text-gray-300",children:i.source_type})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"Zodpovedný"}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full bg-primary/20 flex items-center justify-center text-[10px] font-bold text-primary mr-1.5 ring-1 ring-primary/30",children:(i.assigned_user?.full_name||"N").charAt(0)}),(0,t.jsx)("span",{className:"text-sm text-white",children:i.assigned_user?.full_name||"Nepriradené"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 uppercase font-medium",children:"Hodnota"}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:"Nenastavená"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-surface-card rounded-xl shadow-lg border border-border-dark p-6",children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-wider mb-4",children:"Rýchle akcie"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{className:"flex flex-col items-center justify-center p-3 rounded-lg bg-[#252525] border border-border-dark hover:bg-white/5 hover:border-gray-500 transition-all group",children:[(0,t.jsx)(I,{className:"w-5 h-5 text-gray-400 group-hover:text-white mb-2"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"Poznámka"})]}),(0,t.jsxs)("button",{className:"flex flex-col items-center justify-center p-3 rounded-lg bg-[#252525] border border-border-dark hover:bg-white/5 hover:border-primary transition-all group",children:[(0,t.jsx)($,{className:"w-5 h-5 text-gray-400 group-hover:text-primary mb-2"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"Hovor"})]}),(0,t.jsxs)("button",{className:"flex flex-col items-center justify-center p-3 rounded-lg bg-[#252525] border border-border-dark hover:bg-white/5 hover:border-blue-500 transition-all group",children:[(0,t.jsx)(G,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-400 mb-2"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"Ponuka"})]}),(0,t.jsxs)("button",{className:"flex flex-col items-center justify-center p-3 rounded-lg bg-[#252525] border border-border-dark hover:bg-white/5 hover:border-green-500 transition-all group",children:[(0,t.jsx)(Y.CheckCircle,{className:"w-5 h-5 text-gray-400 group-hover:text-green-400 mb-2"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"Status"})]})]})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-surface-card rounded-xl shadow-lg border border-border-dark overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex border-b border-border-dark bg-[#1A1A1A] overflow-x-auto",children:[(0,t.jsx)("button",{className:"px-6 py-4 text-sm font-medium text-primary border-b-2 border-primary whitespace-nowrap",children:"Prehľad a Poznámky"}),(0,t.jsx)("button",{className:"px-6 py-4 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-colors whitespace-nowrap",children:"Ponuky a Ceny (0)"}),(0,t.jsx)("button",{className:"px-6 py-4 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-colors whitespace-nowrap",children:"Súbory (0)"})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h4",{className:"text-sm font-bold text-white uppercase tracking-wider mb-4 flex items-center",children:"Požiadavky klienta"}),(0,t.jsx)("div",{className:"bg-[#1F1F1F] p-4 rounded-lg border border-border-dark mb-6",children:(0,t.jsx)("p",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:i.notes||"Žiadne poznámky."})}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex-shrink-0 flex items-center justify-center text-xs font-bold text-primary ring-1 ring-primary/30",children:"A"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("textarea",{rows:3,className:"w-full bg-[#1A1A1A] border border-border-dark rounded-lg p-3 text-sm text-white focus:border-primary focus:ring-1 focus:ring-primary transition-colors resize-none mb-3",placeholder:"Pridať novú poznámku k leadu..."}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(U.Button,{size:"sm",className:"bg-primary hover:bg-primary-hover text-white",children:"Pridať poznámku"})})]})]})})]})]}),(0,t.jsxs)("div",{className:"bg-surface-card rounded-xl shadow-lg border border-border-dark p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-white mb-6",children:"História komunikácie"}),(0,t.jsxs)("div",{className:"relative pl-4 border-l-2 border-border-dark space-y-8 pb-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute -left-[25px] flex items-center justify-center w-6 h-6 bg-surface-dark border-2 border-primary rounded-full ring-4 ring-surface-card",children:(0,t.jsx)(E.Phone,{className:"w-3 h-3 text-primary"})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-1",children:[(0,t.jsx)("h5",{className:"text-sm font-bold text-white",children:"Úvodný telefonát"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Dnes, 10:30"})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 mb-2 flex items-center",children:[(0,t.jsx)("span",{className:"w-4 h-4 rounded-full bg-gray-700 flex items-center justify-center text-[8px] text-white mr-1.5",children:"A"}),"Pridal: Admin (Vy)"]}),(0,t.jsx)("div",{className:"bg-[#1A1A1A] border border-border-dark p-3 rounded-lg text-sm text-gray-300",children:(0,t.jsx)("p",{children:"Klient má záujem o kompletnú realizáciu kúpeľne a terasy (Travertín). Dohodnuté predbežné zameranie na budúci týždeň. Potrebné poslať cenník materiálov."})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute -left-[25px] flex items-center justify-center w-6 h-6 bg-surface-dark border-2 border-yellow-500 rounded-full ring-4 ring-surface-card",children:(0,t.jsx)(Y.CheckCircle,{className:"w-3 h-3 text-yellow-500"})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-1",children:[(0,t.jsx)("h5",{className:"text-sm font-bold text-white",children:"Zmena Statusu"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Dnes, 10:35"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:["Status zmenený z ",(0,t.jsx)("span",{className:"text-gray-300 font-medium",children:"Nový Dopyt"})," na ",(0,t.jsx)("span",{className:"text-yellow-500 font-medium",children:"Kontaktovaný"})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute -left-[25px] flex items-center justify-center w-6 h-6 bg-surface-dark border-2 border-gray-500 rounded-full ring-4 ring-surface-card",children:(0,t.jsx)(H.Globe,{className:"w-3 h-3 text-gray-400"})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-1",children:[(0,t.jsx)("h5",{className:"text-sm font-bold text-white",children:"Lead Vytvorený"}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:O(new Date(i.created_at),"d. MMM yyyy, HH:mm",{locale:Q.sk})})]}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Lead bol automaticky zaznamenaný zo systému Webový Formulár."})]})]})]})]})]})]})}e.s(["LeadDetailClientView",()=>R],12352)}]);
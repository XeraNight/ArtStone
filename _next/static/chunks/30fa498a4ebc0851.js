(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61353,e=>{"use strict";var a=e.i(43476),t=e.i(2747);function s(){return(0,a.jsxs)("div",{className:"p-4 md:p-6 space-y-6 animate-pulse",children:[(0,a.jsx)(t.Skeleton,{className:"h-8 w-64 bg-white/5"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,a.jsx)(t.Skeleton,{className:"h-[120px] bg-white/5"},e))}),(0,a.jsx)(t.Skeleton,{className:"h-[400px] bg-white/5"})]})}e.s(["PageSkeleton",()=>s])},7486,e=>{"use strict";let a=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>a],7486)},4049,e=>{"use strict";var a=e.i(66027),t=e.i(54616),s=e.i(12598),r=e.i(11795),i=e.i(57951);function l(e){let{user:t}=(0,i.useAuth)();return(0,a.useQuery)({queryKey:["clients",e],queryFn:async()=>{let a=[];console.log("useClients: fetching",{filters:e});let{data:t,error:s}=await r.supabase.from("clients").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching clients:",s),s;if(console.log("useClients: fetched",t),a=t,e?.status&&(a=a.filter(a=>a.status===e.status)),e?.regionId&&(a=a.filter(a=>a.region_id===e.regionId)),e?.assignedUserId&&(a=a.filter(a=>a.assigned_user_id===e.assignedUserId)),e?.search){let t=e.search.toLowerCase();a=a.filter(e=>e.contact_name?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.company_name?.toLowerCase().includes(t))}return a},enabled:!!t,staleTime:3e5,retry:2,refetchOnWindowFocus:!1})}function n(){let e=(0,s.useQueryClient)(),{user:a}=(0,i.useAuth)();return(0,t.useMutation)({mutationFn:async e=>{let{data:t,error:s}=await r.supabase.from("clients").insert({contact_name:e.contact_name,company_name:e.company_name,email:e.email,phone:e.phone,address:e.address,postal_code:e.postal_code,region_id:e.region_id,status:e.status||"prospect",notes:e.notes,assigned_user_id:e.assigned_user_id||a?.id,lead_origin_id:e.lead_origin_id,created_by:a?.id}).select().single();if(s)throw s;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}function d(){let e=(0,s.useQueryClient)(),{user:a}=(0,i.useAuth)();return(0,t.useMutation)({mutationFn:async({id:e,...t})=>{let{data:s}=await r.supabase.from("clients").select("assigned_user_id,contact_name,company_name").eq("id",e).single(),{data:i,error:l}=await r.supabase.from("clients").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(l)throw l;return t.assigned_user_id&&s?.assigned_user_id!==t.assigned_user_id&&t.assigned_user_id!==a?.id&&await r.supabase.from("notifications").insert({user_id:t.assigned_user_id,type:"new_client",title:"Nový klient priradený",message:`Klient ${s?.contact_name||s?.company_name||"bol"} v\xe1m bol priraden\xfd`,entity_type:"client",entity_id:e}),i},onSuccess:a=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["clients",a.id]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}function o(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:async e=>{let{error:a}=await r.supabase.from("clients").delete().eq("id",e);if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}e.s(["useClients",()=>l,"useCreateClient",()=>n,"useDeleteClient",()=>o,"useUpdateClient",()=>d])},84774,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...t})}));r.displayName="Table";let i=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let l=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));n.displayName="TableRow";let d=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let o=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));o.displayName="TableCell",t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>o,"TableHead",()=>d,"TableHeader",()=>i,"TableRow",()=>n])},55436,e=>{"use strict";let a=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>a],55436)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},15288,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));r.displayName="Card";let i=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));n.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},86536,e=>{"use strict";let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},68499,e=>{"use strict";let a;var t=e.i(43476),s=e.i(71645),r=e.i(20783),i=e.i(26999),l=e.i(81140),n=Symbol("radix.slottable"),d="AlertDialog",[o,c]=function(e,a=[]){let r=[],i=()=>{let a=r.map(e=>s.createContext(e));return function(t){let r=t?.[e]||a;return s.useMemo(()=>({[`__scope${e}`]:{...t,[e]:r}}),[t,r])}};return i.scopeName=e,[function(a,i){let l=s.createContext(i),n=r.length;r=[...r,i];let d=a=>{let{scope:r,children:i,...d}=a,o=r?.[e]?.[n]||l,c=s.useMemo(()=>d,Object.values(d));return(0,t.jsx)(o.Provider,{value:c,children:i})};return d.displayName=a+"Provider",[d,function(t,r){let d=r?.[e]?.[n]||l,o=s.useContext(d);if(o)return o;if(void 0!==i)return i;throw Error(`\`${t}\` must be used within \`${a}\``)}]},function(...e){let a=e[0];if(1===e.length)return a;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=t.reduce((a,{useScope:t,scopeName:s})=>{let r=t(e)[`__scope${s}`];return{...a,...r}},{});return s.useMemo(()=>({[`__scope${a.scopeName}`]:r}),[r])}};return t.scopeName=a.scopeName,t}(i,...a)]}(d,[i.createDialogScope]),u=(0,i.createDialogScope)(),m=e=>{let{__scopeAlertDialog:a,...s}=e,r=u(a);return(0,t.jsx)(i.Root,{...r,...s,modal:!0})};m.displayName=d,s.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=u(s);return(0,t.jsx)(i.Trigger,{...l,...r,ref:a})}).displayName="AlertDialogTrigger";var x=e=>{let{__scopeAlertDialog:a,...s}=e,r=u(a);return(0,t.jsx)(i.Portal,{...r,...s})};x.displayName="AlertDialogPortal";var p=s.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=u(s);return(0,t.jsx)(i.Overlay,{...l,...r,ref:a})});p.displayName="AlertDialogOverlay";var h="AlertDialogContent",[y,g]=o(h),f=((a=({children:e})=>(0,t.jsx)(t.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",a.__radixId=n,a),b=s.forwardRef((e,a)=>{let{__scopeAlertDialog:n,children:d,...o}=e,c=u(n),m=s.useRef(null),x=(0,r.useComposedRefs)(a,m),p=s.useRef(null);return(0,t.jsx)(i.WarningProvider,{contentName:h,titleName:j,docsSlug:"alert-dialog",children:(0,t.jsx)(y,{scope:n,cancelRef:p,children:(0,t.jsxs)(i.Content,{role:"alertdialog",...c,...o,ref:x,onOpenAutoFocus:(0,l.composeEventHandlers)(o.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(f,{children:d}),(0,t.jsx)(D,{contentRef:m})]})})})});b.displayName=h;var j="AlertDialogTitle",w=s.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=u(s);return(0,t.jsx)(i.Title,{...l,...r,ref:a})});w.displayName=j;var N="AlertDialogDescription",v=s.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=u(s);return(0,t.jsx)(i.Description,{...l,...r,ref:a})});v.displayName=N;var _=s.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...r}=e,l=u(s);return(0,t.jsx)(i.Close,{...l,...r,ref:a})});_.displayName="AlertDialogAction";var C="AlertDialogCancel",k=s.forwardRef((e,a)=>{let{__scopeAlertDialog:s,...l}=e,{cancelRef:n}=g(C,s),d=u(s),o=(0,r.useComposedRefs)(a,n);return(0,t.jsx)(i.Close,{...d,...l,ref:o})});k.displayName=C;var D=({contentRef:e})=>{let a=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${N}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},S=e.i(75157),T=e.i(19455);let q=s.forwardRef(({className:e,...a},s)=>(0,t.jsx)(p,{className:(0,S.cn)("fixed inset-0 z-50 bg-black/90 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:s}));q.displayName=p.displayName;let A=s.forwardRef(({className:e,...a},s)=>(0,t.jsxs)(x,{children:[(0,t.jsx)(q,{}),(0,t.jsx)(b,{ref:s,className:(0,S.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));A.displayName=b.displayName;let M=({className:e,...a})=>(0,t.jsx)("div",{className:(0,S.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});M.displayName="AlertDialogHeader";let K=({className:e,...a})=>(0,t.jsx)("div",{className:(0,S.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});K.displayName="AlertDialogFooter";let R=s.forwardRef(({className:e,...a},s)=>(0,t.jsx)(w,{ref:s,className:(0,S.cn)("text-lg font-semibold",e),...a}));R.displayName=w.displayName;let L=s.forwardRef(({className:e,...a},s)=>(0,t.jsx)(v,{ref:s,className:(0,S.cn)("text-sm text-muted-foreground",e),...a}));L.displayName=v.displayName;let Q=s.forwardRef(({className:e,...a},s)=>(0,t.jsx)(_,{ref:s,className:(0,S.cn)((0,T.buttonVariants)(),e),...a}));Q.displayName=_.displayName;let P=s.forwardRef(({className:e,...a},s)=>(0,t.jsx)(k,{ref:s,className:(0,S.cn)((0,T.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));P.displayName=k.displayName,e.s(["AlertDialog",()=>m,"AlertDialogAction",()=>Q,"AlertDialogCancel",()=>P,"AlertDialogContent",()=>A,"AlertDialogDescription",()=>L,"AlertDialogFooter",()=>K,"AlertDialogHeader",()=>M,"AlertDialogTitle",()=>R],68499)},25652,e=>{"use strict";let a=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>a],25652)},23585,e=>{"use strict";let a=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>a],23585)},63488,e=>{"use strict";let a=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],63488)},43432,e=>{"use strict";let a=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>a],43432)},46897,e=>{"use strict";let a=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>a],46897)},97104,e=>{"use strict";var a=e.i(66027),t=e.i(54616),s=e.i(12598),r=e.i(11795),i=e.i(57951);function l(e){let{user:t}=(0,i.useAuth)();return(0,a.useQuery)({queryKey:["leads",e],queryFn:async()=>{let a=[];console.log("useLeads: fetching leads");let{data:t,error:s}=await r.supabase.from("leads").select("*").order("created_at",{ascending:!1});if(console.log("useLeads: Supabase response",{dbData:t,error:s}),s)throw console.error("useLeads: Error fetching leads",s),s;if(a=t,e?.status&&(a=a.filter(a=>a.status===e.status)),e?.source&&(a=a.filter(a=>a.source_type===e.source)),e?.regionId&&(a=a.filter(a=>a.region_id===e.regionId)),e?.assignedUserId&&(a=a.filter(a=>a.assigned_user_id===e.assignedUserId)),e?.search){let t=e.search.toLowerCase();a=a.filter(e=>e.contact_name?.toLowerCase().includes(t)||e.email?.toLowerCase().includes(t)||e.company_name?.toLowerCase().includes(t))}return a},enabled:!!t})}function n(e){return(0,a.useQuery)({queryKey:["leads",e],queryFn:async()=>{let{data:a,error:t}=await r.supabase.from("leads").select(`
          *,
          region:regions(id, name),
          assigned_user:profiles!leads_assigned_user_id_fkey(id, full_name, email)
        `).eq("id",e).single();if(t)throw t;return a},enabled:!!e})}function d(){let e=(0,s.useQueryClient)(),{user:a}=(0,i.useAuth)();return(0,t.useMutation)({mutationFn:async e=>{let{data:t,error:s}=await r.supabase.from("leads").insert({contact_name:e.contact_name,company_name:e.company_name,email:e.email,phone:e.phone,address:e.address,postal_code:e.postal_code,region_id:e.region_id,status:e.status||"new",source_type:e.source_type||"manual",notes:e.notes,assigned_user_id:e.assigned_user_id||a?.id,created_by:a?.id}).select().single();if(s)throw console.error("Supabase create lead error:",s),s;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["recent-leads"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})},onError:e=>{console.error("Mutation create lead error:",e)}})}function o(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:async({id:e,...a})=>{let{data:t,error:s}=await r.supabase.from("leads").update({...a,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Supabase update lead error:",s),s;return t},onSuccess:a=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["leads",a.id]})},onError:e=>{console.error("Mutation update lead error:",e)}})}function c(){let e=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:async e=>{let{error:a}=await r.supabase.from("leads").delete().eq("id",e);if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}function u(){let e=(0,s.useQueryClient)(),{user:a}=(0,i.useAuth)();return(0,t.useMutation)({mutationFn:async({leadId:e,userId:t})=>{let{data:s,error:i}=await r.supabase.from("leads").update({assigned_user_id:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;if(await r.supabase.from("activities").insert({entity_type:"lead",entity_id:e,activity_type:"note",title:"Lead priradený",description:`Lead bol priraden\xfd nov\xe9mu obchodn\xedkovi`,created_by:a?.id}),t&&t!==a?.id){let{data:a}=await r.supabase.from("leads").select("contact_name,company_name").eq("id",e).single();await r.supabase.from("notifications").insert({user_id:t,type:"new_lead",title:"Nový lead priradený",message:`Lead ${a?.contact_name||a?.company_name||""} v\xe1m bol priraden\xfd`,entity_type:"lead",entity_id:e})}return s},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["activities"]})}})}function m(){let e=(0,s.useQueryClient)(),{user:a}=(0,i.useAuth)();return(0,t.useMutation)({mutationFn:async({leadId:e,status:t,note:s})=>{let{data:i,error:l}=await r.supabase.from("leads").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(l)throw l;return await r.supabase.from("activities").insert({entity_type:"lead",entity_id:e,activity_type:"status_change",title:"Zmena statusu",description:s||`Status zmenen\xfd na: ${t}`,created_by:a?.id}),i},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["activities"]})}})}function x(){let e=(0,s.useQueryClient)(),{user:a}=(0,i.useAuth)();return(0,t.useMutation)({mutationFn:async e=>{let{data:t,error:s}=await r.supabase.from("leads").update({assigned_user_id:null,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return await r.supabase.from("activities").insert({entity_type:"lead",entity_id:e,activity_type:"note",title:"Priradenie zrušené",description:"Lead bol oddelený od obchodníka",created_by:a?.id}),t},onSuccess:()=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["activities"]})}})}function p(){let e=(0,s.useQueryClient)(),{user:a}=(0,i.useAuth)();return(0,t.useMutation)({mutationFn:async e=>{let{data:t,error:s}=await r.supabase.from("leads").select("*").eq("id",e).single();if(s)throw s;if(!t)throw Error("Lead not found");if(t.converted_to_client_id)throw Error("Tento lead už bol konvertovaný na klienta");if(t.email){let{data:e}=await r.supabase.from("clients").select("id, contact_name").eq("email",t.email).single();if(e)throw Error(`Klient s emailom ${t.email} už existuje`)}let{data:i,error:l}=await r.supabase.from("clients").insert({contact_name:t.contact_name,company_name:t.company_name,email:t.email,phone:t.phone,address:t.address,postal_code:t.postal_code,region_id:t.region_id,assigned_user_id:t.assigned_user_id,notes:t.notes,status:"active",converted_from_lead_id:t.id,created_by:a?.id}).select().single();if(l)throw console.error("Error creating client:",l),l;let{data:n,error:d}=await r.supabase.from("activities").select("*").eq("entity_type","lead").eq("entity_id",e);if(!d&&n&&n.length>0){let e=n.map(e=>({entity_type:"client",entity_id:i.id,activity_type:e.activity_type,title:e.title,description:e.description,created_by:e.created_by,created_at:e.created_at}));await r.supabase.from("activities").insert(e)}let{error:o}=await r.supabase.from("leads").update({converted_to_client_id:i.id,converted_at:new Date().toISOString(),status:"won",updated_at:new Date().toISOString()}).eq("id",e);return o&&console.error("Error updating lead:",o),await r.supabase.from("activities").insert({entity_type:"client",entity_id:i.id,activity_type:"note",title:"Klient vytvorený z leadu",description:`Klient bol \xfaspešne konvertovan\xfd z leadu "${t.contact_name}"`,created_by:a?.id}),{client:i,lead:t,activitiesCopied:n?.length||0}},onSuccess:a=>{e.invalidateQueries({queryKey:["leads"]}),e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["activities"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["recent-leads"]})},onError:e=>{console.error("Lead conversion error:",e)}})}e.s(["useAssignLead",()=>u,"useConvertLead",()=>p,"useCreateLead",()=>d,"useDeleteLead",()=>c,"useLead",()=>n,"useLeads",()=>l,"useUnassignLead",()=>x,"useUpdateLead",()=>o,"useUpdateLeadStatus",()=>m])},60914,e=>{"use strict";var a=e.i(66027),t=e.i(11795),s=e.i(57951);function r(){let{user:e}=(0,s.useAuth)();return(0,a.useQuery)({queryKey:["salespeople"],queryFn:async()=>{let a=t.supabase.from("profiles").select(`
          *,
          regions(id, name)
        `).eq("role","sales").eq("is_active",!0);e?.role==="manager"&&e.regionId&&(a=a.eq("region_id",e.regionId));let{data:s,error:r}=await a;if(r)throw r;return await Promise.all((s||[]).map(async e=>{let[a,s,r]=await Promise.all([t.supabase.from("leads").select("*",{count:"exact",head:!0}).eq("assigned_user_id",e.id),t.supabase.from("clients").select("*",{count:"exact",head:!0}).eq("assigned_user_id",e.id),t.supabase.from("quotes").select("*",{count:"exact",head:!0}).eq("created_by",e.id)]),i=a.count||0,l=s.count||0,n=i>0?Math.round(l/i*100):0;return{...e,role:"sales",region:e.regions,stats:{leads:i,clients:l,quotes:r.count||0,conversionRate:n,targetProgress:Math.min(100,Math.round(l/10*100))}}}))},enabled:!!e&&("admin"===e.role||"manager"===e.role||"správca"===e.role)})}e.s(["useSalespeople",()=>r])},30401,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(57951),r=e.i(60914),i=e.i(19455),l=e.i(55593),n=e.i(99676),d=e.i(15288),o=e.i(55436),c=e.i(79002),u=e.i(63488),m=e.i(43432),x=e.i(61911),p=e.i(23585),h=e.i(86536),y=e.i(55146),g=e.i(61353),f=e.i(76639),b=e.i(87486),j=e.i(46897),w=e.i(78583),N=e.i(25652);function v({salesperson:e,open:t,onOpenChange:s}){return e?(0,a.jsx)(f.Dialog,{open:t,onOpenChange:s,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[500px] border-border-dark bg-surface-dark text-white",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsx)(f.DialogTitle,{children:"Profil obchodníka"})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.Avatar,{className:"h-20 w-20 bg-primary/10",children:(0,a.jsx)(n.AvatarFallback,{className:"bg-primary/10 text-primary text-xl font-medium",children:e.full_name?.split(" ").map(e=>e[0]).join("").toUpperCase()||"?"})}),(0,a.jsx)("span",{className:`absolute bottom-0 right-0 h-4 w-4 rounded-full border-2 border-surface-dark ${e.is_active?"bg-green-500":"bg-gray-500"}`})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:e.full_name}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.region?.name||"Neurčený región"}),(0,a.jsx)(b.Badge,{variant:e.is_active?"default":"secondary",className:"mt-2",children:e.is_active?"Aktívny":"Neaktívny"})]})]}),(0,a.jsxs)("div",{className:"space-y-3 border-y border-border-dark py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,a.jsx)(u.Mail,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-white",children:e.email})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,a.jsx)(m.Phone,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-white",children:e.phone})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,a.jsx)(j.MapPin,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-white",children:e.region?.name||"Neurčený región"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[(0,a.jsx)(x.Users,{className:"h-5 w-5 text-primary mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-white",children:e.stats?.leads||0}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Leady"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[(0,a.jsx)(x.Users,{className:"h-5 w-5 text-green-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-white",children:e.stats?.clients||0}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Klienti"})]}),(0,a.jsxs)("div",{className:"text-center p-4 rounded-lg bg-white/5",children:[(0,a.jsx)(w.FileText,{className:"h-5 w-5 text-blue-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-white",children:e.stats?.quotes||0}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Ponuky"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-primary/5 border border-primary/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.TrendingUp,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:"Konverzná miera"})]}),(0,a.jsxs)("span",{className:"text-xl font-semibold text-primary",children:[e.stats?.conversionRate||0,"%"]})]})]})]})}):null}var _=e.i(2747),C=e.i(84774),k=e.i(67489),D=e.i(68499),S=e.i(97104),T=e.i(7486),q=e.i(7233),A=e.i(27612),M=e.i(46696);let K={new:"Nový",waiting:"Čakajúci",contacted:"Kontaktovaný",offer:"Ponuka",won:"Uzavretý",lost:"Stratený"},R={new:"secondary",waiting:"secondary",contacted:"secondary",offer:"default",won:"default",lost:"destructive"};function L({salespersonId:e,salespersonName:r,open:l,onOpenChange:n}){let{user:d}=(0,s.useAuth)(),o=d?.role==="admin"||d?.role==="manager"||d?.role==="správca",{data:c,isLoading:p}=(0,S.useLeads)(),h=(0,S.useAssignLead)(),y=(0,S.useUnassignLead)(),[g,j]=(0,t.useState)(!1),[w,N]=(0,t.useState)(""),[v,L]=(0,t.useState)(null),Q=c?.filter(a=>a.assigned_user_id===e)||[],P=c?.filter(e=>!e.assigned_user_id)||[],I=async()=>{if(e&&w)try{await h.mutateAsync({leadId:w,userId:e}),M.toast.success("Lead bol priradený"),j(!1),N("")}catch{M.toast.error("Nepodarilo sa priradiť lead")}},F=async()=>{if(v)try{await y.mutateAsync(v),M.toast.success("Priradenie zrušené"),L(null)}catch{M.toast.error("Nepodarilo sa zrušiť priradenie")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Dialog,{open:l,onOpenChange:n,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto border-border-dark bg-surface-dark text-white",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(f.DialogTitle,{children:["Leady - ",r]}),o&&P.length>0&&(0,a.jsxs)(i.Button,{size:"sm",onClick:()=>j(!0),children:[(0,a.jsx)(q.Plus,{className:"h-4 w-4 mr-2"}),"Priradiť lead"]})]})}),p?(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsx)(_.Skeleton,{className:"h-16 w-full bg-white/5"},e))}):0===Q.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(x.Users,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Žiadne priradené leady"}),o&&P.length>0&&(0,a.jsxs)(i.Button,{className:"mt-4",onClick:()=>j(!0),children:[(0,a.jsx)(q.Plus,{className:"h-4 w-4 mr-2"}),"Priradiť prvý lead"]})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Celkom ",Q.length," ",1===Q.length?"lead":Q.length<5?"leady":"leadov"]}),(0,a.jsxs)(C.Table,{children:[(0,a.jsx)(C.TableHeader,{children:(0,a.jsxs)(C.TableRow,{className:"border-border-dark hover:bg-transparent",children:[(0,a.jsx)(C.TableHead,{className:"text-gray-400",children:"Kontakt"}),(0,a.jsx)(C.TableHead,{className:"text-gray-400",children:"Informácie"}),(0,a.jsx)(C.TableHead,{className:"text-gray-400",children:"Status"}),o&&(0,a.jsx)(C.TableHead,{className:"w-12"})]})}),(0,a.jsx)(C.TableBody,{children:Q.map(e=>(0,a.jsxs)(C.TableRow,{className:"border-border-dark hover:bg-white/5 text-white",children:[(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.contact_name}),e.company_name&&(0,a.jsxs)("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,a.jsx)(T.Building2,{className:"h-3 w-3"}),e.company_name]})]})}),(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{className:"space-y-1 text-xs text-gray-400",children:[e.email&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Mail,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate max-w-[150px]",children:e.email})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Phone,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.phone})]})]})}),(0,a.jsx)(C.TableCell,{children:(0,a.jsx)(b.Badge,{variant:R[e.status],children:K[e.status]})}),o&&(0,a.jsx)(C.TableCell,{children:(0,a.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>L(e.id),className:"h-8 w-8 p-0",children:(0,a.jsx)(A.Trash2,{className:"h-4 w-4 text-gray-500 hover:text-red-500"})})})]},e.id))})]})]})]})}),(0,a.jsx)(f.Dialog,{open:g,onOpenChange:j,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[500px] border-border-dark bg-surface-dark text-white",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsxs)(f.DialogTitle,{children:["Priradiť lead pre ",r]})}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[0===P.length?(0,a.jsx)("p",{className:"text-sm text-gray-400 text-center py-8",children:"Žiadne nepriradené leady"}):(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)(k.Select,{value:w,onValueChange:N,children:[(0,a.jsx)(k.SelectTrigger,{className:"bg-white/5 border-border-dark text-white",children:(0,a.jsx)(k.SelectValue,{placeholder:"Vyberte lead"})}),(0,a.jsx)(k.SelectContent,{className:"bg-surface-dark border-border-dark text-white",children:P.map(e=>(0,a.jsx)(k.SelectItem,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-white",children:e.contact_name}),e.company_name&&(0,a.jsxs)("span",{className:"text-gray-400 text-xs text-white",children:[" (",e.company_name,")"]})]})},e.id))})]})}),(0,a.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>j(!1),className:"border-border-dark text-white hover:bg-white/5",children:"Zrušiť"}),(0,a.jsx)(i.Button,{onClick:I,disabled:!w||h.isPending,children:"Priradiť"})]})]})]})}),(0,a.jsx)(D.AlertDialog,{open:!!v,onOpenChange:()=>L(null),children:(0,a.jsxs)(D.AlertDialogContent,{className:"border-border-dark bg-surface-dark text-white",children:[(0,a.jsxs)(D.AlertDialogHeader,{children:[(0,a.jsx)(D.AlertDialogTitle,{children:"Zrušiť priradenie?"}),(0,a.jsx)(D.AlertDialogDescription,{className:"text-gray-400",children:"Naozaj chcete zrušiť priradenie tohto leadu? Lead zostane v systéme, ale nebude priradený žiadnemu obchodníkovi."})]}),(0,a.jsxs)(D.AlertDialogFooter,{children:[(0,a.jsx)(D.AlertDialogCancel,{className:"border-border-dark text-white hover:bg-white/5",children:"Zrušiť"}),(0,a.jsx)(D.AlertDialogAction,{onClick:F,className:"bg-red-500 hover:bg-red-600 text-white border-0",children:"Potvrdiť"})]})]})})]})}var Q=e.i(4049);let P={active:"Aktívny",inactive:"Neaktívny",prospect:"Potenciálny",completed:"Ukončené"},I={active:"success",inactive:"secondary",prospect:"info",completed:"completed"};function F({salespersonId:e,salespersonName:t,open:s,onOpenChange:r}){let{data:i,isLoading:l}=(0,Q.useClients)(),n=i?.filter(a=>a.assigned_user_id===e)||[];return(0,a.jsx)(f.Dialog,{open:s,onOpenChange:r,children:(0,a.jsxs)(f.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto border-border-dark bg-surface-dark text-white",children:[(0,a.jsx)(f.DialogHeader,{children:(0,a.jsxs)(f.DialogTitle,{children:["Klienti - ",t]})}),l?(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsx)(_.Skeleton,{className:"h-16 w-full bg-white/5"},e))}):0===n.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(x.Users,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Žiadni priradení klienti"})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Celkom ",n.length," ",1===n.length?"klient":n.length<5?"klienti":"klientov"]}),(0,a.jsxs)(C.Table,{children:[(0,a.jsx)(C.TableHeader,{children:(0,a.jsxs)(C.TableRow,{className:"border-border-dark hover:bg-transparent",children:[(0,a.jsx)(C.TableHead,{className:"text-gray-400",children:"Klient"}),(0,a.jsx)(C.TableHead,{className:"text-gray-400",children:"Kontakt"}),(0,a.jsx)(C.TableHead,{className:"text-gray-400",children:"Status"}),(0,a.jsx)(C.TableHead,{className:"text-right text-gray-400",children:"Hodnota"})]})}),(0,a.jsx)(C.TableBody,{children:n.map(e=>{let t;return(0,a.jsxs)(C.TableRow,{className:"border-border-dark hover:bg-white/5 text-white",children:[(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.contact_name}),e.company_name&&(0,a.jsxs)("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,a.jsx)(T.Building2,{className:"h-3 w-3"}),e.company_name]})]})}),(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{className:"space-y-1 text-xs text-gray-400",children:[e.email&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Mail,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate max-w-[150px]",children:e.email})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Phone,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.phone})]})]})}),(0,a.jsx)(C.TableCell,{children:(0,a.jsx)(b.Badge,{variant:I[e.status],children:P[e.status]})}),(0,a.jsx)(C.TableCell,{className:"text-right font-medium text-white",children:(t=e.total_value,new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}).format(t||0))})]},e.id)})})]})]})]})})}function H(){let{user:e}=(0,s.useAuth)(),{data:f,isLoading:b}=(0,r.useSalespeople)(),[j,w]=(0,t.useState)(""),[N,_]=(0,t.useState)(null),[C,k]=(0,t.useState)(!1),[D,S]=(0,t.useState)(!1),[T,q]=(0,t.useState)(!1),A=e?.role==="admin"||e?.role==="správca",M=f?.filter(e=>e.full_name?.toLowerCase().includes(j.toLowerCase())||e.email?.toLowerCase().includes(j.toLowerCase())||e.region?.name?.toLowerCase().includes(j.toLowerCase()))||[],K=e=>{_(e),S(!0)},R=e=>{_(e),q(!0)};return b?(0,a.jsx)(g.PageSkeleton,{}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Obchodníci"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Správa a štatistiky obchodných zástupcov"})]}),A&&(0,a.jsxs)(i.Button,{className:"w-full md:w-auto",children:[(0,a.jsx)(c.UserPlus,{className:"h-4 w-4 mr-2"}),"Pridať obchodníka"]})]}),(0,a.jsx)(d.Card,{className:"border-border-dark bg-surface-dark shadow-sm",children:(0,a.jsx)(d.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,a.jsx)(l.Input,{placeholder:"Hľadať podľa mena, emailu alebo regiónu...",className:"pl-10 bg-white/5 border-border-dark text-white placeholder:text-gray-500",value:j,onChange:e=>w(e.target.value)})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[M.map(e=>(0,a.jsxs)(d.Card,{className:"border-border-dark bg-surface-dark hover:shadow-md transition-all group",children:[(0,a.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.Avatar,{className:"h-12 w-12 border-2 border-primary/20 bg-primary/10",children:(0,a.jsx)(n.AvatarFallback,{className:"text-primary font-medium",children:e.full_name?.split(" ").map(e=>e[0]).join("").toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.CardTitle,{className:"text-lg text-white",children:e.full_name}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:e.region?.name||"Všetky regióny"})]})]}),(0,a.jsxs)(y.DropdownMenu,{children:[(0,a.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-white",children:(0,a.jsx)(p.MoreVertical,{className:"h-4 w-4"})})}),(0,a.jsxs)(y.DropdownMenuContent,{align:"end",className:"border-border-dark bg-surface-dark text-white",children:[(0,a.jsxs)(y.DropdownMenuItem,{onClick:()=>{_(e),k(!0)},className:"focus:bg-white/5 focus:text-white cursor-pointer",children:[(0,a.jsx)(h.Eye,{className:"h-4 w-4 mr-2"})," Detail profilu"]}),(0,a.jsxs)(y.DropdownMenuItem,{onClick:()=>K(e),className:"focus:bg-white/5 focus:text-white cursor-pointer",children:[(0,a.jsx)(x.Users,{className:"h-4 w-4 mr-2"})," Zobraziť leady"]}),(0,a.jsxs)(y.DropdownMenuItem,{onClick:()=>R(e),className:"focus:bg-white/5 focus:text-white cursor-pointer",children:[(0,a.jsx)(x.Users,{className:"h-4 w-4 mr-2"})," Zobraziť klientov"]})]})]})]}),(0,a.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,a.jsx)(u.Mail,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{className:"truncate",children:e.email})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,a.jsx)(m.Phone,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:e.phone})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 pt-2 border-t border-border-dark",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-white",children:e.stats?.leads||0}),(0,a.jsx)("p",{className:"text-[10px] uppercase tracking-wider text-gray-500",children:"Leady"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-white",children:e.stats?.clients||0}),(0,a.jsx)("p",{className:"text-[10px] uppercase tracking-wider text-gray-500",children:"Klienti"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-white",children:[e.stats?.conversionRate||0,"%"]}),(0,a.jsx)("p",{className:"text-[10px] uppercase tracking-wider text-gray-500",children:"Rate"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"flex-1 text-xs border-border-dark text-gray-300 hover:bg-white/5",onClick:()=>K(e),children:"Leady"}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",className:"flex-1 text-xs border-border-dark text-gray-300 hover:bg-white/5",onClick:()=>R(e),children:"Klienti"})]})]})]},e.id)),0===M.length&&(0,a.jsxs)("div",{className:"col-span-full py-12 text-center",children:[(0,a.jsx)(x.Users,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Nenašli sa žiadni obchodníci"})]})]}),(0,a.jsx)(v,{salesperson:N,open:C,onOpenChange:k}),(0,a.jsx)(L,{salespersonId:N?.id,salespersonName:N?.full_name||"",open:D,onOpenChange:S}),(0,a.jsx)(F,{salespersonId:N?.id,salespersonName:N?.full_name||"",open:T,onOpenChange:q})]})}e.s(["default",()=>H],30401)}]);
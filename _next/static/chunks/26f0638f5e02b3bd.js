(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10160,e=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.s(["default",()=>t])},68499,e=>{"use strict";let t;var a=e.i(43476),s=e.i(71645),r=e.i(20783),n=e.i(26999),i=e.i(81140),l=Symbol("radix.slottable"),o="AlertDialog",[d,c]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>s.createContext(e));return function(a){let r=a?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return n.scopeName=e,[function(t,n){let i=s.createContext(n),l=r.length;r=[...r,n];let o=t=>{let{scope:r,children:n,...o}=t,d=r?.[e]?.[l]||i,c=s.useMemo(()=>o,Object.values(o));return(0,a.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(a,r){let o=r?.[e]?.[l]||i,d=s.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}(n,...t)]}(o,[n.createDialogScope]),u=(0,n.createDialogScope)(),m=e=>{let{__scopeAlertDialog:t,...s}=e,r=u(t);return(0,a.jsx)(n.Root,{...r,...s,modal:!0})};m.displayName=o,s.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,a.jsx)(n.Trigger,{...i,...r,ref:t})}).displayName="AlertDialogTrigger";var p=e=>{let{__scopeAlertDialog:t,...s}=e,r=u(t);return(0,a.jsx)(n.Portal,{...r,...s})};p.displayName="AlertDialogPortal";var x=s.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,a.jsx)(n.Overlay,{...i,...r,ref:t})});x.displayName="AlertDialogOverlay";var f="AlertDialogContent",[h,y]=d(f),g=((t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e})).displayName="AlertDialogContent.Slottable",t.__radixId=l,t),v=s.forwardRef((e,t)=>{let{__scopeAlertDialog:l,children:o,...d}=e,c=u(l),m=s.useRef(null),p=(0,r.useComposedRefs)(t,m),x=s.useRef(null);return(0,a.jsx)(n.WarningProvider,{contentName:f,titleName:j,docsSlug:"alert-dialog",children:(0,a.jsx)(h,{scope:l,cancelRef:x,children:(0,a.jsxs)(n.Content,{role:"alertdialog",...c,...d,ref:p,onOpenAutoFocus:(0,i.composeEventHandlers)(d.onOpenAutoFocus,e=>{e.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(g,{children:o}),(0,a.jsx)(D,{contentRef:m})]})})})});v.displayName=f;var j="AlertDialogTitle",b=s.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,a.jsx)(n.Title,{...i,...r,ref:t})});b.displayName=j;var w="AlertDialogDescription",N=s.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,a.jsx)(n.Description,{...i,...r,ref:t})});N.displayName=w;var _=s.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...r}=e,i=u(s);return(0,a.jsx)(n.Close,{...i,...r,ref:t})});_.displayName="AlertDialogAction";var C="AlertDialogCancel",k=s.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...i}=e,{cancelRef:l}=y(C,s),o=u(s),d=(0,r.useComposedRefs)(t,l);return(0,a.jsx)(n.Close,{...o,...i,ref:d})});k.displayName=C;var D=({contentRef:e})=>{let t=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${w}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},q=e.i(75157),S=e.i(19455);let T=s.forwardRef(({className:e,...t},s)=>(0,a.jsx)(x,{className:(0,q.cn)("fixed inset-0 z-50 bg-black/90 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));T.displayName=x.displayName;let R=s.forwardRef(({className:e,...t},s)=>(0,a.jsxs)(p,{children:[(0,a.jsx)(T,{}),(0,a.jsx)(v,{ref:s,className:(0,q.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));R.displayName=v.displayName;let I=({className:e,...t})=>(0,a.jsx)("div",{className:(0,q.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});I.displayName="AlertDialogHeader";let F=({className:e,...t})=>(0,a.jsx)("div",{className:(0,q.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});F.displayName="AlertDialogFooter";let M=s.forwardRef(({className:e,...t},s)=>(0,a.jsx)(b,{ref:s,className:(0,q.cn)("text-lg font-semibold",e),...t}));M.displayName=b.displayName;let P=s.forwardRef(({className:e,...t},s)=>(0,a.jsx)(N,{ref:s,className:(0,q.cn)("text-sm text-muted-foreground",e),...t}));P.displayName=N.displayName;let A=s.forwardRef(({className:e,...t},s)=>(0,a.jsx)(_,{ref:s,className:(0,q.cn)((0,S.buttonVariants)(),e),...t}));A.displayName=_.displayName;let Q=s.forwardRef(({className:e,...t},s)=>(0,a.jsx)(k,{ref:s,className:(0,q.cn)((0,S.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Q.displayName=k.displayName,e.s(["AlertDialog",()=>m,"AlertDialogAction",()=>A,"AlertDialogCancel",()=>Q,"AlertDialogContent",()=>R,"AlertDialogDescription",()=>P,"AlertDialogFooter",()=>F,"AlertDialogHeader",()=>I,"AlertDialogTitle",()=>M],68499)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},2335,e=>{"use strict";var t=e.i(71645);function a(e,a){let[s,r]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let t=setTimeout(()=>{r(e)},a);return()=>{clearTimeout(t)}},[e,a]),s}e.s(["useDebounce",()=>a])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},84774,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})}));r.displayName="Table";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",e),...a}));n.displayName="TableHeader";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a}));i.displayName="TableBody",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...a}));l.displayName="TableRow";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableHead";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));d.displayName="TableCell",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>i,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>n,"TableRow",()=>l])},44141,e=>{"use strict";var t=e.i(66027),a=e.i(54616),s=e.i(12598),r=e.i(11795),n=e.i(57951);function i(){return(0,t.useQuery)({queryKey:["inventory-categories"],queryFn:async()=>{let{data:e,error:t}=await r.supabase.from("inventory_categories").select("*").order("name");if(t)throw t;return e}})}function l(e){let{user:a}=(0,n.useAuth)();return(0,t.useQuery)({queryKey:["inventory",e],queryFn:async()=>{try{let t=r.supabase.from("inventory_items").select(`
            *,
            category:inventory_categories(id, name)
          `).order("name");e?.categoryId&&(t=t.eq("category_id",e.categoryId)),e?.search&&(t=t.or(`name.ilike.%${e.search}%,sku.ilike.%${e.search}%`));let{data:a,error:s}=await t;if(s)throw console.error("[Supabase Query Error] fetching inventory_items:",s),s;let n=a;return e?.lowStock&&(n=n.filter(e=>(e.qty_available||0)-(e.qty_reserved||0)<(e.min_stock||0))),n}catch(e){throw console.error("[React Query Error] fetching inventory_items:",e),e}},enabled:!!a,staleTime:3e5})}function o(e){return(0,t.useQuery)({queryKey:["inventory",e],queryFn:async()=>{let{data:t,error:a}=await r.supabase.from("inventory_items").select(`
          *,
          category:inventory_categories(id, name)
        `).eq("id",e).single();if(a)throw a;return t},enabled:!!e})}function d(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{data:t,error:a}=await r.supabase.from("inventory_items").insert({name:e.name,sku:e.sku,category_id:e.category_id,qty_available:e.qty_available||0,qty_reserved:0,min_stock:e.min_stock||0,purchase_price:e.purchase_price,sale_price:e.sale_price,notes:e.notes}).select().single();if(a)throw a;return t},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory"]})}})}function c(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async({id:e,...t})=>{let{data:a,error:s}=await r.supabase.from("inventory_items").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return a},onSuccess:t=>{e.invalidateQueries({queryKey:["inventory"]}),e.invalidateQueries({queryKey:["inventory",t.id]})}})}function u(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async({id:e,forceDelete:t=!1})=>{let{error:a}=await r.supabase.from("inventory_items").delete().eq("id",e);if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory"]}),e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["invoices"]})}})}function m(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async({itemId:e,adjustment:t})=>{let{data:a,error:s}=await r.supabase.from("inventory_items").select("qty_available").eq("id",e).single();if(s)throw s;let n=Math.max(0,(a.qty_available||0)+t),{data:i,error:l}=await r.supabase.from("inventory_items").update({qty_available:n,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(l)throw l;return i},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory"]})}})}e.s(["useAdjustStock",()=>m,"useCreateInventoryItem",()=>d,"useDeleteInventoryItem",()=>u,"useInventoryCategories",()=>i,"useInventoryItem",()=>o,"useInventoryItems",()=>l,"useUpdateInventoryItem",()=>c])},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(48425),r=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var n=e.i(25913),i=e.i(75157);let l=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(r,{ref:s,className:(0,i.cn)(l(),e),...a}));o.displayName=r.displayName,e.s(["Label",()=>o],10204)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},2747,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...s})}e.s(["Skeleton",()=>s])},55593,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,type:a,value:r,...n},i)=>{let l=Number.isNaN(r)?"":r;return(0,t.jsx)("input",{type:a,value:l,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...n})});r.displayName="Input",e.s(["Input",()=>r])},76639,26999,e=>{"use strict";let t,a;var s,r=e.i(43476),n=e.i(71645),i=e.i(81140),l=e.i(20783),o=e.i(10772),d=e.i(69340),c=e.i(26330),u=e.i(65491),m=e.i(74606),p=e.i(96626);function x(e){var t;let a,s=(t=e,(a=n.forwardRef((e,t)=>{let{children:a,...s}=e;if(n.isValidElement(a)){var r;let e,i,o=(r=a,(i=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.ref:(i=(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.props.ref:r.props.ref||r.ref),d=function(e,t){let a={...t};for(let s in t){let r=e[s],n=t[s];/^on[A-Z]/.test(s)?r&&n?a[s]=(...e)=>{let t=n(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...n}:"className"===s&&(a[s]=[r,n].filter(Boolean).join(" "))}return{...e,...a}}(s,a.props);return a.type!==n.Fragment&&(d.ref=t?(0,l.composeRefs)(t,o):o),n.cloneElement(a,d)}return n.Children.count(a)>1?n.Children.only(null):null})).displayName=`${t}.SlotClone`,a),i=n.forwardRef((e,t)=>{let{children:a,...i}=e,l=n.Children.toArray(a),o=l.find(h);if(o){let e=o.props.children,a=l.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,r.jsx)(s,{...i,ref:t,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,r.jsx)(s,{...i,ref:t,children:a})});return i.displayName=`${e}.Slot`,i}e.i(74080);var f=Symbol("radix.slottable");function h(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}var y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=x(`Primitive.${t}`),s=n.forwardRef((e,s)=>{let{asChild:n,...i}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(n?a:t,{...i,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),g=e.i(3536),v=e.i(85369),j=e.i(86312),b="Dialog",[w,N]=function(e,t=[]){let a=[],s=()=>{let t=a.map(e=>n.createContext(e));return function(a){let s=a?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return s.scopeName=e,[function(t,s){let i=n.createContext(s),l=a.length;a=[...a,s];let o=t=>{let{scope:a,children:s,...o}=t,d=a?.[e]?.[l]||i,c=n.useMemo(()=>o,Object.values(o));return(0,r.jsx)(d.Provider,{value:c,children:s})};return o.displayName=t+"Provider",[o,function(a,r){let o=r?.[e]?.[l]||i,d=n.useContext(o);if(d)return d;if(void 0!==s)return s;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(s,...t)]}(b),[_,C]=w(b),k=e=>{let{__scopeDialog:t,children:a,open:s,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,u=n.useRef(null),m=n.useRef(null),[p,x]=(0,d.useControllableState)({prop:s,defaultProp:i??!1,onChange:l,caller:b});return(0,r.jsx)(_,{scope:t,triggerRef:u,contentRef:m,contentId:(0,o.useId)(),titleId:(0,o.useId)(),descriptionId:(0,o.useId)(),open:p,onOpenChange:x,onOpenToggle:n.useCallback(()=>x(e=>!e),[x]),modal:c,children:a})};k.displayName=b;var D="DialogTrigger",q=n.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,n=C(D,a),o=(0,l.useComposedRefs)(t,n.triggerRef);return(0,r.jsx)(y.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Z(n.open),...s,ref:o,onClick:(0,i.composeEventHandlers)(e.onClick,n.onOpenToggle)})});q.displayName=D;var S="DialogPortal",[T,R]=w(S,{forceMount:void 0}),I=e=>{let{__scopeDialog:t,forceMount:a,children:s,container:i}=e,l=C(S,t);return(0,r.jsx)(T,{scope:t,forceMount:a,children:n.Children.map(s,e=>(0,r.jsx)(p.Presence,{present:a||l.open,children:(0,r.jsx)(m.Portal,{asChild:!0,container:i,children:e})}))})};I.displayName=S;var F="DialogOverlay",M=n.forwardRef((e,t)=>{let a=R(F,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,i=C(F,e.__scopeDialog);return i.modal?(0,r.jsx)(p.Presence,{present:s||i.open,children:(0,r.jsx)(A,{...n,ref:t})}):null});M.displayName=F;var P=x("DialogOverlay.RemoveScroll"),A=n.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,n=C(F,a);return(0,r.jsx)(v.RemoveScroll,{as:P,allowPinchZoom:!0,shards:[n.contentRef],children:(0,r.jsx)(y.div,{"data-state":Z(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Q="DialogContent",E=n.forwardRef((e,t)=>{let a=R(Q,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,i=C(Q,e.__scopeDialog);return(0,r.jsx)(p.Presence,{present:s||i.open,children:i.modal?(0,r.jsx)(O,{...n,ref:t}):(0,r.jsx)(H,{...n,ref:t})})});E.displayName=Q;var O=n.forwardRef((e,t)=>{let a=C(Q,e.__scopeDialog),s=n.useRef(null),o=(0,l.useComposedRefs)(t,a.contentRef,s);return n.useEffect(()=>{let e=s.current;if(e)return(0,j.hideOthers)(e)},[]),(0,r.jsx)(z,{...e,ref:o,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,i.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,i.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),H=n.forwardRef((e,t)=>{let a=C(Q,e.__scopeDialog),s=n.useRef(!1),i=n.useRef(!1);return(0,r.jsx)(z,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),z=n.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,...d}=e,m=C(Q,a),p=n.useRef(null),x=(0,l.useComposedRefs)(t,p);return(0,g.useFocusGuards)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:o,children:(0,r.jsx)(c.DismissableLayer,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":Z(m.open),...d,ref:x,onDismiss:()=>m.onOpenChange(!1)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J,{titleId:m.titleId}),(0,r.jsx)(X,{contentRef:p,descriptionId:m.descriptionId})]})]})}),K="DialogTitle",V=n.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,n=C(K,a);return(0,r.jsx)(y.h2,{id:n.titleId,...s,ref:t})});V.displayName=K;var $="DialogDescription",L=n.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,n=C($,a);return(0,r.jsx)(y.p,{id:n.descriptionId,...s,ref:t})});L.displayName=$;var B="DialogClose",U=n.forwardRef((e,t)=>{let{__scopeDialog:a,...s}=e,n=C(B,a);return(0,r.jsx)(y.button,{type:"button",...s,ref:t,onClick:(0,i.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})});function Z(e){return e?"open":"closed"}U.displayName=B;var W="DialogTitleWarning",[Y,G]=(s={contentName:Q,titleName:K,docsSlug:"dialog"},t=n.createContext(s),(a=e=>{let{children:a,...s}=e,i=n.useMemo(()=>s,Object.values(s));return(0,r.jsx)(t.Provider,{value:i,children:a})}).displayName=W+"Provider",[a,function(e){let a=n.useContext(t);if(a)return a;if(void 0!==s)return s;throw Error(`\`${e}\` must be used within \`${W}\``)}]),J=({titleId:e})=>{let t=G(W),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return n.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},X=({contentRef:e,descriptionId:t})=>{let a=G("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return n.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null};e.s(["Close",()=>U,"Content",()=>E,"Description",()=>L,"Overlay",()=>M,"Portal",()=>I,"Root",()=>k,"Title",()=>V,"Trigger",()=>q,"WarningProvider",()=>Y,"createDialogScope",()=>N],26999);let ee=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var et=e.i(75157);let ea=n.forwardRef(({className:e,...t},a)=>(0,r.jsx)(M,{ref:a,className:(0,et.cn)("fixed inset-0 z-50 bg-black/90 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ea.displayName=M.displayName;let es=n.forwardRef(({className:e,children:t,...a},s)=>(0,r.jsxs)(I,{children:[(0,r.jsx)(ea,{}),(0,r.jsxs)(E,{ref:s,className:(0,et.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(U,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,r.jsx)(ee,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));es.displayName=E.displayName;let er=({className:e,...t})=>(0,r.jsx)("div",{className:(0,et.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});er.displayName="DialogHeader";let en=({className:e,...t})=>(0,r.jsx)("div",{className:(0,et.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});en.displayName="DialogFooter";let ei=n.forwardRef(({className:e,...t},a)=>(0,r.jsx)(V,{ref:a,className:(0,et.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));ei.displayName=V.displayName;let el=n.forwardRef(({className:e,...t},a)=>(0,r.jsx)(L,{ref:a,className:(0,et.cn)("text-sm text-muted-foreground",e),...t}));el.displayName=L.displayName,e.s(["Dialog",()=>k,"DialogContent",()=>es,"DialogDescription",()=>el,"DialogFooter",()=>en,"DialogHeader",()=>er,"DialogTitle",()=>ei,"DialogTrigger",()=>q],76639)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},65268,21557,e=>{"use strict";var t=e.i(66027),a=e.i(54616),s=e.i(12598),r=e.i(11795),n=e.i(57951);function i(e){let{user:a}=(0,n.useAuth)();return(0,t.useQuery)({queryKey:["quotes",e],queryFn:async()=>{console.log("Fetching quotes from Supabase...");let t=r.supabase.from("quotes").select(`
          *,
          client:clients(id, contact_name, company_name)
        `).order("created_at",{ascending:!1});e?.status&&(t=t.eq("status",e.status)),e?.clientId&&(t=t.eq("client_id",e.clientId)),e?.search&&(t=t.or(`quote_number.ilike.%${e.search}%`));let{data:a,error:s}=await t;if(console.log("Quotes fetch result:",{data:a,error:s}),s)throw console.error("Error fetching quotes:",s),s;return a},enabled:!!a})}function l(e){return(0,t.useQuery)({queryKey:["quotes",e],queryFn:async()=>{let{data:t,error:a}=await r.supabase.from("quotes").select(`
                  *,
                  client:clients(id, contact_name, company_name, email, phone, address),
                  items:quote_items(*)
                `).eq("id",e).single();if(a)throw a;return t},enabled:!!e})}async function o(){try{let{data:e,error:t}=await r.supabase.rpc("get_next_quote_number");if(t){console.error("Error generating quote number:",t);let e=new Date().getFullYear();return`CP-${e}-${Date.now().toString().slice(-4)}`}return e}catch(t){console.error("Exception generating quote number:",t);let e=new Date().getFullYear();return`CP-${e}-${Date.now().toString().slice(-4)}`}}function d(){let e=(0,s.useQueryClient)(),{user:t}=(0,n.useAuth)();return(0,a.useMutation)({mutationFn:async e=>{let a=e.items.reduce((e,t)=>e+t.quantity*t.unit_price,0),s=e.discount||0,n=e.shipping||0,i=Math.max(0,a-s+n),l=.2*i,d=await o(),{data:c,error:u}=await r.supabase.from("quotes").insert({quote_number:d,client_id:e.client_id,status:"draft",valid_until:e.valid_until,subtotal:a,discount:s,shipping:n,tax_rate:20,tax_amount:l,total:i+l,notes:e.notes,created_by:t?.id}).select().single();if(u)throw u;let m=e.items.map(e=>({quote_id:c.id,description:e.description,quantity:e.quantity,unit_price:e.unit_price,total:e.quantity*e.unit_price,inventory_item_id:e.inventory_item_id})),{error:p}=await r.supabase.from("quote_items").insert(m);if(p)throw p;for(let t of e.items.filter(e=>e.inventory_item_id)){let{error:a}=await r.supabase.from("reservations").insert({inventory_item_id:t.inventory_item_id,quote_id:c.id,client_id:e.client_id,quantity:t.quantity,status:"active"});if(a)throw console.error("Error creating reservation:",a),Error("Failed to create inventory reservation");let{data:s,error:n}=await r.supabase.from("inventory_items").select("qty_reserved").eq("id",t.inventory_item_id).single();if(n)throw console.error("Error fetching inventory:",n),Error("Failed to fetch inventory data");let{error:i}=await r.supabase.from("inventory_items").update({qty_reserved:(s.qty_reserved||0)+t.quantity,updated_at:new Date().toISOString()}).eq("id",t.inventory_item_id);if(i)throw console.error("Error updating inventory:",i),Error("Failed to update inventory reservation")}return c},onSuccess:()=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["inventory"]})}})}function c(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async({quoteId:e,status:t})=>{if("rejected"===t){let{data:t,error:a}=await r.supabase.from("reservations").select("*").eq("quote_id",e);if(!a&&t){for(let e of t){let{data:t,error:a}=await r.supabase.from("inventory_items").select("qty_reserved").eq("id",e.inventory_item_id).single();!a&&t&&await r.supabase.from("inventory_items").update({qty_reserved:Math.max(0,(t.qty_reserved||0)-e.quantity),updated_at:new Date().toISOString()}).eq("id",e.inventory_item_id)}await r.supabase.from("reservations").update({status:"cancelled"}).eq("quote_id",e)}}let{data:a,error:s}=await r.supabase.from("quotes").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return a},onSuccess:()=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["inventory"]})}})}function u(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{error:t}=await r.supabase.from("invoices").update({quote_id:null}).eq("quote_id",e);if(t)throw console.error("Error updating invoices:",t),t;let{data:a,error:s}=await r.supabase.from("reservations").select("*").eq("quote_id",e);if(s)console.error("Error fetching reservations:",s);else if(a){for(let e of a){let{data:t,error:a}=await r.supabase.from("inventory_items").select("qty_reserved").eq("id",e.inventory_item_id).single();!a&&t&&await r.supabase.from("inventory_items").update({qty_reserved:Math.max(0,(t.qty_reserved||0)-e.quantity),updated_at:new Date().toISOString()}).eq("id",e.inventory_item_id)}await r.supabase.from("reservations").delete().eq("quote_id",e)}await r.supabase.from("quote_items").delete().eq("quote_id",e);let{error:n}=await r.supabase.from("quotes").delete().eq("id",e);if(n)throw n},onSuccess:()=>{e.invalidateQueries({queryKey:["quotes"]}),e.invalidateQueries({queryKey:["inventory"]}),e.invalidateQueries({queryKey:["invoices"]})}})}e.s(["useCreateQuote",()=>d,"useDeleteQuote",()=>u,"useQuote",()=>l,"useQuotes",()=>i,"useUpdateQuoteStatus",()=>c],65268);let m=(0,e.i(75254).default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);e.s(["Calculator",()=>m],21557)},41071,e=>{"use strict";let t=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],41071)},31278,17521,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t],17521),e.s(["Loader2",()=>t],31278)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},40803,e=>{"use strict";var t=e.i(43476),a=e.i(19455),s=e.i(75157);function r({icon:e,title:r,description:n,action:i,size:l="lg",className:o}){return(0,t.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center text-center animate-fade-in","sm"===l?"py-8":"md"===l?"py-12":"py-16",o),children:[(0,t.jsx)("div",{className:(0,s.cn)("rounded-2xl border-2 border-[hsl(35,30%,70%)] bg-[hsl(35,20%,85%)] mb-4 flex items-center justify-center","sm"===l?"p-3":"md"===l?"p-4":"p-5"),children:(0,t.jsx)("div",{className:(0,s.cn)("sm"===l?"h-8 w-8":"md"===l?"h-12 w-12":"h-16 w-16","text-[hsl(30,35%,45%)]"),children:e})}),(0,t.jsx)("h3",{className:(0,s.cn)("font-display font-semibold text-foreground mb-2","sm"===l?"text-base":"md"===l?"text-lg":"text-xl"),children:r}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground max-w-md mb-6",children:n}),i&&(0,t.jsxs)(a.Button,{onClick:i.onClick,className:"gap-2",children:[i.icon,i.label]})]})}e.s(["EmptyState",()=>r])},4049,e=>{"use strict";var t=e.i(66027),a=e.i(54616),s=e.i(12598),r=e.i(11795),n=e.i(57951);function i(e){let{user:a}=(0,n.useAuth)();return(0,t.useQuery)({queryKey:["clients",e],queryFn:async()=>{let t=[];console.log("useClients: fetching",{filters:e});let{data:a,error:s}=await r.supabase.from("clients").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching clients:",s),s;if(console.log("useClients: fetched",a),t=a,e?.status&&(t=t.filter(t=>t.status===e.status)),e?.regionId&&(t=t.filter(t=>t.region_id===e.regionId)),e?.assignedUserId&&(t=t.filter(t=>t.assigned_user_id===e.assignedUserId)),e?.search){let a=e.search.toLowerCase();t=t.filter(e=>e.contact_name?.toLowerCase().includes(a)||e.email?.toLowerCase().includes(a)||e.company_name?.toLowerCase().includes(a))}return t},enabled:!!a,staleTime:3e5,retry:2,refetchOnWindowFocus:!1})}function l(){let e=(0,s.useQueryClient)(),{user:t}=(0,n.useAuth)();return(0,a.useMutation)({mutationFn:async e=>{let{data:a,error:s}=await r.supabase.from("clients").insert({contact_name:e.contact_name,company_name:e.company_name,email:e.email,phone:e.phone,address:e.address,postal_code:e.postal_code,region_id:e.region_id,status:e.status||"prospect",notes:e.notes,assigned_user_id:e.assigned_user_id||t?.id,lead_origin_id:e.lead_origin_id,created_by:t?.id}).select().single();if(s)throw s;return a},onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}function o(){let e=(0,s.useQueryClient)(),{user:t}=(0,n.useAuth)();return(0,a.useMutation)({mutationFn:async({id:e,...a})=>{let{data:s}=await r.supabase.from("clients").select("assigned_user_id,contact_name,company_name").eq("id",e).single(),{data:n,error:i}=await r.supabase.from("clients").update({...a,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return a.assigned_user_id&&s?.assigned_user_id!==a.assigned_user_id&&a.assigned_user_id!==t?.id&&await r.supabase.from("notifications").insert({user_id:a.assigned_user_id,type:"new_client",title:"Nový klient priradený",message:`Klient ${s?.contact_name||s?.company_name||"bol"} v\xe1m bol priraden\xfd`,entity_type:"client",entity_id:e}),n},onSuccess:t=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["clients",t.id]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}function d(){let e=(0,s.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{let{error:t}=await r.supabase.from("clients").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e.invalidateQueries({queryKey:["clients"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})}e.s(["useClients",()=>i,"useCreateClient",()=>l,"useDeleteClient",()=>d,"useUpdateClient",()=>o])},81914,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(65268),r=e.i(4049),n=e.i(44141),i=e.i(19455),l=e.i(55593),o=e.i(10204),d=e.i(24687),c=e.i(76639),u=e.i(67489),m=e.i(84774),p=e.i(7233),x=e.i(27612),f=e.i(31278),h=e.i(21557),y=e.i(46696);function g({open:e,onOpenChange:v,defaultClientId:j}={}){let[b,w]=(0,a.useState)(!1),N=void 0!==e?e:b,_=e=>{v?v(e):w(e)},[C,k]=(0,a.useState)(""),[D,q]=(0,a.useState)(""),[S,T]=(0,a.useState)(""),[R,I]=(0,a.useState)([]),[F,M]=(0,a.useState)(0),[P,A]=(0,a.useState)(0),[Q,E]=(0,a.useState)("custom"),[O,H]=(0,a.useState)(""),[z,K]=(0,a.useState)(1),[V,$]=(0,a.useState)(0),L=(0,s.useCreateQuote)(),{data:B=[]}=(0,r.useClients)(),{data:U=[]}=(0,n.useInventoryItems)();(0,a.useMemo)(()=>{j&&B.length>0&&B.find(e=>e.id===j)&&k(j)},[j,B,N]),(0,a.useMemo)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("leadId"),a=e.get("action");if(t&&"new"===a&&B.length>0){let e=B.find(e=>e.lead_origin_id===t);e&&(k(e.id),_(!0))}},[B]);let Z=(0,a.useMemo)(()=>R.reduce((e,t)=>e+t.quantity*t.unit_price,0),[R]),W=Math.max(0,Z-F+P),Y=.2*W,G=W+Y,J=async()=>{if(!C)return void y.toast.error("Vyberte klienta");if(0===R.length)return void y.toast.error("Pridajte aspoň jednu položku");try{await L.mutateAsync({client_id:C,valid_until:D||void 0,notes:S||void 0,discount:F,shipping:P,items:R.map(e=>({description:e.description,quantity:e.quantity,unit_price:e.unit_price,inventory_item_id:e.inventory_item_id}))}),y.toast.success("Cenová ponuka vytvorená"),_(!1),k(""),q(""),T(""),I([]),M(0),A(0),window.history.replaceState({},"",window.location.pathname)}catch(e){console.error("Create quote error:",e),y.toast.error(e.message||"Nepodarilo sa vytvoriť cenovú ponuku"),e.details&&y.toast.error(e.details)}};return(0,t.jsx)(c.Dialog,{open:N,onOpenChange:_,children:(0,t.jsxs)(c.DialogContent,{className:"max-w-[95vw] sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(c.DialogHeader,{children:(0,t.jsx)(c.DialogTitle,{children:"Vytvoriť cenovú ponuku"})}),(0,t.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Klient *"}),(0,t.jsxs)(u.Select,{value:C,onValueChange:k,children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Vyberte klienta"})}),(0,t.jsx)(u.SelectContent,{children:B.map(e=>(0,t.jsxs)(u.SelectItem,{value:e.id,children:[e.contact_name," ",e.company_name?`(${e.company_name})`:""]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Platnosť do"}),(0,t.jsx)(l.Input,{type:"date",value:D,onChange:e=>q(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-4 border rounded-lg p-4 bg-muted/20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[(0,t.jsx)(h.Calculator,{className:"h-4 w-4"}),"Položky ponuky"]}),R.length>0&&(0,t.jsxs)(m.Table,{children:[(0,t.jsx)(m.TableHeader,{children:(0,t.jsxs)(m.TableRow,{children:[(0,t.jsx)(m.TableHead,{children:"Popis"}),(0,t.jsx)(m.TableHead,{className:"w-[100px] text-right",children:"Množstvo"}),(0,t.jsx)(m.TableHead,{className:"w-[120px] text-right",children:"Cena/ks"}),(0,t.jsx)(m.TableHead,{className:"w-[120px] text-right",children:"Spolu"}),(0,t.jsx)(m.TableHead,{className:"w-[50px]"})]})}),(0,t.jsx)(m.TableBody,{children:R.map(e=>(0,t.jsxs)(m.TableRow,{children:[(0,t.jsx)(m.TableCell,{children:e.description}),(0,t.jsx)(m.TableCell,{className:"text-right",children:e.quantity}),(0,t.jsxs)(m.TableCell,{className:"text-right",children:[e.unit_price.toFixed(2)," €"]}),(0,t.jsxs)(m.TableCell,{className:"text-right",children:[(e.quantity*e.unit_price).toFixed(2)," €"]}),(0,t.jsx)(m.TableCell,{children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon-sm",onClick:()=>{var t;return t=e.id,void I(R.filter(e=>e.id!==t))},children:(0,t.jsx)(x.Trash2,{className:"h-4 w-4 text-muted-foreground hover:text-destructive"})})})]},e.id))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-card p-3 rounded border",children:[(0,t.jsxs)("div",{className:"md:col-span-3 space-y-2",children:[(0,t.jsx)(o.Label,{className:"text-xs",children:"Predloha (Sklad)"}),(0,t.jsxs)(u.Select,{value:Q,onValueChange:e=>{if(E(e),"custom"===e)H(""),$(0);else{let t=U.find(t=>t.id===e);t&&(H(t.name),$(t.sale_price||0))}},children:[(0,t.jsx)(u.SelectTrigger,{className:"h-8",children:(0,t.jsx)(u.SelectValue,{placeholder:"Vlastná položka"})}),(0,t.jsxs)(u.SelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"custom",children:"Vlastná položka"}),U.map(e=>(0,t.jsxs)(u.SelectItem,{value:e.id,children:[e.name," (",e.qty_available," ks)"]},e.id))]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-4 space-y-2",children:[(0,t.jsx)(o.Label,{className:"text-xs",children:"Popis *"}),(0,t.jsx)(l.Input,{className:"h-8",value:O,onChange:e=>H(e.target.value),placeholder:"Názov položky alebo služby"})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(o.Label,{className:"text-xs",children:"Množstvo *"}),(0,t.jsx)(l.Input,{type:"number",className:"h-8",min:"1",value:z,onChange:e=>K(parseInt(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)(o.Label,{className:"text-xs",children:"Cena/ks (€)"}),(0,t.jsx)(l.Input,{type:"number",className:"h-8",min:"0",step:"0.01",value:V,onChange:e=>$(parseFloat(e.target.value)||0)})]}),(0,t.jsx)("div",{className:"md:col-span-1",children:(0,t.jsx)(i.Button,{size:"sm",className:"w-full h-8",onClick:()=>{O?z<=0?y.toast.error("Množstvo musí byť väčšie ako 0"):(I([...R,{id:Math.random().toString(36).substr(2,9),description:O,quantity:z,unit_price:V,inventory_item_id:"custom"===Q?void 0:Q}]),E("custom"),H(""),K(1),$(0)):y.toast.error("Popis položky je povinný")},children:(0,t.jsx)(p.Plus,{className:"h-4 w-4"})})})]}),(0,t.jsxs)("div",{className:"grid gap-4 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"flex justify-end gap-4 items-center",children:[(0,t.jsx)(o.Label,{className:"w-24 text-right",children:"Zľava (€)"}),(0,t.jsx)(l.Input,{type:"number",className:"w-32 h-8 text-right",min:"0",step:"0.01",value:F,onChange:e=>M(parseFloat(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 items-center",children:[(0,t.jsx)(o.Label,{className:"w-24 text-right",children:"Doprava (€)"}),(0,t.jsx)(l.Input,{type:"number",className:"w-32 h-8 text-right",min:"0",step:"0.01",value:P,onChange:e=>A(parseFloat(e.target.value)||0)})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-8 pt-2 mt-2 border-t border-dashed",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Základ"}),(0,t.jsxs)("p",{className:"font-medium",children:[Z.toFixed(2)," €"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upravený základ"}),(0,t.jsxs)("p",{className:"font-medium text-foreground",children:[(Z-F+P).toFixed(2)," €"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"DPH (20%)"}),(0,t.jsxs)("p",{className:"font-medium",children:[Y.toFixed(2)," €"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Spolu s DPH"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-primary",children:[G.toFixed(2)," €"]})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Poznámka"}),(0,t.jsx)(d.Textarea,{placeholder:"Interná poznámka k ponuke...",value:S,onChange:e=>T(e.target.value)})]})]}),(0,t.jsxs)(c.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>_(!1),children:"Zrušiť"}),(0,t.jsx)(i.Button,{onClick:J,disabled:L.isPending,children:L.isPending?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Vytváram..."]}):"Vytvoriť ponuku"})]})]})})}e.s(["CreateQuoteDialog",()=>g])},60772,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81914),r=e.i(76639),n=e.i(84774),i=e.i(87486),l=e.i(2747),o=e.i(65268),d=e.i(6700),c=e.i(19455),u=e.i(40160);let m={draft:"Návrh",sent:"Odoslaná",accepted:"Prijatá",rejected:"Zamietnutá"},p={draft:"secondary",sent:"info",accepted:"success",rejected:"destructive"};function x({quoteId:e,open:a,onOpenChange:s}){let{data:x,isLoading:f}=(0,o.useQuote)(e||"");console.log("QuoteDetailDialog render:",{quoteId:e,quote:x,isLoading:f});let h=e=>new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}).format(e);return(0,t.jsx)(r.Dialog,{open:a,onOpenChange:s,children:(0,t.jsxs)(r.DialogContent,{className:"max-w-[95vw] sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsx)(r.DialogTitle,{className:"flex items-center gap-3",children:f?(0,t.jsx)(l.Skeleton,{className:"h-6 w-32"}):x?(0,t.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{children:["Cenová ponuka ",x?.quote_number]}),x&&(0,t.jsx)(i.Badge,{variant:p[x.status],children:m[x.status]})]}),(0,t.jsxs)(c.Button,{size:"sm",variant:"outline",onClick:()=>(0,d.generateQuotePDF)(x),children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Stiahnuť PDF"]})]}):(0,t.jsx)("span",{children:"Detail ponuky"})})}),f?(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsx)(l.Skeleton,{className:"h-20 w-full"}),(0,t.jsx)(l.Skeleton,{className:"h-40 w-full"}),(0,t.jsx)(l.Skeleton,{className:"h-20 w-40 ml-auto"})]}):x?(0,t.jsxs)("div",{className:"space-y-8 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-8 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-muted-foreground mb-1",children:"Klient"}),(0,t.jsx)("div",{className:"font-medium text-lg",children:x.client?.contact_name}),x.client?.company_name&&(0,t.jsx)("div",{className:"text-muted-foreground",children:x.client.company_name}),(0,t.jsxs)("div",{className:"text-muted-foreground mt-1",children:[x.client?.email&&(0,t.jsx)("div",{children:x.client.email}),x.client?.phone&&(0,t.jsx)("div",{children:x.client.phone}),x.client?.address&&(0,t.jsxs)("div",{children:[x.client.address,", ",x.client?.postal_code]})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-muted-foreground",children:"Vytvorené"}),(0,t.jsx)("div",{children:new Date(x.created_at).toLocaleDateString("sk-SK")})]}),x.valid_until&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-muted-foreground",children:"Platnosť do"}),(0,t.jsx)("div",{children:new Date(x.valid_until).toLocaleDateString("sk-SK")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-muted-foreground",children:"Vytvoril"}),(0,t.jsx)("div",{children:x.created_by_user?.full_name||"Neznámy užívateľ"})]})]})})]}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{className:"bg-muted/50",children:[(0,t.jsx)(n.TableHead,{children:"Položka"}),(0,t.jsx)(n.TableHead,{className:"text-right",children:"Množstvo"}),(0,t.jsx)(n.TableHead,{className:"text-right",children:"Cena/ks"}),(0,t.jsx)(n.TableHead,{className:"text-right",children:"Spolu"})]})}),(0,t.jsxs)(n.TableBody,{children:[x.items?.map(e=>(0,t.jsxs)(n.TableRow,{children:[(0,t.jsx)(n.TableCell,{className:"font-medium",children:e.description}),(0,t.jsxs)(n.TableCell,{className:"text-right",children:[e.quantity," ks"]}),(0,t.jsx)(n.TableCell,{className:"text-right",children:h(e.unit_price)}),(0,t.jsx)(n.TableCell,{className:"text-right",children:h(e.total)})]},e.id)),(!x.items||0===x.items.length)&&(0,t.jsx)(n.TableRow,{children:(0,t.jsx)(n.TableCell,{colSpan:4,className:"text-center text-muted-foreground py-4",children:"Žiadne položky"})})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2 border-t pt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between w-full max-w-[300px] text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"Základ (bez DPH):"}),(0,t.jsx)("span",{children:h(x.subtotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between w-full max-w-[300px] text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["DPH (",x.tax_rate,"%):"]}),(0,t.jsx)("span",{children:h(x.tax_amount)})]}),(0,t.jsxs)("div",{className:"flex justify-between w-full max-w-[300px] text-lg font-bold text-primary mt-2 border-t border-dashed pt-2",children:[(0,t.jsx)("span",{children:"Spolu:"}),(0,t.jsx)("span",{children:h(x.total)})]})]}),x.notes&&(0,t.jsxs)("div",{className:"bg-muted/30 p-4 rounded-lg text-sm",children:[(0,t.jsx)("h4",{className:"font-semibold mb-1",children:"Poznámka"}),(0,t.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:x.notes})]})]}):(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Cenová ponuka sa nenašla"})]})})}var f=e.i(68499),h=e.i(78894);function y({open:e,onOpenChange:a,quoteNumber:s,onConfirm:r,isDeleting:n=!1}){return(0,t.jsx)(f.AlertDialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(f.AlertDialogContent,{children:[(0,t.jsxs)(f.AlertDialogHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:(0,t.jsx)(h.AlertTriangle,{className:"h-6 w-6 text-destructive"})}),(0,t.jsx)(f.AlertDialogTitle,{children:"Vymazať cenovú ponuku"})]}),(0,t.jsxs)(f.AlertDialogDescription,{className:"text-left pt-4",children:["Naozaj chcete vymazať cenovú ponuku ",(0,t.jsxs)("strong",{className:"text-foreground",children:['"',s,'"']}),"?",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"Táto akcia je nevratná a ponuka bude trvalo odstránená vrátane všetkých položiek a rezervácií."]})]}),(0,t.jsxs)(f.AlertDialogFooter,{children:[(0,t.jsx)(f.AlertDialogCancel,{disabled:n,children:"Zrušiť"}),(0,t.jsx)(f.AlertDialogAction,{onClick:e=>{e.preventDefault(),r()},disabled:n,className:"bg-destructive hover:bg-destructive/90",children:n?"Vymazávam...":"Vymazať"})]})]})})}var g=e.i(55593),v=e.i(15288),j=e.i(40803),b=e.i(67489),w=e.i(7233),N=e.i(55436),_=e.i(78583),C=e.i(41071),k=e.i(86536),D=e.i(27612),q=e.i(55146),S=e.i(52169),T=e.i(2335),R=e.i(11795),I=e.i(46696);let F={draft:"Návrh",sent:"Odoslaná",accepted:"Prijatá",rejected:"Zamietnutá"},M={draft:"secondary",sent:"info",accepted:"success",rejected:"destructive"};function P(){let[e,r]=(0,a.useState)(""),m=(0,T.useDebounce)(e,500),[p,f]=(0,a.useState)("all"),[h,P]=(0,a.useState)(null),[A,Q]=(0,a.useState)(!1),[E,O]=(0,a.useState)(!1),[H,z]=(0,a.useState)(null),{data:K,isLoading:V,isError:$,error:L}=(0,o.useQuotes)(),B=(0,o.useUpdateQuoteStatus)(),U=(0,S.useCreateInvoiceFromQuote)(),Z=(0,o.useDeleteQuote)();(0,a.useEffect)(()=>{$&&(console.error("Error loading quotes:",L),I.toast.error("Nepodarilo sa načítať cenové ponuky"))},[$,L]);let W=e=>new Intl.NumberFormat("sk-SK",{style:"currency",currency:"EUR"}).format(e),Y=(0,a.useMemo)(()=>K?K.filter(e=>{if("all"!==p&&e.status!==p)return!1;if(m){let t=m.toLowerCase();return e.quote_number.toLowerCase().includes(t)||(e.client?.contact_name||"").toLowerCase().includes(t)||(e.client?.company_name||"").toLowerCase().includes(t)}return!0}):[],[K,p,m]),G=Y?.reduce((e,t)=>e+t.total,0)||0,J=Y?.filter(e=>"accepted"===e.status).reduce((e,t)=>e+t.total,0)||0,X=Y?.length?Math.round(Y.filter(e=>"accepted"===e.status).length/Y.length*100):0,ee=async(e,t)=>{try{await B.mutateAsync({quoteId:e,status:t}),I.toast.success("Status ponuky aktualizovaný")}catch(e){I.toast.error("Nepodarilo sa aktualizovať status")}},et=async e=>{try{await U.mutateAsync(e),I.toast.success("Faktúra vytvorená")}catch(e){I.toast.error("Nepodarilo sa vytvoriť faktúru")}},ea=async e=>{try{let t=(0,R.createClient)(),{data:a,error:s}=await t.from("quotes").select(`
          *,
          client:clients(id, contact_name, company_name, email, phone, address),
          items:quote_items(*)
        `).eq("id",e.id).single();if(s)throw s;a&&((0,d.generateQuotePDF)(a),I.toast.success("PDF vygenerované"))}catch(e){console.error("Error generating PDF:",e),I.toast.error("Nepodarilo sa vygenerovať PDF")}},es=async()=>{if(H)try{await Z.mutateAsync(H.id),I.toast.success("Cenová ponuka vymazaná"),z(null)}catch(t){console.error("Delete quote error:",t);let e=t?.message||"Nepodarilo sa vymazať ponuku";I.toast.error(e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-1 gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(N.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(g.Input,{placeholder:"Hľadať podľa čísla, klienta...",value:e,onChange:e=>r(e.target.value),className:"pl-9"})]}),(0,t.jsxs)(b.Select,{value:p,onValueChange:f,children:[(0,t.jsx)(b.SelectTrigger,{className:"w-40",children:(0,t.jsx)(b.SelectValue,{placeholder:"Status"})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"all",children:"Všetky statusy"}),Object.entries(F).map(([e,a])=>(0,t.jsx)(b.SelectItem,{value:e,children:a},e))]})]})]}),(0,t.jsxs)(c.Button,{onClick:()=>O(!0),children:[(0,t.jsx)(w.Plus,{className:"mr-2 h-4 w-4"})," Nová ponuka"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mt-6",children:[(0,t.jsx)(v.Card,{className:"shadow-soft",children:(0,t.jsx)(v.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Celkom ponúk"}),V?(0,t.jsx)(l.Skeleton,{className:"h-8 w-16 mt-1"}):(0,t.jsx)("p",{className:"text-2xl font-semibold",children:Y?.length||0})]}),(0,t.jsx)(_.FileText,{className:"h-8 w-8 text-muted-foreground/50"})]})})}),(0,t.jsx)(v.Card,{className:"shadow-soft",children:(0,t.jsx)(v.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Celková hodnota"}),V?(0,t.jsx)(l.Skeleton,{className:"h-8 w-24 mt-1"}):(0,t.jsx)("p",{className:"text-2xl font-semibold",children:W(G)})]})})}),(0,t.jsx)(v.Card,{className:"shadow-soft",children:(0,t.jsx)(v.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Prijaté ponuky"}),V?(0,t.jsx)(l.Skeleton,{className:"h-8 w-24 mt-1"}):(0,t.jsx)("p",{className:"text-2xl font-semibold text-success",children:W(J)})]})})}),(0,t.jsx)(v.Card,{className:"shadow-soft",children:(0,t.jsx)(v.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Úspešnosť"}),V?(0,t.jsx)(l.Skeleton,{className:"h-8 w-16 mt-1"}):(0,t.jsxs)("p",{className:"text-2xl font-semibold",children:[X,"%"]})]})})})]}),(0,t.jsx)(v.Card,{className:"shadow-soft mt-6",children:(0,t.jsx)(v.CardContent,{className:"p-0",children:(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{children:(0,t.jsxs)(n.TableRow,{children:[(0,t.jsx)(n.TableHead,{children:"Číslo"}),(0,t.jsx)(n.TableHead,{children:"Klient"}),(0,t.jsx)(n.TableHead,{children:"Status"}),(0,t.jsx)(n.TableHead,{className:"text-right",children:"Suma"}),(0,t.jsx)(n.TableHead,{children:"Platnosť do"}),(0,t.jsx)(n.TableHead,{children:"Vytvoril"}),(0,t.jsx)(n.TableHead,{className:"w-12"})]})}),(0,t.jsx)(n.TableBody,{children:V?Array.from({length:5}).map((e,a)=>(0,t.jsxs)(n.TableRow,{children:[(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Skeleton,{className:"h-5 w-24"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Skeleton,{className:"h-5 w-32"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Skeleton,{className:"h-5 w-20"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Skeleton,{className:"h-5 w-20"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Skeleton,{className:"h-5 w-24"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Skeleton,{className:"h-5 w-28"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(l.Skeleton,{className:"h-5 w-8"})})]},a)):$?(0,t.jsx)(n.TableRow,{children:(0,t.jsx)(n.TableCell,{colSpan:7,className:"text-center py-8 text-destructive",children:"Nepodarilo sa načítať dáta. Skúste obnoviť stránku."})}):Y?.length===0?(0,t.jsx)(n.TableRow,{children:(0,t.jsx)(n.TableCell,{colSpan:7,className:"p-0",children:(0,t.jsx)(j.EmptyState,{icon:(0,t.jsx)(_.FileText,{className:"h-full w-full"}),title:e?"Nenašli sa žiadne výsledky":"Zatiaľ žiadne cenové ponuky",description:e?`Pre v\xfdraz "${e}" sme nenašli žiadnu zhodu.`:"Vytvorte cenovú ponuku pre klienta a začnite predávať.",action:{label:"Vytvoriť ponuku",onClick:()=>O(!0),icon:(0,t.jsx)(w.Plus,{className:"h-4 w-4"})}})})}):Y?.map(e=>(0,t.jsxs)(n.TableRow,{className:"cursor-pointer hover:bg-muted/50",children:[(0,t.jsx)(n.TableCell,{children:(0,t.jsx)("span",{className:"font-medium text-foreground",children:e.quote_number})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.client?.contact_name||"-"}),e.client?.company_name&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.client.company_name})]})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(i.Badge,{variant:M[e.status],children:F[e.status]})}),(0,t.jsx)(n.TableCell,{className:"text-right font-medium",children:W(e.total)}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.valid_until?new Date(e.valid_until).toLocaleDateString("sk-SK"):"-"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:e.created_by_user?.full_name||"-"})}),(0,t.jsx)(n.TableCell,{children:(0,t.jsxs)(q.DropdownMenu,{children:[(0,t.jsx)(q.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"icon-sm",children:(0,t.jsx)(C.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(q.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(q.DropdownMenuItem,{onSelect:t=>{t.preventDefault(),P(e.id),Q(!0)},children:[(0,t.jsx)(k.Eye,{className:"h-4 w-4 mr-2"}),"Zobraziť"]}),(0,t.jsxs)(q.DropdownMenuItem,{onClick:()=>ea(e),children:[(0,t.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Stiahnuť PDF"]}),"draft"===e.status&&(0,t.jsx)(q.DropdownMenuItem,{onClick:()=>ee(e.id,"sent"),children:"Odoslať klientovi"}),"sent"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.DropdownMenuItem,{onClick:()=>ee(e.id,"accepted"),children:"Označiť ako prijatú"}),(0,t.jsx)(q.DropdownMenuItem,{onClick:()=>ee(e.id,"rejected"),children:"Označiť ako zamietnutú"})]}),"accepted"===e.status&&(0,t.jsx)(q.DropdownMenuItem,{onClick:()=>et(e.id),children:"Vytvoriť faktúru"}),(0,t.jsx)(q.DropdownMenuItem,{children:"Duplikovať"}),(0,t.jsxs)(q.DropdownMenuItem,{className:"text-destructive",onClick:()=>z({id:e.id,number:e.quote_number}),children:[(0,t.jsx)(D.Trash2,{className:"h-4 w-4 mr-2"}),"Vymazať"]})]})]})})]},e.id))})]})})}),(0,t.jsx)(s.CreateQuoteDialog,{open:E,onOpenChange:O}),(0,t.jsx)(x,{quoteId:h,open:A,onOpenChange:Q}),(0,t.jsx)(y,{open:!!H,onOpenChange:e=>!e&&z(null),quoteNumber:H?.number||"",onConfirm:es,isDeleting:Z.isPending})]})}e.s(["QuotesClientView",()=>P],60772)},13708,e=>{e.n(e.i(60772))},48503,e=>{e.v(t=>Promise.all(["static/chunks/adabfc2d4bff09a9.js"].map(t=>e.l(t))).then(()=>t(15833)))},70653,e=>{e.v(t=>Promise.all(["static/chunks/049ce48f7172c019.js"].map(t=>e.l(t))).then(()=>t(24154)))},95111,e=>{e.v(t=>Promise.all(["static/chunks/6407f2194df4bf9f.js"].map(t=>e.l(t))).then(()=>t(38201)))}]);
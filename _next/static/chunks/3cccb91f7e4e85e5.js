(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52114,e=>{"use strict";let t;var r,a,l,n,s,i,o,d,c,u,h,m,f,p,x,g,b,v,y,j=e.i(43476),w=e.i(71645),k=e.i(18566),N=e=>e instanceof Date,S=e=>null==e,_=e=>!S(e)&&!Array.isArray(e)&&"object"==typeof e&&!N(e),D="u">typeof window&&void 0!==window.HTMLElement&&"u">typeof document;function C(e){let t;if(e instanceof Date)return new Date(e);let r="u">typeof FileList&&e instanceof FileList;if(D&&(e instanceof Blob||r))return e;let a=Array.isArray(e);if(!a&&!(_(e)&&_(t=e.constructor&&e.constructor.prototype)&&t.hasOwnProperty("isPrototypeOf")))return e;let l=a?[]:Object.create(Object.getPrototypeOf(e));for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(l[t]=C(e[t]));return l}var E=e=>void 0===e,V=e=>Array.isArray(e)?e.filter(Boolean):[],F=e=>V(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,t,r)=>{if(!t||!_(e))return r;let a=(/^\w*$/.test(t)?[t]:F(t)).reduce((e,t)=>S(e)?e:e[t],e);return E(a)||a===e?E(e[t])?r:e[t]:a},z=e=>"function"==typeof e,M=(e,t,r)=>{let a=-1,l=/^\w*$/.test(t)?[t]:F(t),n=l.length,s=n-1;for(;++a<n;){let t=l[a],n=r;if(a!==s){let r=e[t];n=_(r)||Array.isArray(r)?r:isNaN(+l[a+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=n,e=e[t]}};let L="onChange",O="onSubmit",R="maxLength",T="minLength",I="pattern",P="required";w.default.createContext(null).displayName="HookFormControlContext";let B="u">typeof window?w.default.useLayoutEffect:w.default.useEffect;var U=e=>"string"==typeof e,K=e=>S(e)||"object"!=typeof e;function q(e,t,r=new WeakSet){if(K(e)||K(t))return Object.is(e,t);if(N(e)&&N(t))return Object.is(e.getTime(),t.getTime());let a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;if(r.has(e)||r.has(t))return!0;for(let n of(r.add(e),r.add(t),a)){let a=e[n];if(!l.includes(n))return!1;if("ref"!==n){let e=t[n];if(N(a)&&N(e)||_(a)&&_(e)||Array.isArray(a)&&Array.isArray(e)?!q(a,e,r):!Object.is(a,e))return!1}}return!0}w.default.createContext(null).displayName="HookFormContext";var W=(e,t,r,a,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:l||!0}}:{},$=e=>Array.isArray(e)?e:[e],H=()=>{let e=[];return{get observers(){return e},next:t=>{for(let r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},X=e=>_(e)&&!Object.keys(e).length,Y=e=>{if(!D)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Z=e=>Y(e)&&e.isConnected;function J(e,t){let r=Array.isArray(t)?t:/^\w*$/.test(t)?[t]:F(t),a=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,a=0;for(;a<r;)e=E(e)?a++:e[t[a++]];return e}(e,r),l=r.length-1,n=r[l];return a&&delete a[n],0!==l&&(_(a)&&X(a)||Array.isArray(a)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!E(e[t]))return!1;return!0}(a))&&J(e,r.slice(0,-1)),e}function G(e){return Array.isArray(e)||_(e)&&!(e=>{for(let t in e)if(z(e[t]))return!0;return!1})(e)}function Q(e,t={}){for(let r in e){let a=e[r];G(a)?(t[r]=Array.isArray(a)?[]:{},Q(a,t[r])):E(a)||(t[r]=!0)}return t}function ee(e,t,r){for(let a in r||(r=Q(t)),e){let l=e[a];if(G(l))E(t)||K(r[a])?r[a]=Q(l,Array.isArray(l)?[]:{}):ee(l,S(t)?{}:t[a],r[a]);else{let e=t[a];r[a]=!q(l,e)}}return r}let et={value:!1,isValid:!1},er={value:!0,isValid:!0};var ea=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!E(e[0].attributes.value)?E(e[0].value)||""===e[0].value?er:{value:e[0].value,isValid:!0}:er:et}return et},el=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>E(e)?e:t?""===e?NaN:e?+e:e:r&&U(e)?new Date(e):a?a(e):e;let en={isValid:!1,value:null};var es=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,en):en;function ei(e){let t=e.ref;return"file"===t.type?t.files:"radio"===t.type?es(e.refs).value:"select-multiple"===t.type?[...t.selectedOptions].map(({value:e})=>e):"checkbox"===t.type?ea(e.refs).value:el(E(t.value)?e.ref.value:t.value,e)}var eo=e=>E(e)?e:e instanceof RegExp?e.source:_(e)?e.value instanceof RegExp?e.value.source:e.value:e,ed=e=>({isOnSubmit:!e||e===O,isOnBlur:"onBlur"===e,isOnChange:e===L,isOnAll:"all"===e,isOnTouch:"onTouched"===e});let ec="AsyncFunction";var eu=e=>!!e&&!!e.validate&&!!(z(e.validate)&&e.validate.constructor.name===ec||_(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===ec)),eh=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let em=(e,t,r,a)=>{for(let l of r||Object.keys(e)){let r=A(e,l);if(r){let{_f:e,...n}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],l)&&!a)return!0;else if(e.ref&&t(e.ref,e.name)&&!a)return!0;else if(em(n,t))break}else if(_(n)&&em(n,t))break}}};function ef(e,t,r){let a=A(e,r);if(a||/^\w*$/.test(r))return{error:a,name:r};let l=r.split(".");for(;l.length;){let a=l.join("."),n=A(t,a),s=A(e,a);if(n&&!Array.isArray(n)&&r!==a)break;if(s&&s.type)return{name:a,error:s};if(s&&s.root&&s.root.type)return{name:`${a}.root`,error:s.root};l.pop()}return{name:r}}var ep=(e,t,r)=>{let a=$(A(e,r));return M(a,"root",t[r]),M(e,r,a),e};function ex(e,t,r="validate"){if(U(e)||Array.isArray(e)&&e.every(U)||"boolean"==typeof e&&!e)return{type:r,message:U(e)?e:"",ref:t}}var eg=e=>!_(e)||e instanceof RegExp?{value:e,message:""}:e,eb=async(e,t,r,a,l,n)=>{let{ref:s,refs:i,required:o,maxLength:d,minLength:c,min:u,max:h,pattern:m,validate:f,name:p,valueAsNumber:x,mount:g}=e._f,b=A(r,p);if(!g||t.has(p))return{};let v=i?i[0]:s,y=e=>{l&&v.reportValidity&&(v.setCustomValidity("boolean"==typeof e?"":e||""),v.reportValidity())},j={},w="radio"===s.type,k="checkbox"===s.type,N=(x||"file"===s.type)&&E(s.value)&&E(b)||Y(s)&&""===s.value||""===b||Array.isArray(b)&&!b.length,D=W.bind(null,p,a,j),C=(e,t,r,a=R,l=T)=>{let n=e?t:r;j[p]={type:e?a:l,message:n,ref:s,...D(e?a:l,n)}};if(n?!Array.isArray(b)||!b.length:o&&(!(w||k)&&(N||S(b))||"boolean"==typeof b&&!b||k&&!ea(i).isValid||w&&!es(i).isValid)){let{value:e,message:t}=U(o)?{value:!!o,message:o}:eg(o);if(e&&(j[p]={type:P,message:t,ref:v,...D(P,t)},!a))return y(t),j}if(!N&&(!S(u)||!S(h))){let e,t,r=eg(h),l=eg(u);if(S(b)||isNaN(b)){let a=s.valueAsDate||new Date(b),n=e=>new Date(new Date().toDateString()+" "+e),i="time"==s.type,o="week"==s.type;U(r.value)&&b&&(e=i?n(b)>n(r.value):o?b>r.value:a>new Date(r.value)),U(l.value)&&b&&(t=i?n(b)<n(l.value):o?b<l.value:a<new Date(l.value))}else{let a=s.valueAsNumber||(b?+b:b);S(r.value)||(e=a>r.value),S(l.value)||(t=a<l.value)}if((e||t)&&(C(!!e,r.message,l.message,"max","min"),!a))return y(j[p].message),j}if((d||c)&&!N&&(U(b)||n&&Array.isArray(b))){let e=eg(d),t=eg(c),r=!S(e.value)&&b.length>+e.value,l=!S(t.value)&&b.length<+t.value;if((r||l)&&(C(r,e.message,t.message),!a))return y(j[p].message),j}if(m&&!N&&U(b)){let{value:e,message:t}=eg(m);if(e instanceof RegExp&&!b.match(e)&&(j[p]={type:I,message:t,ref:s,...D(I,t)},!a))return y(t),j}if(f){if(z(f)){let e=ex(await f(b,r),v);if(e&&(j[p]={...e,...D("validate",e.message)},!a))return y(e.message),j}else if(_(f)){let e={};for(let t in f){if(!X(e)&&!a)break;let l=ex(await f[t](b,r),v,t);l&&(e={...l,...D(t,l.message)},y(l.message),a&&(j[p]=e))}if(!X(e)&&(j[p]={ref:v,...e},!a))return j}}return y(!0),j};let ev={mode:O,reValidateMode:L,shouldFocusError:!0};function ey(e={}){let t=w.default.useRef(void 0),r=w.default.useRef(void 0),[a,l]=w.default.useState({isDirty:!1,isValidating:!1,isLoading:z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:z(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!z(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{let{formControl:r,...l}=function(e={}){let t,r={...ev,...e},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:z(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},l={},n=(_(r.defaultValues)||_(r.values))&&C(r.defaultValues||r.values)||{},s=r.shouldUnregister?{}:C(n),i={action:!1,mount:!1,watch:!1,keepIsValid:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={...c},h={...u},m={array:H(),state:H()},f="all"===r.criteriaMode,p=async e=>{if(!i.keepIsValid&&!r.disabled&&(u.isValid||h.isValid||e)){let e;r.resolver?(e=X((await v()).errors),x()):e=await j(l,!0),e!==a.isValid&&m.state.next({isValid:e})}},x=(e,t)=>{!r.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((e||Array.from(o.mount)).forEach(e=>{e&&(t?M(a.validatingFields,e,t):J(a.validatingFields,e))}),m.state.next({validatingFields:a.validatingFields,isValidating:!X(a.validatingFields)}))},g=(e,t,r,a)=>{let o=A(l,e);if(o){let l=A(s,e,E(r)?A(n,e):r);E(l)||a&&a.defaultChecked||t?M(s,e,t?l:ei(o._f)):F(e,l),i.mount&&!i.action&&p()}},b=(e,t,l,s,i)=>{let o=!1,d=!1,c={name:e};if(!r.disabled){if(!l||s){(u.isDirty||h.isDirty)&&(d=a.isDirty,a.isDirty=c.isDirty=w(),o=d!==c.isDirty);let r=q(A(n,e),t);d=!!A(a.dirtyFields,e),r?J(a.dirtyFields,e):M(a.dirtyFields,e,!0),c.dirtyFields=a.dirtyFields,o=o||(u.dirtyFields||h.dirtyFields)&&!r!==d}if(l){let t=A(a.touchedFields,e);t||(M(a.touchedFields,e,l),c.touchedFields=a.touchedFields,o=o||(u.touchedFields||h.touchedFields)&&t!==l)}o&&i&&m.state.next(c)}return o?c:{}},v=async e=>(x(e,!0),await r.resolver(s,r.context,((e,t,r,a)=>{let l={};for(let r of e){let e=A(t,r);e&&M(l,r,e._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:a}})(e||o.mount,l,r.criteriaMode,r.shouldUseNativeValidation))),y=async e=>{let{errors:t}=await v(e);if(x(e),e)for(let r of e){let e=A(t,r);e?M(a.errors,r,e):J(a.errors,r)}else a.errors=t;return t},j=async(t,l,n={valid:!0})=>{for(let i in t){let d=t[i];if(d){let{_f:t,...i}=d;if(t){let i=o.array.has(t.name),c=d._f&&eu(d._f);c&&u.validatingFields&&x([t.name],!0);let h=await eb(d,o.disabled,s,f,r.shouldUseNativeValidation&&!l,i);if(c&&u.validatingFields&&x([t.name]),h[t.name]&&(n.valid=!1,l||e.shouldUseNativeValidation))break;l||(A(h,t.name)?i?ep(a.errors,h,t.name):M(a.errors,t.name,h[t.name]):J(a.errors,t.name))}X(i)||await j(i,l,n)}}return n.valid},w=(e,t)=>!r.disabled&&(e&&t&&M(s,e,t),!q(P(),n)),k=(e,t,r)=>{var a,l;return a=o,l={...i.mount?s:E(t)?n:U(e)?{[e]:t}:t},U(e)?(r&&a.watch.add(e),A(l,e,t)):Array.isArray(e)?e.map(e=>(r&&a.watch.add(e),A(l,e))):(r&&(a.watchAll=!0),l)},F=(e,t,r={})=>{let a=A(l,e),n=t;if(a){let r=a._f;r&&(r.disabled||M(s,e,el(t,r)),n=Y(r.ref)&&S(t)?"":t,"select-multiple"===r.ref.type?[...r.ref.options].forEach(e=>e.selected=n.includes(e.value)):r.refs?"checkbox"===r.ref.type?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(n)?e.checked=!!n.find(t=>t===e.value):e.checked=n===e.value||!!n)}):r.refs.forEach(e=>e.checked=e.value===n):"file"===r.ref.type?r.ref.value="":(r.ref.value=n,r.ref.type||m.state.next({name:e,values:C(s)})))}(r.shouldDirty||r.shouldTouch)&&b(e,n,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&I(e)},L=(e,t,r)=>{for(let a in t){if(!t.hasOwnProperty(a))return;let n=t[a],s=e+"."+a,i=A(l,s);(o.array.has(e)||_(n)||i&&!i._f)&&!N(n)?L(s,n,r):F(s,n,r)}},O=(e,t,r={})=>{let d=A(l,e),c=o.array.has(e),f=C(t);M(s,e,f),c?(m.array.next({name:e,values:C(s)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&r.shouldDirty&&m.state.next({name:e,dirtyFields:ee(n,s),isDirty:w(e,f)})):!d||d._f||S(f)?F(e,f,r):L(e,f,r),eh(e,o)?m.state.next({...a,name:e,values:C(s)}):m.state.next({name:i.mount?e:void 0,values:C(s)})},R=async e=>{i.mount=!0;let n=e.target,c=n.name,g=!0,y=A(l,c),w=e=>{g=Number.isNaN(e)||N(e)&&isNaN(e.getTime())||q(e,A(s,c,e))},k=ed(r.mode),S=ed(r.reValidateMode);if(y){let i,N,T,P,B=n.type?ei(y._f):_(i=e)&&i.target?"checkbox"===i.target.type?i.target.checked:i.target.value:i,U="blur"===e.type||"focusout"===e.type,K=!((P=y._f).mount&&(P.required||P.min||P.max||P.maxLength||P.minLength||P.pattern||P.validate))&&!r.resolver&&!A(a.errors,c)&&!y._f.deps||(D=U,E=A(a.touchedFields,c),V=a.isSubmitted,F=S,!(z=k).isOnAll&&(!V&&z.isOnTouch?!(E||D):(V?F.isOnBlur:z.isOnBlur)?!D:(V?!F.isOnChange:!z.isOnChange)||D)),W=eh(c,o,U);M(s,c,B),U?n&&n.readOnly||(y._f.onBlur&&y._f.onBlur(e),t&&t(0)):y._f.onChange&&y._f.onChange(e);let $=b(c,B,U),H=!X($)||W;if(U||m.state.next({name:c,type:e.type,values:C(s)}),K)return(u.isValid||h.isValid)&&("onBlur"===r.mode?U&&p():U||p()),H&&m.state.next({name:c,...W?{}:$});if(!U&&W&&m.state.next({...a}),r.resolver){let{errors:e}=await v([c]);if(x([c]),w(B),g){let t=ef(a.errors,l,c),r=ef(e,l,t.name||c);N=r.error,c=r.name,T=X(e)}}else x([c],!0),N=(await eb(y,o.disabled,s,f,r.shouldUseNativeValidation))[c],x([c]),w(B),g&&(N?T=!1:(u.isValid||h.isValid)&&(T=await j(l,!0)));if(g){y._f.deps&&(!Array.isArray(y._f.deps)||y._f.deps.length>0)&&I(y._f.deps);var D,E,V,F,z,L=c,O=T,R=N;let e=A(a.errors,L),l=(u.isValid||h.isValid)&&"boolean"==typeof O&&a.isValid!==O;if(r.delayError&&R){let e;e=()=>{M(a.errors,L,R),m.state.next({errors:a.errors})},(t=t=>{clearTimeout(d),d=setTimeout(e,t)})(r.delayError)}else clearTimeout(d),t=null,R?M(a.errors,L,R):J(a.errors,L);if((R?!q(e,R):e)||!X($)||l){let e={...$,...l&&"boolean"==typeof O?{isValid:O}:{},errors:a.errors,name:L};a={...a,...e},m.state.next(e)}}}},T=(e,t)=>{if(A(a.errors,t)&&e.focus)return e.focus(),1},I=async(e,t={})=>{let n,s,i=$(e);if(r.resolver){let t=await y(E(e)?e:i);n=X(t),s=e?!i.some(e=>A(t,e)):n}else e?((s=(await Promise.all(i.map(async e=>{let t=A(l,e);return await j(t&&t._f?{[e]:t}:t)}))).every(Boolean))||a.isValid)&&p():s=n=await j(l);return m.state.next({...!U(e)||(u.isValid||h.isValid)&&n!==a.isValid?{}:{name:e},...r.resolver||!e?{isValid:n}:{},errors:a.errors}),t.shouldFocus&&!s&&em(l,T,e?i:o.mount),s},P=(e,t)=>{let r={...i.mount?s:n};return t&&(r=function e(t,r){let a={};for(let l in t)if(t.hasOwnProperty(l)){let n=t[l],s=r[l];if(n&&_(n)&&s){let t=e(n,s);_(t)&&(a[l]=t)}else t[l]&&(a[l]=s)}return a}(t.dirtyFields?a.dirtyFields:a.touchedFields,r)),E(e)?r:U(e)?A(r,e):e.map(e=>A(r,e))},B=(e,t)=>({invalid:!!A((t||a).errors,e),isDirty:!!A((t||a).dirtyFields,e),error:A((t||a).errors,e),isValidating:!!A(a.validatingFields,e),isTouched:!!A((t||a).touchedFields,e)}),K=(e,t,r)=>{let n=(A(l,e,{_f:{}})._f||{}).ref,{ref:s,message:i,type:o,...d}=A(a.errors,e)||{};M(a.errors,e,{...d,...t,ref:n}),m.state.next({name:e,errors:a.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},W=e=>m.state.subscribe({next:t=>{let r,l,i;r=e.name,l=t.name,i=e.exact,(!r||!l||r===l||$(r).some(e=>e&&(i?e===l:e.startsWith(l)||l.startsWith(e))))&&((e,t,r,a)=>{r(e);let{name:l,...n}=e;return X(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(e=>t[e]===(!a||"all"))})(t,e.formState||u,ec,e.reRenderRoot)&&e.callback({values:{...s},...a,...t,defaultValues:n})}}).unsubscribe,G=(e,t={})=>{for(let i of e?$(e):o.mount)o.mount.delete(i),o.array.delete(i),t.keepValue||(J(l,i),J(s,i)),t.keepError||J(a.errors,i),t.keepDirty||J(a.dirtyFields,i),t.keepTouched||J(a.touchedFields,i),t.keepIsValidating||J(a.validatingFields,i),r.shouldUnregister||t.keepDefaultValue||J(n,i);m.state.next({values:C(s)}),m.state.next({...a,...!t.keepDirty?{}:{isDirty:w()}}),t.keepIsValid||p()},Q=({disabled:e,name:t})=>{if("boolean"==typeof e&&i.mount||e||o.disabled.has(t)){let r=o.disabled.has(t);e?o.disabled.add(t):o.disabled.delete(t),!!e!==r&&i.mount&&!i.action&&p()}},et=(e,t={})=>{let a=A(l,e),s="boolean"==typeof t.disabled||"boolean"==typeof r.disabled;return(M(l,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),o.mount.add(e),a)?Q({disabled:"boolean"==typeof t.disabled?t.disabled:r.disabled,name:e}):g(e,!0,t.value),{...s?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:eo(t.min),max:eo(t.max),minLength:eo(t.minLength),maxLength:eo(t.maxLength),pattern:eo(t.pattern)}:{},name:e,onChange:R,onBlur:R,ref:s=>{if(s){let r;et(e,t),a=A(l,e);let i=E(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,o="radio"===(r=i).type||"checkbox"===r.type,d=a._f.refs||[];(o?d.find(e=>e===i):i===a._f.ref)||(M(l,e,{_f:{...a._f,...o?{refs:[...d.filter(Z),i,...Array.isArray(A(n,e))?[{}]:[]],ref:{type:i.type,name:e}}:{ref:i}}}),g(e,!1,void 0,i))}else{var d;(a=A(l,e,{}))._f&&(a._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(d=o.array,!d.has(e.substring(0,e.search(/\.\d+(\.|$)/))||e)||!i.action)&&o.unMount.add(e)}}}},er=()=>r.shouldFocusError&&em(l,T,o.mount),ea=(e,t)=>async n=>{let i;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let d=C(s);if(m.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await v();x(),a.errors=e,d=C(t)}else await j(l);if(o.disabled.size)for(let e of o.disabled)J(d,e);if(J(a.errors,"root"),X(a.errors)){m.state.next({errors:{}});try{await e(d,n)}catch(e){i=e}}else t&&await t({...a.errors},n),er(),setTimeout(er);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:X(a.errors)&&!i,submitCount:a.submitCount+1,errors:a.errors}),i)throw i},en=(e,t={})=>{let d=e?C(e):n,c=C(d),h=X(e),f=h?n:c;if(t.keepDefaultValues||(n=d),!t.keepValues){if(t.keepDirtyValues)for(let e of Array.from(new Set([...o.mount,...Object.keys(ee(n,s))]))){let t=A(a.dirtyFields,e),r=A(s,e),l=A(f,e);t&&!E(r)?M(f,e,r):t||E(l)||O(e,l)}else{if(D&&E(e))for(let e of o.mount){let t=A(l,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Y(e)){let t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(let e of o.mount)O(e,A(f,e));else l={}}s=r.shouldUnregister?t.keepDefaultValues?C(n):{}:C(f),m.array.next({values:{...f}}),m.state.next({values:{...f}})}o={mount:t.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!r.shouldUnregister&&!X(f),i.watch=!!r.shouldUnregister,i.keepIsValid=!!t.keepIsValid,i.action=!1,t.keepErrors||(a.errors={}),m.state.next({submitCount:t.keepSubmitCount?a.submitCount:0,isDirty:!h&&(t.keepDirty?a.isDirty:!!(t.keepDefaultValues&&!q(e,n))),isSubmitted:!!t.keepIsSubmitted&&a.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&s?ee(n,s):a.dirtyFields:t.keepDefaultValues&&e?ee(n,e):t.keepDirty?a.dirtyFields:{},touchedFields:t.keepTouched?a.touchedFields:{},errors:t.keepErrors?a.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&a.isSubmitSuccessful,isSubmitting:!1,defaultValues:n})},es=(e,t)=>en(z(e)?e(s):e,{...r.resetOptions,...t}),ec=e=>{a={...a,...e}},ex={control:{register:et,unregister:G,getFieldState:B,handleSubmit:ea,setError:K,_subscribe:W,_runSchema:v,_updateIsValidating:x,_focusError:er,_getWatch:k,_getDirty:w,_setValid:p,_setFieldArray:(e,t=[],o,d,c=!0,f=!0)=>{if(d&&o&&!r.disabled){if(i.action=!0,f&&Array.isArray(A(l,e))){let t=o(A(l,e),d.argA,d.argB);c&&M(l,e,t)}if(f&&Array.isArray(A(a.errors,e))){let t,r=o(A(a.errors,e),d.argA,d.argB);c&&M(a.errors,e,r),V(A(t=a.errors,e)).length||J(t,e)}if((u.touchedFields||h.touchedFields)&&f&&Array.isArray(A(a.touchedFields,e))){let t=o(A(a.touchedFields,e),d.argA,d.argB);c&&M(a.touchedFields,e,t)}(u.dirtyFields||h.dirtyFields)&&(a.dirtyFields=ee(n,s)),m.state.next({name:e,isDirty:w(e,t),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else M(s,e,t)},_setDisabledField:Q,_setErrors:e=>{a.errors=e,m.state.next({errors:a.errors,isValid:!1})},_getFieldArray:e=>V(A(i.mount?s:n,e,r.shouldUnregister?A(n,e,[]):[])),_reset:en,_resetDefaultValues:()=>z(r.defaultValues)&&r.defaultValues().then(e=>{es(e,r.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let e of o.unMount){let t=A(l,e);t&&(t._f.refs?t._f.refs.every(e=>!Z(e)):!Z(t._f.ref))&&G(e)}o.unMount=new Set},_disableForm:e=>{"boolean"==typeof e&&(m.state.next({disabled:e}),em(l,(t,r)=>{let a=A(l,r);a&&(t.disabled=a._f.disabled||e,Array.isArray(a._f.refs)&&a._f.refs.forEach(t=>{t.disabled=a._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:u,get _fields(){return l},get _formValues(){return s},get _state(){return i},set _state(value){i=value},get _defaultValues(){return n},get _names(){return o},set _names(value){o=value},get _formState(){return a},get _options(){return r},set _options(value){r={...r,...value}}},subscribe:e=>(i.mount=!0,h={...h,...e.formState},W({...e,formState:{...c,...e.formState}})),trigger:I,register:et,handleSubmit:ea,watch:(e,t)=>z(e)?m.state.subscribe({next:r=>"values"in r&&e(k(void 0,t),r)}):k(e,t,!0),setValue:O,getValues:P,reset:es,resetField:(e,t={})=>{A(l,e)&&(E(t.defaultValue)?O(e,C(A(n,e))):(O(e,t.defaultValue),M(n,e,C(t.defaultValue))),t.keepTouched||J(a.touchedFields,e),t.keepDirty||(J(a.dirtyFields,e),a.isDirty=t.defaultValue?w(e,C(A(n,e))):w()),!t.keepError&&(J(a.errors,e),u.isValid&&p()),m.state.next({...a}))},clearErrors:e=>{let t=e?$(e):void 0;null==t||t.forEach(e=>J(a.errors,e)),t?t.forEach(e=>{m.state.next({name:e,errors:a.errors})}):m.state.next({errors:{}})},unregister:G,setError:K,setFocus:(e,t={})=>{let r=A(l,e),a=r&&r._f;if(a){let e=a.refs?a.refs[0]:a.ref;e.focus&&setTimeout(()=>{e.focus(),t.shouldSelect&&z(e.select)&&e.select()})}},getFieldState:B};return{...ex,formControl:ex}}(e);t.current={...l,formState:a}}let n=t.current.control;return n._options=e,B(()=>{let e=n._subscribe({formState:n._proxyFormState,callback:()=>l({...n._formState}),reRenderRoot:!0});return l(e=>({...e,isReady:!0})),n._formState.isReady=!0,e},[n]),w.default.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),w.default.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),w.default.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),w.default.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),w.default.useEffect(()=>{if(n._proxyFormState.isDirty){let e=n._getDirty();e!==a.isDirty&&n._subjects.state.next({isDirty:e})}},[n,a.isDirty]),w.default.useEffect(()=>{var t;e.values&&!q(e.values,r.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),(null==(t=n._options.resetOptions)?void 0:t.keepIsValid)||n._setValid(),r.current=e.values,l(e=>({...e}))):n._resetDefaultValues()},[n,e.values]),w.default.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),t.current.formState=w.default.useMemo(()=>((e,t,r,a=!0)=>{let l={defaultValues:t._defaultValues};for(let n in e)Object.defineProperty(l,n,{get:()=>("all"!==t._proxyFormState[n]&&(t._proxyFormState[n]=!a||"all"),r&&(r[n]=!0),e[n])});return l})(a,n),[n,a]),t.current}var ej=e.i(19455),ew=e.i(76639),ek=e.i(55593),eN=e.i(10204),eS=e.i(67489),e_=e.i(24687),eD=e.i(97104),eC=e.i(46696),eE=e.i(7233),eV=e.i(83942);function eF({open:e,onOpenChange:t}){let[r,a]=(0,w.useState)(!1),l=void 0!==e,n=l?t:a,s=(0,eD.useCreateLead)(),{data:i}=(0,eV.useRegions)(),{register:o,handleSubmit:d,reset:c,setValue:u,watch:h,formState:{errors:m}}=ey({defaultValues:{status:"new",source_type:"manual"}}),f=async e=>{try{await s.mutateAsync({...e,company_name:e.company_name||null,email:e.email||null,phone:e.phone||null,address:e.address||null,postal_code:e.postal_code||null,region_id:e.region_id||null,notes:e.notes||null}),eC.toast.success("Lead bol úspešne vytvorený"),n?.(!1),c()}catch(r){console.error("Create lead error:",r);let e=r?.message||"Neznáma chyba",t=r?.details||"";eC.toast.error(`Nepodarilo sa vytvoriť lead: ${e} ${t}`)}};return(0,j.jsxs)(ew.Dialog,{open:l?e:r,onOpenChange:n,children:[(0,j.jsx)(ew.DialogTrigger,{asChild:!0,children:(0,j.jsx)(ej.Button,{className:"md:hidden min-h-[44px] min-w-[44px]",size:"icon",title:"Nový lead",children:(0,j.jsx)(eE.Plus,{className:"h-4 w-4"})})}),(0,j.jsx)(ew.DialogTrigger,{asChild:!0,children:(0,j.jsxs)(ej.Button,{className:"hidden md:flex",children:[(0,j.jsx)(eE.Plus,{className:"h-4 w-4 mr-2"}),"Nový lead"]})}),(0,j.jsxs)(ew.DialogContent,{className:"max-w-[95vw] sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,j.jsxs)(ew.DialogHeader,{children:[(0,j.jsx)(ew.DialogTitle,{children:"Vytvoriť nový lead"}),(0,j.jsx)(ew.DialogDescription,{children:"Vyplňte informácie o novom potenciálnom klientovi."})]}),(0,j.jsxs)("form",{onSubmit:d(f),className:"space-y-4 py-4",children:[(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"contact_name",children:"Meno kontaktu *"}),(0,j.jsx)(ek.Input,{id:"contact_name",...o("contact_name",{required:!0}),className:m.contact_name?"border-destructive":""}),m.contact_name&&(0,j.jsx)("span",{className:"text-xs text-destructive",children:"Toto pole je povinné"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"company_name",children:"Názov firmy"}),(0,j.jsx)(ek.Input,{id:"company_name",...o("company_name")})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"email",children:"Email"}),(0,j.jsx)(ek.Input,{id:"email",type:"email",...o("email")})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"phone",children:"Telefón"}),(0,j.jsx)(ek.Input,{id:"phone",...o("phone")})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"source",children:"Zdroj"}),(0,j.jsxs)(eS.Select,{onValueChange:e=>u("source_type",e),defaultValue:"manual",children:[(0,j.jsx)(eS.SelectTrigger,{children:(0,j.jsx)(eS.SelectValue,{placeholder:"Vyberte zdroj"})}),(0,j.jsxs)(eS.SelectContent,{children:[(0,j.jsx)(eS.SelectItem,{value:"manual",children:"Manuálne"}),(0,j.jsx)(eS.SelectItem,{value:"website_form",children:"Web formulár"}),(0,j.jsx)(eS.SelectItem,{value:"facebook_lead_ads",children:"Facebook Lead Ads"}),(0,j.jsx)(eS.SelectItem,{value:"facebook_ads",children:"Facebook Ads"}),(0,j.jsx)(eS.SelectItem,{value:"google_ads",children:"Google Ads"})]})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"status",children:"Status"}),(0,j.jsxs)(eS.Select,{onValueChange:e=>u("status",e),defaultValue:"new",children:[(0,j.jsx)(eS.SelectTrigger,{children:(0,j.jsx)(eS.SelectValue,{placeholder:"Vyberte status"})}),(0,j.jsxs)(eS.SelectContent,{children:[(0,j.jsx)(eS.SelectItem,{value:"new",children:"Nový"}),(0,j.jsx)(eS.SelectItem,{value:"contacted",children:"Kontaktovaný"}),(0,j.jsx)(eS.SelectItem,{value:"offer",children:"Ponuka"}),(0,j.jsx)(eS.SelectItem,{value:"won",children:"Vyhraný"}),(0,j.jsx)(eS.SelectItem,{value:"lost",children:"Stratený"}),(0,j.jsx)(eS.SelectItem,{value:"waiting",children:"Čaká sa"})]})]})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"region",children:"Región"}),(0,j.jsxs)(eS.Select,{onValueChange:e=>u("region_id",e),children:[(0,j.jsx)(eS.SelectTrigger,{children:(0,j.jsx)(eS.SelectValue,{placeholder:"Vyberte región"})}),(0,j.jsx)(eS.SelectContent,{children:i?.map(e=>(0,j.jsx)(eS.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"notes",children:"Poznámka"}),(0,j.jsx)(e_.Textarea,{id:"notes",...o("notes")})]}),(0,j.jsxs)(ew.DialogFooter,{children:[(0,j.jsx)(ej.Button,{type:"button",variant:"outline",onClick:()=>n?.(!1),children:"Zrušiť"}),(0,j.jsx)(ej.Button,{type:"submit",disabled:s.isPending,children:s.isPending?"Vytváranie...":"Vytvoriť lead"})]})]})]})]})}var eA=e.i(66027),ez=e.i(11795),eM=e.i(57951);function eL(){let{user:e}=(0,eM.useAuth)();return(0,eA.useQuery)({queryKey:["salespeople"],queryFn:async()=>{let t=ez.supabase.from("profiles").select(`
          *,
          region:regions(id, name)
        `).eq("role","sales").eq("is_active",!0);e?.role==="manager"&&e.regionId&&(t=t.eq("region_id",e.regionId));let{data:r,error:a}=await t;if(a)throw a;return await Promise.all((r||[]).map(async e=>{let[t,r,a]=await Promise.all([ez.supabase.from("leads").select("*",{count:"exact",head:!0}).eq("assigned_user_id",e.id),ez.supabase.from("clients").select("*",{count:"exact",head:!0}).eq("assigned_user_id",e.id),ez.supabase.from("quotes").select("*",{count:"exact",head:!0}).eq("created_by",e.id)]);return{...e,role:"sales",stats:{leads:t.count||0,clients:r.count||0,quotes:a.count||0}}}))},enabled:!!e&&("admin"===e.role||"manager"===e.role)})}function eO({lead:e,open:t,onOpenChange:r}){let[a,l]=(0,w.useState)(""),n=(0,eD.useAssignLead)(),{data:s=[],isLoading:i}=eL(),o=async()=>{if(e&&a)try{await n.mutateAsync({leadId:e.id,userId:a}),eC.toast.success("Lead bol úspešne priradený"),r(!1),l("")}catch{eC.toast.error("Nepodarilo sa priradiť lead")}};return e?(0,j.jsx)(ew.Dialog,{open:t,onOpenChange:r,children:(0,j.jsxs)(ew.DialogContent,{className:"sm:max-w-[425px]",children:[(0,j.jsxs)(ew.DialogHeader,{children:[(0,j.jsx)(ew.DialogTitle,{children:"Priradiť lead"}),(0,j.jsxs)(ew.DialogDescription,{children:["Vyberte obchodníka, ktorému chcete priradiť lead ",(0,j.jsx)("strong",{children:e.contact_name}),"."]})]}),(0,j.jsx)("div",{className:"grid gap-4 py-4",children:(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"user",children:"Obchodník"}),(0,j.jsxs)(eS.Select,{value:a,onValueChange:l,disabled:i,children:[(0,j.jsx)(eS.SelectTrigger,{children:(0,j.jsx)(eS.SelectValue,{placeholder:i?"Načítavam...":"Vyberte obchodníka"})}),(0,j.jsx)(eS.SelectContent,{children:s.map(e=>(0,j.jsx)(eS.SelectItem,{value:e.id,children:e.full_name},e.id))})]})]})}),(0,j.jsxs)(ew.DialogFooter,{children:[(0,j.jsx)(ej.Button,{variant:"outline",onClick:()=>r(!1),children:"Zrušiť"}),(0,j.jsx)(ej.Button,{onClick:o,disabled:!a||n.isPending||i,children:n.isPending?"Priraďovanie...":"Priradiť"})]})]})}):null}function eR({lead:e,open:t,onOpenChange:r}){let a=(0,eD.useUpdateLead)(),{data:l}=(0,eV.useRegions)(),{register:n,handleSubmit:s,reset:i,setValue:o,formState:{errors:d}}=ey();(0,w.useEffect)(()=>{e&&t&&i({contact_name:e.contact_name,company_name:e.company_name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",postal_code:e.postal_code||"",region_id:e.region_id||"",status:e.status,source_type:e.source_type,notes:e.notes||""})},[e,t,i]);let c=async t=>{if(e)try{await a.mutateAsync({id:e.id,...t,company_name:t.company_name||null,email:t.email||null,phone:t.phone||null,address:t.address||null,postal_code:t.postal_code||null,region_id:t.region_id||null,notes:t.notes||null}),eC.toast.success("Lead bol úspešne aktualizovaný"),r(!1)}catch(e){eC.toast.error("Nepodarilo sa aktualizovať lead"),console.error(e)}};return(0,j.jsx)(ew.Dialog,{open:t,onOpenChange:r,children:(0,j.jsxs)(ew.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,j.jsxs)(ew.DialogHeader,{children:[(0,j.jsx)(ew.DialogTitle,{children:"Upraviť lead"}),(0,j.jsx)(ew.DialogDescription,{children:"Upravte informácie o potenciálnom klientovi."})]}),(0,j.jsxs)("form",{onSubmit:s(c),className:"space-y-4 py-4",children:[(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-contact_name",children:"Meno kontaktu *"}),(0,j.jsx)(ek.Input,{id:"edit-contact_name",...n("contact_name",{required:!0}),className:d.contact_name?"border-destructive":""}),d.contact_name&&(0,j.jsx)("span",{className:"text-xs text-destructive",children:"Toto pole je povinné"})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-company_name",children:"Názov firmy"}),(0,j.jsx)(ek.Input,{id:"edit-company_name",...n("company_name")})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-email",children:"Email"}),(0,j.jsx)(ek.Input,{id:"edit-email",type:"email",...n("email")})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-phone",children:"Telefón"}),(0,j.jsx)(ek.Input,{id:"edit-phone",...n("phone")})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-source",children:"Zdroj"}),(0,j.jsxs)(eS.Select,{onValueChange:e=>o("source_type",e),defaultValue:e?.source_type,value:e?e.source_type:void 0,children:[(0,j.jsx)(eS.SelectTrigger,{children:(0,j.jsx)(eS.SelectValue,{placeholder:"Vyberte zdroj"})}),(0,j.jsxs)(eS.SelectContent,{children:[(0,j.jsx)(eS.SelectItem,{value:"manual",children:"Manuálne"}),(0,j.jsx)(eS.SelectItem,{value:"website_form",children:"Web formulár"}),(0,j.jsx)(eS.SelectItem,{value:"facebook_lead_ads",children:"Facebook Lead Ads"}),(0,j.jsx)(eS.SelectItem,{value:"facebook_ads",children:"Facebook Ads"}),(0,j.jsx)(eS.SelectItem,{value:"google_ads",children:"Google Ads"})]})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-status",children:"Status"}),(0,j.jsxs)(eS.Select,{onValueChange:e=>o("status",e),defaultValue:e?.status,children:[(0,j.jsx)(eS.SelectTrigger,{children:(0,j.jsx)(eS.SelectValue,{placeholder:"Vyberte status"})}),(0,j.jsxs)(eS.SelectContent,{children:[(0,j.jsx)(eS.SelectItem,{value:"new",children:"Nový"}),(0,j.jsx)(eS.SelectItem,{value:"contacted",children:"Kontaktovaný"}),(0,j.jsx)(eS.SelectItem,{value:"offer",children:"Ponuka"}),(0,j.jsx)(eS.SelectItem,{value:"won",children:"Vyhraný"}),(0,j.jsx)(eS.SelectItem,{value:"lost",children:"Stratený"}),(0,j.jsx)(eS.SelectItem,{value:"waiting",children:"Čaká sa"})]})]})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-region",children:"Región"}),(0,j.jsxs)(eS.Select,{onValueChange:e=>o("region_id",e),defaultValue:e?.region_id||void 0,children:[(0,j.jsx)(eS.SelectTrigger,{children:(0,j.jsx)(eS.SelectValue,{placeholder:"Vyberte región"})}),(0,j.jsx)(eS.SelectContent,{children:l?.map(e=>(0,j.jsx)(eS.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,j.jsxs)("div",{className:"space-y-2",children:[(0,j.jsx)(eN.Label,{htmlFor:"edit-notes",children:"Poznámka"}),(0,j.jsx)(e_.Textarea,{id:"edit-notes",...n("notes")})]}),(0,j.jsxs)(ew.DialogFooter,{children:[(0,j.jsx)(ej.Button,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Zrušiť"}),(0,j.jsx)(ej.Button,{type:"submit",disabled:a.isPending,children:a.isPending?"Ukladám...":"Uložiť zmeny"})]})]})]})})}var eT=e.i(87486),eI=e.i(63488),eP=e.i(43432);let eB=(0,e.i(75254).default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var eU=e.i(46897),eK=e.i(72520),eq=e.i(95468);function eW({lead:e,open:t,onOpenChange:r}){let a=(0,k.useRouter)(),l=(0,eD.useConvertLead)(),[n,s]=(0,w.useState)(!1);if(!e)return null;let i=async()=>{try{s(!0);let t=await l.mutateAsync(e.id);eC.toast.success("Lead úspešne konvertovaný na klienta!",{description:`${t.activitiesCopied} aktiv\xedt bolo prenesen\xfdch`,action:{label:"Zobraziť klienta",onClick:()=>a.push("/app/clients")}}),r(!1)}catch(e){eC.toast.error("Chyba pri konverzii",{description:e.message||"Nepodarilo sa konvertovať lead na klienta"})}finally{s(!1)}};return(0,j.jsx)(ew.Dialog,{open:t,onOpenChange:r,children:(0,j.jsxs)(ew.DialogContent,{className:"sm:max-w-[600px]",children:[(0,j.jsxs)(ew.DialogHeader,{children:[(0,j.jsxs)(ew.DialogTitle,{className:"flex items-center gap-2",children:[(0,j.jsx)(eK.ArrowRight,{className:"h-5 w-5 text-primary"}),"Konvertovať lead na klienta"]}),(0,j.jsx)(ew.DialogDescription,{children:"Tento lead bude konvertovaný na klienta. Všetky údaje a aktivity budú prenesené."})]}),(0,j.jsxs)("div",{className:"space-y-6 py-4",children:[(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Informácie leadu"}),(0,j.jsx)(eT.Badge,{variant:"info",children:"Lead"})]}),(0,j.jsxs)("div",{className:"rounded-lg border border-border bg-muted/30 p-4 space-y-3",children:[(0,j.jsx)("div",{className:"flex items-center justify-between",children:(0,j.jsx)("h3",{className:"font-semibold text-lg",children:e.contact_name})}),e.company_name&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,j.jsx)(eB,{className:"h-4 w-4"}),(0,j.jsx)("span",{children:e.company_name})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.email&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,j.jsx)(eI.Mail,{className:"h-4 w-4"}),(0,j.jsx)("span",{className:"truncate",children:e.email})]}),e.phone&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,j.jsx)(eP.Phone,{className:"h-4 w-4"}),(0,j.jsx)("span",{children:e.phone})]}),e.address&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground sm:col-span-2",children:[(0,j.jsx)(eU.MapPin,{className:"h-4 w-4"}),(0,j.jsx)("span",{className:"truncate",children:e.address})]})]}),e.notes&&(0,j.jsxs)("div",{className:"pt-2 border-t border-border/50",children:[(0,j.jsx)("p",{className:"text-xs text-muted-foreground font-medium mb-1",children:"Poznámky:"}),(0,j.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap line-clamp-3",children:e.notes})]})]})]}),(0,j.jsx)("div",{className:"flex justify-center",children:(0,j.jsx)("div",{className:"rounded-full bg-primary/10 p-3",children:(0,j.jsx)(eK.ArrowRight,{className:"h-6 w-6 text-primary"})})}),(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Nový klient"}),(0,j.jsx)(eT.Badge,{variant:"success",children:"Klient"})]}),(0,j.jsxs)("div",{className:"rounded-lg border border-primary/20 bg-primary/5 p-4 space-y-3",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(eq.CheckCircle2,{className:"h-5 w-5 text-primary"}),(0,j.jsx)("p",{className:"text-sm font-medium",children:"Klient bude vytvorený s nasledujúcimi údajmi:"})]}),(0,j.jsxs)("ul",{className:"text-sm space-y-2 ml-7 text-muted-foreground",children:[(0,j.jsxs)("li",{children:["• Kontaktné meno: ",(0,j.jsx)("span",{className:"text-foreground font-medium",children:e.contact_name})]}),e.company_name&&(0,j.jsxs)("li",{children:["• Firma: ",(0,j.jsx)("span",{className:"text-foreground font-medium",children:e.company_name})]}),e.email&&(0,j.jsxs)("li",{children:["• Email: ",(0,j.jsx)("span",{className:"text-foreground font-medium",children:e.email})]}),e.phone&&(0,j.jsxs)("li",{children:["• Telefón: ",(0,j.jsx)("span",{className:"text-foreground font-medium",children:e.phone})]}),(0,j.jsxs)("li",{children:["• Status: ",(0,j.jsx)("span",{className:"text-success font-medium",children:"Aktívny"})]}),(0,j.jsx)("li",{children:"• Všetky aktivity budú prenesené"})]})]})]}),(0,j.jsx)("div",{className:"rounded-lg bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 p-4",children:(0,j.jsxs)("div",{className:"flex gap-3",children:[(0,j.jsx)("div",{className:"text-amber-600 dark:text-amber-400 mt-0.5",children:(0,j.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsx)("h5",{className:"text-sm font-medium text-amber-900 dark:text-amber-100 mb-1",children:"Dôležité"}),(0,j.jsx)("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:'Lead bude automaticky označený ako "Vyhraný" a už nebude možné túto akciu vrátiť späť.'})]})]})})]}),(0,j.jsxs)(ew.DialogFooter,{children:[(0,j.jsx)(ej.Button,{variant:"outline",onClick:()=>r(!1),disabled:n,children:"Zrušiť"}),(0,j.jsx)(ej.Button,{onClick:i,disabled:n,className:"min-w-[140px]",children:n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"animate-spin mr-2",children:"⏳"}),"Konvertujem..."]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(eq.CheckCircle2,{className:"mr-2 h-4 w-4"}),"Konvertovať"]})})]})]})})}var e$=e.i(74080);let eH="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function eX(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function eY(e){return"nodeType"in e}function eZ(e){var t,r;return e?eX(e)?e:eY(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function eJ(e){let{Document:t}=eZ(e);return e instanceof t}function eG(e){return!eX(e)&&e instanceof eZ(e).HTMLElement}function eQ(e){return e instanceof eZ(e).SVGElement}function e0(e){return e?eX(e)?e.document:eY(e)?eJ(e)?e:eG(e)||eQ(e)?e.ownerDocument:document:document:document}let e1=eH?w.useLayoutEffect:w.useEffect;function e2(e){let t=(0,w.useRef)(e);return e1(()=>{t.current=e}),(0,w.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function e5(e,t){void 0===t&&(t=[e]);let r=(0,w.useRef)(e);return e1(()=>{r.current!==e&&(r.current=e)},t),r}function e4(e,t){let r=(0,w.useRef)();return(0,w.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function e3(e){let t=e2(e),r=(0,w.useRef)(null),a=(0,w.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function e6(e){let t=(0,w.useRef)();return(0,w.useEffect)(()=>{t.current=e},[e]),t.current}let e8={};function e9(e,t){return(0,w.useMemo)(()=>{if(t)return t;let r=null==e8[e]?0:e8[e]+1;return e8[e]=r,e+"-"+r},[e,t])}function e7(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((t,r)=>{for(let[a,l]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*l)}return t},{...t})}}let te=e7(1),tt=e7(-1);function tr(e){if(!e)return!1;let{KeyboardEvent:t}=eZ(e.target);return t&&e instanceof t}function ta(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=eZ(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let tl=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[tl.Translate.toString(e),tl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),tn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",ts={display:"none"};function ti(e){let{id:t,value:r}=e;return w.default.createElement("div",{id:t,style:ts},r)}function to(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return w.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let td=(0,w.createContext)(null),tc={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},tu={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function th(e){var t;let r,{announcements:a=tu,container:l,hiddenTextDescribedById:n,screenReaderInstructions:s=tc}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,w.useState)("");return{announce:(0,w.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),d=e9("DndLiveRegion"),[c,u]=(0,w.useState)(!1);if((0,w.useEffect)(()=>{u(!0)},[]),t=(0,w.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&i(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(a.onDragCancel({active:t,over:r}))}}),[i,a]),r=(0,w.useContext)(td),(0,w.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!c)return null;let h=w.default.createElement(w.default.Fragment,null,w.default.createElement(ti,{id:n,value:s.draggable}),w.default.createElement(to,{id:d,announcement:o}));return l?(0,e$.createPortal)(h,l):h}function tm(){}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let tf=Object.freeze({x:0,y:0});function tp(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function tx(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function tg(e){let{left:t,top:r,height:a,width:l}=e;return[{x:t,y:r},{x:t+l,y:r},{x:t,y:r+a},{x:t+l,y:r+a}]}let tb=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,l=tg(t),n=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=tg(a),s=Number((l.reduce((e,t,a)=>{var l;return e+(l=r[a],Math.sqrt(Math.pow(l.x-t.x,2)+Math.pow(l.y-t.y,2)))},0)/4).toFixed(4));n.push({id:t,data:{droppableContainer:e,value:s}})}}return n.sort(tp)},tv=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,l=[];for(let e of a){let{id:a}=e,n=r.get(a);if(n){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),n=Math.min(t.top+t.height,e.top+e.height);if(a<l&&r<n){let s=t.width*t.height,i=e.width*e.height,o=(l-a)*(n-r);return Number((o/(s+i-o)).toFixed(4))}return 0}(n,t);r>0&&l.push({id:a,data:{droppableContainer:e,value:r}})}}return l.sort(tx)};function ty(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:tf}let tj=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})};function tw(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let tk={ignoreTransform:!1};function tN(e,t){void 0===t&&(t=tk);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=eZ(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=tw(t);if(!a)return e;let{scaleX:l,scaleY:n,x:s,y:i}=a,o=e.left-s-(1-l)*parseFloat(r),d=e.top-i-(1-n)*parseFloat(r.slice(r.indexOf(" ")+1)),c=l?e.width/l:e.width,u=n?e.height/n:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,a))}let{top:a,left:l,width:n,height:s,bottom:i,right:o}=r;return{top:a,left:l,width:n,height:s,bottom:i,right:o}}function tS(e){return tN(e,{ignoreTransform:!0})}function t_(e,t){let r=[];return e?function a(l){var n,s;let i;if(null!=t&&r.length>=t||!l)return r;if(eJ(l)&&null!=l.scrollingElement&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!eG(l)||eQ(l)||r.includes(l))return r;let o=eZ(e).getComputedStyle(l);return(l!==e&&(void 0===(n=o)&&(n=eZ(l).getComputedStyle(l)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=n[e];return"string"==typeof t&&i.test(t)}))&&r.push(l),void 0===(s=o)&&(s=eZ(l).getComputedStyle(l)),"fixed"===s.position)?r:a(l.parentNode)}(e):r}function tD(e){let[t]=t_(e,1);return null!=t?t:null}function tC(e){return eH&&e?eX(e)?e:eY(e)?eJ(e)||e===e0(e).scrollingElement?window:eG(e)?e:null:null:null}function tE(e){return eX(e)?e.scrollX:e.scrollLeft}function tV(e){return eX(e)?e.scrollY:e.scrollTop}function tF(e){return{x:tE(e),y:tV(e)}}function tA(e){return!!eH&&!!e&&e===document.scrollingElement}function tz(e){let t={x:0,y:0},r=tA(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,n=e.scrollLeft<=t.x;return{isTop:l,isLeft:n,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=h||(h={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let tM={x:.2,y:.2};function tL(e){return e.reduce((e,t)=>te(e,tF(t)),tf)}function tO(e,t){if(void 0===t&&(t=tN),!e)return;let{top:r,left:a,bottom:l,right:n}=t(e);tD(e)&&(l<=0||n<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let tR=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+tE(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+tV(t),0)}]];class tT{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=t_(t),a=tL(r);for(const[t,l,n]of(this.rect={...e},this.width=e.width,this.height=e.height,tR))for(const e of l)Object.defineProperty(this,e,{get:()=>{let l=n(r),s=a[t]-l;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class tI{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function tP(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function tB(e){e.preventDefault()}function tU(e){e.stopPropagation()}(l=m||(m={})).Click="click",l.DragStart="dragstart",l.Keydown="keydown",l.ContextMenu="contextmenu",l.Resize="resize",l.SelectionChange="selectionchange",l.VisibilityChange="visibilitychange",(n=f||(f={})).Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab";let tK={start:[f.Space,f.Enter],cancel:[f.Esc],end:[f.Space,f.Enter,f.Tab]},tq=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case f.Right:return{...r,x:r.x+25};case f.Left:return{...r,x:r.x-25};case f.Down:return{...r,y:r.y+25};case f.Up:return{...r,y:r.y-25}}};class tW{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new tI(e0(t)),this.windowListeners=new tI(eZ(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(m.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&tO(r),t(tf)}handleKeyDown(e){if(tr(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:l=tK,coordinateGetter:n=tq,scrollBehavior:s="smooth"}=a,{code:i}=e;if(l.end.includes(i))return void this.handleEnd(e);if(l.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,d=o?{x:o.left,y:o.top}:tf;this.referenceCoordinates||(this.referenceCoordinates=d);let c=n(e,{active:t,context:r.current,currentCoordinates:d});if(c){let t=tt(c,d),a={x:0,y:0},{scrollableAncestors:l}=r.current;for(let r of l){let l=e.code,{isTop:n,isRight:i,isLeft:o,isBottom:d,maxScroll:u,minScroll:h}=tz(r),m=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:l,width:e.clientWidth,height:e.clientHeight}}(r),p={x:Math.min(l===f.Right?m.right-m.width/2:m.right,Math.max(l===f.Right?m.left:m.left+m.width/2,c.x)),y:Math.min(l===f.Down?m.bottom-m.height/2:m.bottom,Math.max(l===f.Down?m.top:m.top+m.height/2,c.y))},x=l===f.Right&&!i||l===f.Left&&!o,g=l===f.Down&&!d||l===f.Up&&!n;if(x&&p.x!==c.x){let e=r.scrollLeft+t.x,n=l===f.Right&&e<=u.x||l===f.Left&&e>=h.x;if(n&&!t.y)return void r.scrollTo({left:e,behavior:s});n?a.x=r.scrollLeft-e:a.x=l===f.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,a.x&&r.scrollBy({left:-a.x,behavior:s});break}if(g&&p.y!==c.y){let e=r.scrollTop+t.y,n=l===f.Down&&e<=u.y||l===f.Up&&e>=h.y;if(n&&!t.x)return void r.scrollTo({top:e,behavior:s});n?a.y=r.scrollTop-e:a.y=l===f.Down?r.scrollTop-u.y:r.scrollTop-h.y,a.y&&r.scrollBy({top:-a.y,behavior:s});break}}this.handleMove(e,te(tt(c,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function t$(e){return!!(e&&"distance"in e)}function tH(e){return!!(e&&"delay"in e)}tW.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=tK,onActivation:l}=t,{active:n}=r,{code:s}=e.nativeEvent;if(a.start.includes(s)){let t=n.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class tX{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=eZ(e);return e instanceof t?e:e0(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:n}=l;this.props=e,this.events=t,this.document=e0(n),this.documentListeners=new tI(this.document),this.listeners=new tI(r),this.windowListeners=new tI(eZ(n)),this.initialCoordinates=null!=(a=ta(l))?a:tf,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(m.Resize,this.handleCancel),this.windowListeners.add(m.DragStart,tB),this.windowListeners.add(m.VisibilityChange,this.handleCancel),this.windowListeners.add(m.ContextMenu,tB),this.documentListeners.add(m.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tH(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(t$(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(m.Click,tU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(m.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:l}=this,{onMove:n,options:{activationConstraint:s}}=l;if(!a)return;let i=null!=(t=ta(e))?t:tf,o=tt(a,i);if(!r&&s){if(t$(s)){if(null!=s.tolerance&&tP(o,s.tolerance))return this.handleCancel();if(tP(o,s.distance))return this.handleStart()}return tH(s)&&tP(o,s.tolerance)?this.handleCancel():void this.handlePending(s,o)}e.cancelable&&e.preventDefault(),n(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===f.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let tY={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class tZ extends tX{constructor(e){const{event:t}=e;super(e,tY,e0(t.target))}}tZ.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(s=p||(p={}))[s.RightClick=2]="RightClick";(i=x||(x={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=g||(g={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let tJ={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(d=b||(b={}))[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging",(v||(v={})).Optimized="optimized";let tG=new Map;function tQ(e,t){return e4(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function t0(e){let{callback:t,disabled:r}=e,a=e2(t),l=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,w.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}function t1(e){return new tT(tN(e),e)}function t2(e,t,r){void 0===t&&(t=t1);let[a,l]=(0,w.useState)(null);function n(){l(a=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=a?a:r)?l:null}let n=t(e);return JSON.stringify(a)===JSON.stringify(n)?a:n})}let s=function(e){let{callback:t,disabled:r}=e,a=e2(t),l=(0,w.useMemo)(()=>{if(r||"u"<typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,w.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){n();break}}}}),i=t0({callback:n});return e1(()=>{n(),e?(null==i||i.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==s||s.disconnect())},[e]),a}let t5=[];function t4(e,t){void 0===t&&(t=[]);let r=(0,w.useRef)(null);return(0,w.useEffect)(()=>{r.current=null},t),(0,w.useEffect)(()=>{let t=e!==tf;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?tt(e,r.current):tf}function t3(e){return(0,w.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let t6=[];function t8(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return eG(t)?t:e}let t9=[{sensor:tZ,options:{}},{sensor:tW,options:{}}],t7={current:{}},re={draggable:{measure:tS},droppable:{measure:tS,strategy:b.WhileDragging,frequency:v.Optimized},dragOverlay:{measure:tN}};class rt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let rr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tm},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:re,measureDroppableContainers:tm,windowRect:null,measuringScheduled:!1},ra={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tm,draggableNodes:new Map,over:null,measureDroppableContainers:tm},rl=(0,w.createContext)(ra),rn=(0,w.createContext)(rr);function rs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rt}}}function ri(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,l=new rt(e.droppable.containers);return l.set(a,r),{...e,droppable:{...e.droppable,containers:l}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:l}=t,n=e.droppable.containers.get(r);if(!n||a!==n.key)return e;let s=new rt(e.droppable.containers);return s.set(r,{...n,disabled:l}),{...e,droppable:{...e.droppable,containers:s}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;let n=new rt(e.droppable.containers);return n.delete(r),{...e,droppable:{...e.droppable,containers:n}}}default:return e}}function ro(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:l}=(0,w.useContext)(rl),n=e6(a),s=e6(null==r?void 0:r.id);return(0,w.useEffect)(()=>{if(!t&&!a&&n&&null!=s){if(!tr(n)||document.activeElement===n.target)return;let e=l.get(s);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(tn)?e:e.querySelector(tn);if(t){t.focus();break}}})}},[a,t,l,s,n]),null}function rd(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}let rc=(0,w.createContext)({...tf,scaleX:1,scaleY:1});(c=y||(y={}))[c.Uninitialized=0]="Uninitialized",c[c.Initializing=1]="Initializing",c[c.Initialized=2]="Initialized";let ru=(0,w.memo)(function(e){var t,r,a,l,n,s,i,o;let d,c,m,f,p,v,j,k,{id:N,accessibility:S,autoScroll:_=!0,children:D,sensors:C=t9,collisionDetection:E=tv,measuring:V,modifiers:F,...A}=e,[z,M]=(0,w.useReducer)(ri,void 0,rs),[L,O]=function(){let[e]=(0,w.useState)(()=>new Set),t=(0,w.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,w.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[R,T]=(0,w.useState)(y.Uninitialized),I=R===y.Initialized,{draggable:{active:P,nodes:B,translate:U},droppable:{containers:K}}=z,q=null!=P?B.get(P):null,W=(0,w.useRef)({initial:null,translated:null}),$=(0,w.useMemo)(()=>{var e;return null!=P?{id:P,data:null!=(e=null==q?void 0:q.data)?e:t7,rect:W}:null},[P,q]),H=(0,w.useRef)(null),[X,Y]=(0,w.useState)(null),[Z,J]=(0,w.useState)(null),G=e5(A,Object.values(A)),Q=e9("DndDescribedBy",N),ee=(0,w.useMemo)(()=>K.getEnabled(),[K]),et=(0,w.useMemo)(()=>({draggable:{...re.draggable,...null==V?void 0:V.draggable},droppable:{...re.droppable,...null==V?void 0:V.droppable},dragOverlay:{...re.dragOverlay,...null==V?void 0:V.dragOverlay}}),[null==V?void 0:V.draggable,null==V?void 0:V.droppable,null==V?void 0:V.dragOverlay]),{droppableRects:er,measureDroppableContainers:ea,measuringScheduled:el}=function(e,t){let{dragging:r,dependencies:a,config:l}=t,[n,s]=(0,w.useState)(null),{frequency:i,measure:o,strategy:d}=l,c=(0,w.useRef)(e),u=function(){switch(d){case b.Always:return!1;case b.BeforeDragging:return r;default:return!r}}(),h=e5(u),m=(0,w.useCallback)(function(e){void 0===e&&(e=[]),h.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),f=(0,w.useRef)(null),p=e4(t=>{if(u&&!r)return tG;if(!t||t===tG||c.current!==e||null!=n){let t=new Map;for(let r of e){if(!r)continue;if(n&&n.length>0&&!n.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new tT(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,n,r,u,o]);return(0,w.useEffect)(()=>{c.current=e},[e]),(0,w.useEffect)(()=>{u||m()},[r,u]),(0,w.useEffect)(()=>{n&&n.length>0&&s(null)},[JSON.stringify(n)]),(0,w.useEffect)(()=>{u||"number"!=typeof i||null!==f.current||(f.current=setTimeout(()=>{m(),f.current=null},i))},[i,u,m,...a]),{droppableRects:p,measureDroppableContainers:m,measuringScheduled:null!=n}}(ee,{dragging:I,dependencies:[U.x,U.y],config:et.droppable}),en=e4(e=>{var t;return null==P?null:null!=(t=null!=p?p:e)?t:null},[p=(f=null!=P?B.get(P):void 0)?f.node.current:null,P]),es=(0,w.useMemo)(()=>Z?ta(Z):null,[Z]),ei=(d=(null==X?void 0:X.autoScrollEnabled)===!1,c="object"==typeof _?!1===_.enabled:!1===_,m=I&&!d&&!c,"object"==typeof _?{..._,enabled:m}:{enabled:m}),eo=tQ(en,et.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:l=!0}=e,n=(0,w.useRef)(!1),{x:s,y:i}="boolean"==typeof l?{x:l,y:l}:l;e1(()=>{if(!s&&!i||!t){n.current=!1;return}if(n.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=ty(r(e),a);if(s||(l.x=0),i||(l.y=0),n.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=tD(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,s,i,a,r])}({activeNode:null!=P?B.get(P):null,config:ei.layoutShiftCompensation,initialRect:eo,measure:et.draggable.measure});let ed=t2(en,et.draggable.measure,eo),ec=t2(en?en.parentElement:null),eu=(0,w.useRef)({activatorEvent:null,active:null,activeNode:en,collisionRect:null,collisions:null,droppableRects:er,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eh=K.getNodeFor(null==(t=eu.current.over)?void 0:t.id),em=function(e){let{measure:t}=e,[r,a]=(0,w.useState)(null),l=t0({callback:(0,w.useCallback)(e=>{for(let{target:r}of e)if(eG(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[n,s]=e3((0,w.useCallback)(e=>{let r=t8(e);null==l||l.disconnect(),r&&(null==l||l.observe(r)),a(r?t(r):null)},[t,l]));return(0,w.useMemo)(()=>({nodeRef:n,rect:r,setRef:s}),[r,n,s])}({measure:et.dragOverlay.measure}),ef=null!=(r=em.nodeRef.current)?r:en,ep=I?null!=(a=em.rect)?a:ed:null,ex=!!(em.nodeRef.current&&em.rect),eg=(v=tQ(n=ex?null:ed),ty(n,v)),eb=t3(ef?eZ(ef):null),ev=(s=I?null!=eh?eh:en:null,j=(0,w.useRef)(s),k=e4(e=>s?e&&e!==t5&&s&&j.current&&s.parentNode===j.current.parentNode?e:t_(s):t5,[s]),(0,w.useEffect)(()=>{j.current=s},[s]),k),ey=function(e,t){void 0===t&&(t=tN);let[r]=e,a=t3(r?eZ(r):null),[l,n]=(0,w.useState)(t6);function s(){n(()=>e.length?e.map(e=>tA(e)?a:new tT(t(e),e)):t6)}let i=t0({callback:s});return e1(()=>{null==i||i.disconnect(),s(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),l}(ev),ej=rd(F,{transform:{x:U.x-eg.x,y:U.y-eg.y,scaleX:1,scaleY:1},activatorEvent:Z,active:$,activeNodeRect:ed,containerNodeRect:ec,draggingNodeRect:ep,over:eu.current.over,overlayNodeRect:em.rect,scrollableAncestors:ev,scrollableAncestorRects:ey,windowRect:eb}),ew=es?te(es,U):null,ek=function(e){let[t,r]=(0,w.useState)(null),a=(0,w.useRef)(e),l=(0,w.useCallback)(e=>{let t=tC(e.target);t&&r(e=>e?(e.set(t,tF(t)),new Map(e)):null)},[]);return(0,w.useEffect)(()=>{let t=a.current;if(e!==t){n(t);let s=e.map(e=>{let t=tC(e);return t?(t.addEventListener("scroll",l,{passive:!0}),[t,tF(t)]):null}).filter(e=>null!=e);r(s.length?new Map(s):null),a.current=e}return()=>{n(e),n(t)};function n(e){e.forEach(e=>{let t=tC(e);null==t||t.removeEventListener("scroll",l)})}},[l,e]),(0,w.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>te(e,t),tf):tL(e):tf,[e,t])}(ev),eN=t4(ek),eS=t4(ek,[ed]),e_=te(ej,eN),eD=ep?tj(ep,ej):null,eC=$&&eD?E({active:$,collisionRect:eD,droppableRects:er,droppableContainers:ee,pointerCoordinates:ew}):null,eE=function(e,t){if(!e||0===e.length)return null;let[r]=e;return r.id}(eC,0),[eV,eF]=(0,w.useState)(null),eA=(i=ex?ej:te(ej,eS),o=null!=(l=null==eV?void 0:eV.rect)?l:null,{...i,scaleX:o&&ed?o.width/ed.width:1,scaleY:o&&ed?o.height/ed.height:1}),ez=(0,w.useRef)(null),eM=(0,w.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==H.current)return;let l=B.get(H.current);if(!l)return;let n=e.nativeEvent,s=new r({active:H.current,activeNode:l,event:n,options:a,context:eu,onAbort(e){if(!B.get(e))return;let{onDragAbort:t}=G.current,r={id:e};null==t||t(r),L({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!B.get(e))return;let{onDragPending:l}=G.current,n={id:e,constraint:t,initialCoordinates:r,offset:a};null==l||l(n),L({type:"onDragPending",event:n})},onStart(e){let t=H.current;if(null==t)return;let r=B.get(t);if(!r)return;let{onDragStart:a}=G.current,l={activatorEvent:n,active:{id:t,data:r.data,rect:W}};(0,e$.unstable_batchedUpdates)(()=>{null==a||a(l),T(y.Initializing),M({type:u.DragStart,initialCoordinates:e,active:t}),L({type:"onDragStart",event:l}),Y(ez.current),J(n)})},onMove(e){M({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:l}=eu.current,s=null;if(t&&l){let{cancelDrop:i}=G.current;s={activatorEvent:n,active:t,collisions:r,delta:l,over:a},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(s))&&(e=u.DragCancel)}H.current=null,(0,e$.unstable_batchedUpdates)(()=>{M({type:e}),T(y.Uninitialized),eF(null),Y(null),J(null),ez.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=G.current[t];null==e||e(s),L({type:t,event:s})}})}}ez.current=s},[B]),eL=(0,w.useCallback)((e,t)=>(r,a)=>{let l=r.nativeEvent,n=B.get(a);null!==H.current||!n||l.dndKit||l.defaultPrevented||!0===e(r,t.options,{active:n})&&(l.dndKit={capturedBy:t.sensor},H.current=a,eM(r,t))},[B,eM]),eO=(0,w.useMemo)(()=>C.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:eL(e.handler,t)}))]},[]),[C,eL]);(0,w.useEffect)(()=>{if(!eH)return;let e=C.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},C.map(e=>{let{sensor:t}=e;return t})),e1(()=>{ed&&R===y.Initializing&&T(y.Initialized)},[ed,R]),(0,w.useEffect)(()=>{let{onDragMove:e}=G.current,{active:t,activatorEvent:r,collisions:a,over:l}=eu.current;if(!t||!r)return;let n={active:t,activatorEvent:r,collisions:a,delta:{x:e_.x,y:e_.y},over:l};(0,e$.unstable_batchedUpdates)(()=>{null==e||e(n),L({type:"onDragMove",event:n})})},[e_.x,e_.y]),(0,w.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:l}=eu.current;if(!e||null==H.current||!t||!l)return;let{onDragOver:n}=G.current,s=a.get(eE),i=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:l.x,y:l.y},over:i};(0,e$.unstable_batchedUpdates)(()=>{eF(i),null==n||n(o),L({type:"onDragOver",event:o})})},[eE]),e1(()=>{eu.current={activatorEvent:Z,active:$,activeNode:en,collisionRect:eD,collisions:eC,droppableRects:er,draggableNodes:B,draggingNode:ef,draggingNodeRect:ep,droppableContainers:K,over:eV,scrollableAncestors:ev,scrollAdjustedTranslate:e_},W.current={initial:ep,translated:eD}},[$,en,eC,eD,B,ef,ep,er,K,eV,ev,e_]),function(e){let t,{acceleration:r,activator:a=x.Pointer,canScroll:l,draggingRect:n,enabled:s,interval:i=5,order:o=g.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:m,threshold:f}=e,p=function(e){let{delta:t,disabled:r}=e,a=e6(t);return e4(e=>{if(r||!a||!e)return tJ;let l={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===l.x,[h.Forward]:e.x[h.Forward]||1===l.x},y:{[h.Backward]:e.y[h.Backward]||-1===l.y,[h.Forward]:e.y[h.Forward]||1===l.y}}},[r,t,a])}({delta:m,disabled:!s}),[b,v]=(t=(0,w.useRef)(null),[(0,w.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,w.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,w.useRef)({x:0,y:0}),j=(0,w.useRef)({x:0,y:0}),k=(0,w.useMemo)(()=>{switch(a){case x.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case x.DraggableRect:return n}},[a,n,d]),N=(0,w.useRef)(null),S=(0,w.useCallback)(()=>{let e=N.current;if(!e)return;let t=y.current.x*j.current.x,r=y.current.y*j.current.y;e.scrollBy(t,r)},[]),_=(0,w.useMemo)(()=>o===g.TreeOrder?[...c].reverse():c,[o,c]);(0,w.useEffect)(()=>{if(!s||!c.length||!k)return void v();for(let e of _){if((null==l?void 0:l(e))===!1)continue;let t=u[c.indexOf(e)];if(!t)continue;let{direction:a,speed:n}=function(e,t,r,a,l){let{top:n,left:s,right:i,bottom:o}=r;void 0===a&&(a=10),void 0===l&&(l=tM);let{isTop:d,isBottom:c,isLeft:u,isRight:m}=tz(e),f={x:0,y:0},p={x:0,y:0},x={height:t.height*l.y,width:t.width*l.x};return!d&&n<=t.top+x.height?(f.y=h.Backward,p.y=a*Math.abs((t.top+x.height-n)/x.height)):!c&&o>=t.bottom-x.height&&(f.y=h.Forward,p.y=a*Math.abs((t.bottom-x.height-o)/x.height)),!m&&i>=t.right-x.width?(f.x=h.Forward,p.x=a*Math.abs((t.right-x.width-i)/x.width)):!u&&s<=t.left+x.width&&(f.x=h.Backward,p.x=a*Math.abs((t.left+x.width-s)/x.width)),{direction:f,speed:p}}(e,t,k,r,f);for(let e of["x","y"])p[e][a[e]]||(n[e]=0,a[e]=0);if(n.x>0||n.y>0){v(),N.current=e,b(S,i),y.current=n,j.current=a;return}}y.current={x:0,y:0},j.current={x:0,y:0},v()},[r,S,l,v,s,i,JSON.stringify(k),JSON.stringify(p),b,c,_,u,JSON.stringify(f)])}({...ei,delta:U,draggingRect:eD,pointerCoordinates:ew,scrollableAncestors:ev,scrollableAncestorRects:ey});let eR=(0,w.useMemo)(()=>({active:$,activeNode:en,activeNodeRect:ed,activatorEvent:Z,collisions:eC,containerNodeRect:ec,dragOverlay:em,draggableNodes:B,droppableContainers:K,droppableRects:er,over:eV,measureDroppableContainers:ea,scrollableAncestors:ev,scrollableAncestorRects:ey,measuringConfiguration:et,measuringScheduled:el,windowRect:eb}),[$,en,ed,Z,eC,ec,em,B,K,er,eV,ea,ev,ey,et,el,eb]),eT=(0,w.useMemo)(()=>({activatorEvent:Z,activators:eO,active:$,activeNodeRect:ed,ariaDescribedById:{draggable:Q},dispatch:M,draggableNodes:B,over:eV,measureDroppableContainers:ea}),[Z,eO,$,ed,M,Q,B,eV,ea]);return w.default.createElement(td.Provider,{value:O},w.default.createElement(rl.Provider,{value:eT},w.default.createElement(rn.Provider,{value:eR},w.default.createElement(rc.Provider,{value:eA},D)),w.default.createElement(ro,{disabled:(null==S?void 0:S.restoreFocus)===!1})),w.default.createElement(th,{...S,hiddenTextDescribedById:Q}))}),rh=(0,w.createContext)(null),rm="button";function rf(){return(0,w.useContext)(rn)}let rp={timeout:25};function rx(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:l}=e,n=e9("Droppable"),{active:s,dispatch:i,over:o,measureDroppableContainers:d}=(0,w.useContext)(rl),c=(0,w.useRef)({disabled:r}),h=(0,w.useRef)(!1),m=(0,w.useRef)(null),f=(0,w.useRef)(null),{disabled:p,updateMeasurementsFor:x,timeout:g}={...rp,...l},b=e5(null!=x?x:a),v=t0({callback:(0,w.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),f.current=null},g)},[g]),disabled:p||!s}),[y,j]=e3((0,w.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),h.current=!1),e&&v.observe(e))},[v])),k=e5(t);return(0,w.useEffect)(()=>{v&&y.current&&(v.disconnect(),h.current=!1,v.observe(y.current))},[y,v]),(0,w.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:a,key:n,disabled:r,node:y,rect:m,data:k}}),()=>i({type:u.UnregisterDroppable,key:n,id:a})),[a]),(0,w.useEffect)(()=>{r!==c.current.disabled&&(i({type:u.SetDroppableDisabled,id:a,key:n,disabled:r}),c.current.disabled=r)},[a,n,r,i]),{active:s,rect:m,isOver:(null==o?void 0:o.id)===a,node:y,over:o,setNodeRef:j}}function rg(e){let{animation:t,children:r}=e,[a,l]=(0,w.useState)(null),[n,s]=(0,w.useState)(null),i=e6(r);return r||a||!i||l(i),e1(()=>{if(!n)return;let e=null==a?void 0:a.key,r=null==a?void 0:a.props.id;null==e||null==r?l(null):Promise.resolve(t(r,n)).then(()=>{l(null)})},[t,a,n]),w.default.createElement(w.default.Fragment,null,r,a?(0,w.cloneElement)(a,{ref:s}):null)}let rb={x:0,y:0,scaleX:1,scaleY:1};function rv(e){let{children:t}=e;return w.default.createElement(rl.Provider,{value:ra},w.default.createElement(rc.Provider,{value:rb},t))}let ry={position:"fixed",touchAction:"none"},rj=e=>tr(e)?"transform 250ms ease":void 0,rw=(0,w.forwardRef)((e,t)=>{let{as:r,activatorEvent:a,adjustScale:l,children:n,className:s,rect:i,style:o,transform:d,transition:c=rj}=e;if(!i)return null;let u=l?d:{...d,scaleX:1,scaleY:1},h={...ry,width:i.width,height:i.height,top:i.top,left:i.left,transform:tl.Transform.toString(u),transformOrigin:l&&a?function(e,t){let r=ta(e);if(!r)return"0 0";let a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}(a,i):void 0,transition:"function"==typeof c?c(a):c,...o};return w.default.createElement(r,{className:s,style:h,ref:t},n)}),rk={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:r}}=e;return[{transform:tl.Transform.toString(t)},{transform:tl.Transform.toString(r)}]},sideEffects:(t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,l={},{styles:n,className:s}=t;if(null!=n&&n.active)for(let[e,t]of Object.entries(n.active))void 0!==t&&(l[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=n&&n.dragOverlay)for(let[e,t]of Object.entries(n.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=s&&s.active&&r.node.classList.add(s.active),null!=s&&s.dragOverlay&&a.node.classList.add(s.dragOverlay),function(){for(let[e,t]of Object.entries(l))r.node.style.setProperty(e,t);null!=s&&s.active&&r.node.classList.remove(s.active)}})},rN=0,rS=w.default.memo(e=>{var t;let{adjustScale:r=!1,children:a,dropAnimation:l,style:n,transition:s,modifiers:i,wrapperElement:o="div",className:d,zIndex:c=999}=e,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggableNodes:p,droppableContainers:x,dragOverlay:g,over:b,measuringConfiguration:v,scrollableAncestors:y,scrollableAncestorRects:j,windowRect:k}=rf(),N=(0,w.useContext)(rc),S=(t=null==h?void 0:h.id,(0,w.useMemo)(()=>{if(null!=t)return++rN},[t])),_=rd(i,{activatorEvent:u,active:h,activeNodeRect:m,containerNodeRect:f,draggingNodeRect:g.rect,over:b,overlayNodeRect:g.rect,scrollableAncestors:y,scrollableAncestorRects:j,transform:N,windowRect:k}),D=tQ(m),C=function(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:l}=e;return e2((e,n)=>{if(null===t)return;let s=r.get(e);if(!s)return;let i=s.node.current;if(!i)return;let o=t8(n);if(!o)return;let{transform:d}=eZ(n).getComputedStyle(n),c=tw(d);if(!c)return;let u="function"==typeof t?t:function(e){let{duration:t,easing:r,sideEffects:a,keyframes:l}={...rk,...e};return e=>{let{active:n,dragOverlay:s,transform:i,...o}=e;if(!t)return;let d={x:s.rect.left-n.rect.left,y:s.rect.top-n.rect.top},c={scaleX:1!==i.scaleX?n.rect.width*i.scaleX/s.rect.width:1,scaleY:1!==i.scaleY?n.rect.height*i.scaleY/s.rect.height:1},u={x:i.x-d.x,y:i.y-d.y,...c},h=l({...o,active:n,dragOverlay:s,transform:{initial:i,final:u}}),[m]=h,f=h[h.length-1];if(JSON.stringify(m)===JSON.stringify(f))return;let p=null==a?void 0:a({active:n,dragOverlay:s,...o}),x=s.node.animate(h,{duration:t,easing:r,fill:"forwards"});return new Promise(e=>{x.onfinish=()=>{null==p||p(),e()}})}}(t);return tO(i,l.draggable.measure),u({active:{id:e,data:s.data,node:i,rect:l.draggable.measure(i)},draggableNodes:r,dragOverlay:{node:n,rect:l.dragOverlay.measure(o)},droppableContainers:a,measuringConfiguration:l,transform:c})})}({config:l,draggableNodes:p,droppableContainers:x,measuringConfiguration:v}),E=D?g.setRef:void 0;return w.default.createElement(rv,null,w.default.createElement(rg,{animation:C},h&&S?w.default.createElement(rw,{key:S,id:h.id,ref:E,as:o,activatorEvent:u,adjustScale:r,className:d,transition:s,rect:D,style:{zIndex:c,...n},transform:_},a):null))});function r_(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function rD(e){return null!==e&&e>=0}let rC=e=>{let{rects:t,activeIndex:r,overIndex:a,index:l}=e,n=r_(t,a,r),s=t[l],i=n[l];return i&&s?{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}:null},rE={scaleX:1,scaleY:1},rV=e=>{var t,r,a,l;let n,s,i,{activeIndex:o,activeNodeRect:d,index:c,rects:u,overIndex:h}=e,m=null!=(t=u[o])?t:d;if(!m)return null;if(c===o){let e=u[h];return e?{x:0,y:o<h?e.top+e.height-(m.top+m.height):e.top-m.top,...rE}:null}let f=(r=u,a=c,l=o,n=r[a],s=r[a-1],i=r[a+1],n?l<a?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0);return c>o&&c<=h?{x:0,y:-m.height-f,...rE}:c<o&&c>=h?{x:0,y:m.height+f,...rE}:{x:0,y:0,...rE}},rF="Sortable",rA=w.default.createContext({activeIndex:-1,containerId:rF,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rC,disabled:{draggable:!1,droppable:!1}});function rz(e){let{children:t,id:r,items:a,strategy:l=rC,disabled:n=!1}=e,{active:s,dragOverlay:i,droppableRects:o,over:d,measureDroppableContainers:c}=rf(),u=e9(rF,r),h=null!==i.rect,m=(0,w.useMemo)(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),f=null!=s,p=s?m.indexOf(s.id):-1,x=d?m.indexOf(d.id):-1,g=(0,w.useRef)(m),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(m,g.current),v=-1!==x&&-1===p||b,y="boolean"==typeof n?{draggable:n,droppable:n}:n;e1(()=>{b&&f&&c(m)},[b,m,f,c]),(0,w.useEffect)(()=>{g.current=m},[m]);let j=(0,w.useMemo)(()=>({activeIndex:p,containerId:u,disabled:y,disableTransforms:v,items:m,overIndex:x,useDragOverlay:h,sortedRects:m.reduce((e,t,r)=>{let a=o.get(t);return a&&(e[r]=a),e},Array(m.length)),strategy:l}),[p,u,y.draggable,y.droppable,v,m,x,o,h,l]);return w.default.createElement(rA.Provider,{value:j},t)}let rM=e=>{let{id:t,items:r,activeIndex:a,overIndex:l}=e;return r_(r,a,l).indexOf(t)},rL=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:l,items:n,newIndex:s,previousItems:i,previousContainerId:o,transition:d}=e;return!!d&&!!a&&(i===n||l!==s)&&(!!r||s!==l&&t===o)},rO={duration:200,easing:"ease"},rR="transform",rT=tl.Transition.toString({property:rR,duration:0,easing:"linear"}),rI={roleDescription:"sortable"};function rP({lead:e,onClick:t}){let{attributes:r,listeners:a,setNodeRef:l,transform:n,transition:s,isDragging:i}=function(e){var t,r,a,l;let{animateLayoutChanges:n=rL,attributes:s,disabled:i,data:o,getNewIndex:d=rM,id:c,strategy:u,resizeObserverConfig:h,transition:m=rO}=e,{items:f,containerId:p,activeIndex:x,disabled:g,disableTransforms:b,sortedRects:v,overIndex:y,useDragOverlay:j,strategy:k}=(0,w.useContext)(rA),N=(t=i,r=g,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(l=null==t?void 0:t.droppable)?l:r.droppable}),S=f.indexOf(c),_=(0,w.useMemo)(()=>({sortable:{containerId:p,index:S,items:f},...o}),[p,o,S,f]),D=(0,w.useMemo)(()=>f.slice(f.indexOf(c)),[f,c]),{rect:C,node:E,isOver:V,setNodeRef:F}=rx({id:c,data:_,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...h}}),{active:A,activatorEvent:z,activeNodeRect:M,attributes:L,setNodeRef:O,listeners:R,isDragging:T,over:I,setActivatorNodeRef:P,transform:B}=function(e){let{id:t,data:r,disabled:a=!1,attributes:l}=e,n=e9("Draggable"),{activators:s,activatorEvent:i,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:h}=(0,w.useContext)(rl),{role:m=rm,roleDescription:f="draggable",tabIndex:p=0}=null!=l?l:{},x=(null==o?void 0:o.id)===t,g=(0,w.useContext)(x?rc:rh),[b,v]=e3(),[y,j]=e3(),k=(0,w.useMemo)(()=>s.reduce((e,r)=>{let{eventName:a,handler:l}=r;return e[a]=e=>{l(e,t)},e},{}),[s,t]),N=e5(r);return e1(()=>(u.set(t,{id:t,key:n,node:b,activatorNode:y,data:N}),()=>{let e=u.get(t);e&&e.key===n&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:d,attributes:(0,w.useMemo)(()=>({role:m,tabIndex:p,"aria-disabled":a,"aria-pressed":!!x&&m===rm||void 0,"aria-roledescription":f,"aria-describedby":c.draggable}),[a,m,p,x,f,c.draggable]),isDragging:x,listeners:a?void 0:k,node:b,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:g}}({id:c,data:_,attributes:{...rI,...s},disabled:N.draggable}),U=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(F,O),K=!!A,q=K&&!b&&rD(x)&&rD(y),W=!j&&T,$=W&&q?B:null,H=q?null!=$?$:(null!=u?u:k)({rects:v,activeNodeRect:M,activeIndex:x,overIndex:y,index:S}):null,X=rD(x)&&rD(y)?d({id:c,items:f,activeIndex:x,overIndex:y}):S,Y=null==A?void 0:A.id,Z=(0,w.useRef)({activeId:Y,items:f,newIndex:X,containerId:p}),J=f!==Z.current.items,G=n({active:A,containerId:p,isDragging:T,isSorting:K,id:c,index:S,items:f,newIndex:Z.current.newIndex,previousItems:Z.current.items,previousContainerId:Z.current.containerId,transition:m,wasDragging:null!=Z.current.activeId}),Q=function(e){let{disabled:t,index:r,node:a,rect:l}=e,[n,s]=(0,w.useState)(null),i=(0,w.useRef)(r);return e1(()=>{if(!t&&r!==i.current&&a.current){let e=l.current;if(e){let t=tN(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&s(r)}}r!==i.current&&(i.current=r)},[t,r,a,l]),(0,w.useEffect)(()=>{n&&s(null)},[n]),n}({disabled:!G,index:S,node:E,rect:C});return(0,w.useEffect)(()=>{K&&Z.current.newIndex!==X&&(Z.current.newIndex=X),p!==Z.current.containerId&&(Z.current.containerId=p),f!==Z.current.items&&(Z.current.items=f)},[K,X,p,f]),(0,w.useEffect)(()=>{if(Y===Z.current.activeId)return;if(null!=Y&&null==Z.current.activeId){Z.current.activeId=Y;return}let e=setTimeout(()=>{Z.current.activeId=Y},50);return()=>clearTimeout(e)},[Y]),{active:A,activeIndex:x,attributes:L,data:_,rect:C,index:S,newIndex:X,items:f,isOver:V,isSorting:K,isDragging:T,listeners:R,node:E,overIndex:y,over:I,setNodeRef:U,setActivatorNodeRef:P,setDroppableNodeRef:F,setDraggableNodeRef:O,transform:null!=Q?Q:H,transition:Q||J&&Z.current.newIndex===S?rT:(!W||tr(z))&&m&&(K||G)?tl.Transition.toString({...m,property:rR}):void 0}}({id:e.id,disabled:!1}),o={transform:tl.Transform.toString(n),transition:s};return(0,j.jsxs)("div",{ref:l,style:o,...r,...a,className:`bg-zinc-900 border border-zinc-800 p-4 shadow-sm group hover:border-zinc-600 transition-colors cursor-grab active:cursor-grabbing relative overflow-hidden ${i?"opacity-50 ring-2 ring-primary scale-105 z-50":""}`,children:[(0,j.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-zinc-800 rounded-bl-lg",onClick:e=>{e.stopPropagation(),t()},children:(0,j.jsx)("span",{className:"material-symbols-outlined text-sm text-zinc-400 hover:text-white cursor-pointer",children:"open_in_new"})}),(0,j.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,j.jsx)("div",{className:"flex justify-between items-start",children:(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)("span",{className:"text-sm font-bold text-white line-clamp-1",children:e.contact_name}),e.company_name&&(0,j.jsx)("span",{className:"text-[10px] text-zinc-500 uppercase tracking-wider line-clamp-1 mt-0.5",children:e.company_name})]})}),(0,j.jsxs)("div",{className:"space-y-1",children:[e.email&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-400 group/contact",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-[14px] text-zinc-600 group-hover/contact:text-primary transition-colors",children:"mail"}),(0,j.jsx)("span",{className:"truncate",children:e.email})]}),e.phone&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-400 group/contact",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-[14px] text-zinc-600 group-hover/contact:text-primary transition-colors",children:"call"}),(0,j.jsx)("span",{children:e.phone})]})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-zinc-800 mt-1",children:[(0,j.jsx)("div",{className:"flex items-center gap-2",children:(0,j.jsx)("div",{className:"h-5 w-5 rounded-full bg-zinc-800 border border-zinc-700 flex items-center justify-center text-[8px] font-bold text-zinc-400 uppercase",children:e.contact_name.substring(0,2)})}),(0,j.jsx)("span",{className:"text-[10px] text-zinc-500 font-mono",children:new Date(e.created_at).toLocaleDateString("sk-SK")})]}),(0,j.jsx)("div",{className:"absolute left-1 top-1/2 -translate-y-1/2 h-full flex items-center opacity-0 group-hover:opacity-20 transition-opacity pointer-events-none",children:(0,j.jsx)("span",{className:"material-symbols-outlined text-white text-sm",children:"drag_indicator"})})]})]})}f.Down,f.Right,f.Up,f.Left;let rB={new:{borderColor:"border-l-blue-500",badgeColor:"bg-blue-500/20 text-blue-400 border-blue-500/30"},contacted:{borderColor:"border-l-purple-500",badgeColor:"bg-purple-500/20 text-purple-400 border-purple-500/30"},offer:{borderColor:"border-l-orange-500",badgeColor:"bg-orange-500/20 text-orange-400 border-orange-500/30"},won:{borderColor:"border-l-emerald-500",badgeColor:"bg-green-500/20 text-green-400 border-green-500/30"},lost:{borderColor:"border-l-red-500",badgeColor:"bg-red-500/20 text-red-500 border-red-500/30"},waiting:{borderColor:"border-l-yellow-500",badgeColor:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30"}};function rU({status:e,label:t,leads:r,onCardClick:a}){let{setNodeRef:l,isOver:n}=rx({id:e}),s=rB[e]||rB.new;return(0,j.jsxs)("div",{className:"flex-shrink-0 w-80 flex flex-col h-full bg-[#0a0a0a] border border-[#1f1f1f] shadow-sm",children:[(0,j.jsxs)("div",{className:`p-4 border-b border-[#1f1f1f] flex items-center justify-between border-l-4 ${s.borderColor} bg-zinc-900/50`,children:[(0,j.jsx)("h3",{className:"text-sm font-bold uppercase tracking-widest text-white",children:t}),(0,j.jsx)("span",{className:`px-2 py-0.5 text-xs font-bold rounded-full border ${s.badgeColor}`,children:r.length})]}),(0,j.jsx)("div",{ref:l,className:`flex-1 p-3 overflow-y-auto space-y-3 transition-colors ${n?"bg-primary/5":"bg-transparent"}`,children:(0,j.jsx)(rz,{items:r.map(e=>e.id),strategy:rV,children:0===r.length?(0,j.jsxs)("div",{className:"flex flex-col items-center justify-center h-32 text-zinc-600 border border-dashed border-zinc-800 rounded-sm",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-2xl mb-1",children:"drag_indicator"}),(0,j.jsx)("span",{className:"text-xs font-medium uppercase tracking-wider",children:"Presuňte sem"})]}):r.map(e=>(0,j.jsx)(rP,{lead:e,onClick:()=>a(e)},e.id))})})]})}var rK=e.i(2747),rq=e.i(48065),rW=e.i(87316),r$=e.i(84614),rH=e.i(48256),rX=e.i(78583),rY=e.i(51975),rZ=e.i(99353),rJ=e.i(27516);let rG={call:(0,j.jsx)(eP.Phone,{className:"h-4 w-4"}),email:(0,j.jsx)(eI.Mail,{className:"h-4 w-4"}),meeting:(0,j.jsx)(rW.Calendar,{className:"h-4 w-4"}),note:(0,j.jsx)(rZ.StickyNote,{className:"h-4 w-4"}),status_change:(0,j.jsx)(eq.CheckCircle2,{className:"h-4 w-4"})};function rQ({lead:e,open:t,onOpenChange:r,statusLabels:a,sourceLabels:l,getRegionName:n,onEdit:s}){let{data:i=[],isLoading:o}=(0,rq.useActivities)({entityType:"lead",entityId:e?.id,limit:5});return e?(0,j.jsx)(ew.Dialog,{open:t,onOpenChange:r,children:(0,j.jsxs)(ew.DialogContent,{className:"max-w-[95vw] sm:max-w-[600px] max-h-[85vh] overflow-y-auto",children:[(0,j.jsxs)(ew.DialogHeader,{children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mr-8",children:[(0,j.jsx)(ew.DialogTitle,{className:"text-xl",children:e.contact_name}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(eT.Badge,{variant:e.status,children:a[e.status]}),s&&(0,j.jsx)(ej.Button,{variant:"outline",size:"sm",onClick:s,children:"Upraviť"})]})]}),e.company_name&&(0,j.jsx)("p",{className:"text-muted-foreground mt-1",children:e.company_name})]}),(0,j.jsxs)("div",{className:"space-y-6 py-4",children:[(0,j.jsxs)("section",{className:"space-y-3",children:[(0,j.jsx)("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Kontaktné údaje"}),(0,j.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.email&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,j.jsx)(eI.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,j.jsx)("a",{href:`mailto:${e.email}`,className:"hover:underline",children:e.email})]}),e.phone&&(0,j.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,j.jsx)(eP.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,j.jsx)("a",{href:`tel:${e.phone}`,className:"hover:underline",children:e.phone})]}),(e.address||e.postal_code)&&(0,j.jsxs)("div",{className:"flex items-start gap-2 text-sm sm:col-span-2",children:[(0,j.jsx)(eU.MapPin,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),(0,j.jsx)("span",{children:[e.address,e.postal_code].filter(Boolean).join(", ")})]})]})]}),(0,j.jsxs)("section",{className:"space-y-3",children:[(0,j.jsx)("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Informácie"}),(0,j.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,j.jsx)(rH.Globe,{className:"h-3 w-3"})," Zdroj"]}),(0,j.jsx)("p",{className:"text-sm font-medium",children:l[e.source_type]})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,j.jsx)(rY.Tag,{className:"h-3 w-3"})," Región"]}),(0,j.jsx)("p",{className:"text-sm font-medium",children:n(e.region_id)})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,j.jsx)(r$.User,{className:"h-3 w-3"})," Priradené"]}),(0,j.jsx)("p",{className:"text-sm font-medium",children:e.assigned_user?.full_name||"Nepriradené"})]}),(0,j.jsxs)("div",{className:"space-y-1",children:[(0,j.jsxs)("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,j.jsx)(rW.Calendar,{className:"h-3 w-3"})," Vytvorené"]}),(0,j.jsx)("p",{className:"text-sm font-medium",children:new Date(e.created_at).toLocaleDateString("sk-SK")})]})]})]}),e.notes&&(0,j.jsxs)("section",{className:"space-y-3",children:[(0,j.jsx)("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Poznámka"}),(0,j.jsx)("div",{className:"bg-muted/50 p-4 rounded-lg text-sm whitespace-pre-wrap",children:e.notes})]}),(0,j.jsxs)("section",{className:"space-y-3",children:[(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)(rJ.History,{className:"h-4 w-4 text-muted-foreground"}),(0,j.jsx)("h4",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Posledné aktivity"})]}),o?(0,j.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,j.jsx)(rK.Skeleton,{className:"h-16 w-full"},e))}):0===i.length?(0,j.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground bg-muted/30 rounded-lg",children:"Žiadne aktivity"}):(0,j.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,j.jsxs)("div",{className:"flex gap-3 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[(0,j.jsx)("div",{className:"text-primary mt-0.5",children:rG[e.activity_type]||(0,j.jsx)(rX.FileText,{className:"h-4 w-4"})}),(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,j.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.title}),(0,j.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString("sk-SK")})]}),e.description&&(0,j.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.description})]})]},e.id))})]})]})]})}):null}let r0=[{value:"new",label:"Nový",color:"blue"},{value:"contacted",label:"Kontaktovaný",color:"purple"},{value:"offer",label:"Ponuka",color:"orange"},{value:"won",label:"Úspešný",color:"emerald"},{value:"lost",label:"Stratený",color:"red"}],r1={new:"Nový",contacted:"Kontaktovaný",offer:"Ponuka",won:"Vyhraný",lost:"Stratený",waiting:"Čaká sa"},r2={facebook_lead_ads:"Facebook Lead Ads",facebook_ads:"Facebook Ads",google_ads:"Google Ads",website_form:"Web formulár",manual:"Manuálne"};function r5(){var e;let{data:t=[],isLoading:r}=(0,eD.useLeads)({}),a=(0,eD.useUpdateLeadStatus)(),[l,n]=(0,w.useState)(null),[s,i]=(0,w.useState)(null),[o,d]=(0,w.useState)(!1),c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,w.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}((e={activationConstraint:{distance:8}},(0,w.useMemo)(()=>({sensor:tZ,options:null!=e?e:{}}),[tZ,e]))),u=e=>{n(e),d(!0)};if(r)return(0,j.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-4",children:r0.map(e=>(0,j.jsx)("div",{className:"flex-shrink-0 w-72",children:(0,j.jsx)(rK.Skeleton,{className:"h-[600px] rounded-lg"})},e.value))});let h=r0.reduce((e,r)=>(e[r.value]=t.filter(e=>e.status===r.value),e),{});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(ru,{sensors:c,collisionDetection:tb,onDragStart:e=>{i(t.find(t=>t.id===e.active.id)||null)},onDragEnd:e=>{let{active:r,over:l}=e;if(i(null),console.log("🔍 DragEnd Debug:",{activeId:r.id,activeType:typeof r.id,overId:l?.id,overType:typeof l?.id,overData:l?.data}),!l||r.id===l.id)return;let n=r.id,s=l.id;if(s.length>10&&s.includes("-")){console.log("⚠️ Detected UUID as drop target, looking up column status...");let e=t.find(e=>e.id===s);if(e)s=e.status,console.log(`✅ Mapped UUID to status: ${s}`);else{console.error("❌ Could not find lead with UUID:",s),eC.toast.error("Chyba: Neplatný cieľ presunu");return}}let o=t.find(e=>e.id===n);if(!o)return;if(o.status===s)return void console.log("ℹ️ Lead already in this column, skipping");let d=t.filter(e=>e.status===s).length;console.log("🎯 Dragging lead to column:",{leadId:n,leadName:o.contact_name,oldStatus:o.status,newStatus:s,newStatusIsUUID:s.length>10&&s.includes("-"),currentLeadsInColumn:d}),a.mutate({leadId:n,status:s},{onSuccess:()=>{console.log("✅ Status update successful"),eC.toast.success(`Lead presunut\xfd do stĺpca "${r0.find(e=>e.value===s)?.label}"`)},onError:e=>{console.error("❌ Failed to update lead status:",{error:e,message:e?.message,code:e?.code,details:e?.details,hint:e?.hint}),eC.toast.error(`Nepodarilo sa: ${e?.message||"Neznáma chyba"}`)}})},children:[(0,j.jsx)("div",{className:"flex gap-1 overflow-x-auto pt-4 pr-4",children:r0.map(e=>(0,j.jsx)(rU,{status:e.value,label:e.label,color:e.color,leads:h[e.value]||[],onCardClick:u},e.value))}),(0,j.jsx)(rS,{children:s?(0,j.jsx)("div",{className:"rotate-3",children:(0,j.jsx)(rP,{lead:s,onClick:()=>{}})}):null})]}),l&&(0,j.jsx)(rQ,{lead:l,open:o,onOpenChange:d,statusLabels:r1,sourceLabels:r2,getRegionName:()=>""})]})}var r4=e.i(2335),r3=e.i(75157);let r6={new:"Nový",contacted:"Kontaktovaný",offer:"Ponuka",won:"Vyhraný",lost:"Stratený",waiting:"Čaká sa"},r8={facebook_lead_ads:"Facebook Lead Ads",facebook_ads:"Facebook Ads",google_ads:"Google Ads",website_form:"Web formulár",manual:"Manuálne"};function r9(){let{user:e}=(0,eM.useAuth)(),t=(0,k.useRouter)(),[r,a]=(0,w.useState)(()=>"kanban"===localStorage.getItem("artstone-leads-view")?"kanban":"list"),[l,n]=(0,w.useState)(""),s=(0,r4.useDebounce)(l,500),[i,o]=(0,w.useState)("all"),[d,c]=(0,w.useState)("all"),[u,h]=(0,w.useState)("all"),[m,f]=(0,w.useState)(null),[p,x]=(0,w.useState)(!1),[g,b]=(0,w.useState)(!1),[v,y]=(0,w.useState)(!1),[N,S]=(0,w.useState)(!1),[_,D]=(0,w.useState)(!1),[C,E]=(0,w.useState)(!1),[V,F]=(0,w.useState)("note");(0,w.useEffect)(()=>{localStorage.setItem("artstone-leads-view","kanban"===r?"kanban":"table")},[r]);let{data:A,isLoading:z,isError:M}=(0,eD.useLeads)(),{data:L=[]}=(0,eV.useRegions)(),{data:O=[]}=eL(),{data:R=[]}=function(){let{user:e}=(0,eM.useAuth)();return(0,eA.useQuery)({queryKey:["all-users"],queryFn:async()=>{console.log("=== Fetching all users ===");try{let t=ez.supabase.from("profiles").select("*").order("full_name");e?.role==="manager"&&e.regionId&&(t=t.eq("region_id",e.regionId),console.log("Manager filter applied for region:",e.regionId));let{data:r,error:a}=await t;if(a)throw console.error("Error fetching users:",a),a;if(r&&r.length>0){let e=[...new Set(r.map(e=>e.region_id).filter(Boolean))];if(e.length>0){let{data:t}=await ez.supabase.from("regions").select("id, name").in("id",e);r=r.map(e=>({...e,region:e.region_id&&t&&t.find(t=>t.id===e.region_id)||null}))}}return(r||[]).map(e=>({...e,role:e.role||"sales"}))}catch(e){throw console.error("useAllUsers query failed:",e),e}},enabled:!!e&&("admin"===e.role||"manager"===e.role)})}();(0,eD.useUpdateLeadStatus)(),(0,eD.useDeleteLead)();let T=e?.role==="admin";e?.role;let I=(0,w.useMemo)(()=>A?A.filter(e=>{if("all"!==i&&e.status!==i||"all"!==d&&e.source_type!==d||"all"!==u&&e.created_by!==u)return!1;if(s){let t=s.toLowerCase();return e.contact_name.toLowerCase().includes(t)||e.company_name&&e.company_name.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)}return!0}):[],[A,i,d,u,s]),P=e=>{f(e),t.push(`/app/leads/${e.id}`)};return M?(0,j.jsxs)("div",{className:"bg-red-900/20 border border-red-500/50 p-6 m-6",children:[(0,j.jsx)("h3",{className:"text-red-500 font-bold mb-2",children:"Chyba"}),(0,j.jsx)("p",{className:"text-zinc-400",children:"Nepodarilo sa načítať dáta zo serveru."})]}):(0,j.jsxs)("div",{className:"flex-1 flex flex-col h-screen overflow-hidden bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display selection:bg-primary selection:text-white",children:[(0,j.jsxs)("header",{className:"h-16 flex-shrink-0 flex items-center justify-between border-b border-solid border-slate-200 dark:border-zinc-800 bg-background-light dark:bg-[#0a0a0a] px-6 lg:px-8 z-10 text-left",children:[(0,j.jsx)("div",{className:"flex items-center gap-4",children:(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)("h1",{className:"text-sm font-bold uppercase tracking-wider text-slate-900 dark:text-white",children:"Leadi a klienti"}),(0,j.jsx)("span",{className:"text-[10px] text-zinc-500 font-mono",children:"CRM Modul"})]})}),(0,j.jsxs)("div",{className:"flex items-center gap-4",children:[(0,j.jsxs)("button",{className:"relative text-slate-500 dark:text-zinc-400 hover:text-primary transition-colors",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-2xl",children:"notifications"}),(0,j.jsx)("span",{className:"absolute top-0 right-0 block h-2.5 w-2.5 rounded-full bg-primary ring-2 ring-white dark:ring-[#0a0a0a]"})]}),(0,j.jsx)("div",{className:"h-5 w-[1px] bg-slate-200 dark:bg-zinc-800"}),(0,j.jsx)("button",{onClick:()=>{(0,ez.createClient)().auth.signOut().then(()=>t.push("/login"))},className:"text-slate-500 dark:text-zinc-400 hover:text-primary transition-colors text-sm font-medium",children:"Odhlásiť"})]})]}),(0,j.jsx)("main",{className:"flex-1 overflow-y-auto bg-background-light dark:bg-background-dark p-6 lg:p-12 text-left",children:(0,j.jsxs)("div",{className:"max-w-[1920px] mx-auto w-full",children:[(0,j.jsxs)("div",{className:"mb-8 flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2 tracking-tight",children:"Správa dopytov a klientov"}),(0,j.jsxs)("div",{className:"flex items-center gap-4 text-xs font-bold uppercase tracking-wider text-zinc-500",children:[(0,j.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,j.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,j.jsxs)("span",{className:"text-white",children:[A?.filter(e=>"new"===e.status).length||0," Nových"]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,j.jsxs)("span",{className:"text-white",children:[A?.filter(e=>"contacted"===e.status).length||0," V komunikácii"]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,j.jsxs)("span",{className:"text-white",children:[A?.filter(e=>"offer"===e.status).length||0," Ponuky"]})]})]})]}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsxs)("div",{className:"bg-slate-100 dark:bg-[#0a0a0a] border border-slate-200 dark:border-zinc-800 flex items-center p-1 rounded-sm mr-2 w-auto",children:[(0,j.jsxs)("button",{onClick:()=>a("list"),className:(0,r3.cn)("flex-1 flex items-center justify-center gap-2 px-6 py-2 transition-colors text-xs font-bold uppercase tracking-wider","list"===r?"bg-white dark:bg-zinc-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-zinc-500 hover:text-slate-700 dark:hover:text-zinc-300"),children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-lg",children:"list"}),"Zoznam"]}),(0,j.jsx)("div",{className:"w-[1px] h-6 bg-slate-200 dark:bg-zinc-800 mx-1"}),(0,j.jsxs)("button",{onClick:()=>a("kanban"),className:(0,r3.cn)("flex-1 flex items-center justify-center gap-2 px-6 py-2 transition-colors text-xs font-bold uppercase tracking-wider","kanban"===r?"bg-white dark:bg-zinc-800 text-slate-900 dark:text-white shadow-sm":"text-slate-500 dark:text-zinc-500 hover:text-slate-700 dark:hover:text-zinc-300"),children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-lg",children:"view_kanban"}),"Nástavba"]})]}),(0,j.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-primary text-black font-bold hover:bg-primary-hover transition-colors shadow-[0_0_15px_rgba(255,102,0,0.2)] uppercase tracking-wider text-xs",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-lg",children:"add"}),(0,j.jsx)("span",{children:"Nový kontakt"})]})]})]}),(0,j.jsxs)("div",{className:"bg-white dark:bg-[#0a0a0a] border border-slate-200 dark:border-zinc-800 p-4 mb-6 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,j.jsxs)("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[(0,j.jsxs)("div",{className:"relative flex-1 lg:w-80",children:[(0,j.jsx)("span",{className:"material-symbols-outlined absolute left-3 top-2.5 text-zinc-500 text-lg",children:"search"}),(0,j.jsx)("input",{className:"w-full bg-slate-50 dark:bg-zinc-900 border border-slate-200 dark:border-zinc-700 text-slate-900 dark:text-white pl-10 pr-4 py-2 text-sm focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors",placeholder:"Hľadať meno, firmu, email...",type:"text",value:l,onChange:e=>n(e.target.value)})]}),(0,j.jsx)("div",{className:"h-8 w-[1px] bg-slate-200 dark:bg-zinc-800 mx-2 hidden lg:block"}),(0,j.jsxs)("div",{className:"relative hidden lg:block",children:[(0,j.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"appearance-none bg-transparent border-none text-sm font-bold uppercase tracking-wider text-slate-600 dark:text-zinc-400 py-2 pr-8 focus:ring-0 cursor-pointer outline-none",children:[(0,j.jsx)("option",{value:"all",children:"Všetky statusy"}),(0,j.jsx)("option",{value:"new",children:"Nové"}),(0,j.jsx)("option",{value:"contacted",children:"Kontaktované"}),(0,j.jsx)("option",{value:"offer",children:"V riešení"}),(0,j.jsx)("option",{value:"won",children:"Úspešné"})]}),(0,j.jsx)("span",{className:"material-symbols-outlined absolute right-0 top-2 text-zinc-500 pointer-events-none",children:"expand_more"})]})]}),(0,j.jsx)("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:T&&(0,j.jsxs)("button",{onClick:()=>{let e,t,r;return e=new Blob([["Meno,Firma,Email,Telefón,Status",...I.map(e=>[e.contact_name,e.company_name||"",e.email||"",e.phone||"",r6[e.status]]).map(e=>e.map(e=>`"${e}"`).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),r=URL.createObjectURL(e),void(t.setAttribute("href",r),t.setAttribute("download",`leads_export_${new Date().toISOString().split("T")[0]}.csv`),t.click())},className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 text-slate-600 dark:text-zinc-400 hover:text-slate-900 dark:hover:text-white transition-colors text-xs font-bold uppercase tracking-wider",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-lg",children:"download"}),(0,j.jsx)("span",{children:"Export"})]})})]}),z?(0,j.jsx)("div",{className:"p-8 text-center text-zinc-500 border border-zinc-800 animate-pulse",children:"Načítavam leady..."}):"kanban"===r?(0,j.jsx)(r5,{}):(0,j.jsx)("div",{className:"bg-white dark:bg-[#0a0a0a] border border-slate-200 dark:border-zinc-800 shadow-sm overflow-hidden flex flex-col min-h-[500px]",children:(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"w-full text-left border-collapse min-w-[1000px]",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{className:"bg-slate-50 dark:bg-zinc-900/80 border-b border-slate-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-slate-500 dark:text-zinc-500",children:[(0,j.jsx)("th",{className:"px-6 py-4",children:"Kontakt & Zákazník"}),(0,j.jsx)("th",{className:"px-6 py-4",children:"Zdroj"}),(0,j.jsx)("th",{className:"px-6 py-4",children:"Fáza obchodu"}),(0,j.jsx)("th",{className:"px-6 py-4",children:"Obchodník"}),(0,j.jsx)("th",{className:"px-6 py-4",children:"Posledná interakcia"}),(0,j.jsx)("th",{className:"px-6 py-4 text-right",children:"Akcie"})]})}),(0,j.jsx)("tbody",{className:"divide-y divide-slate-100 dark:divide-zinc-800/50",children:0===I.length?(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:6,className:"p-8 text-center text-zinc-500",children:"Žiadne leady na zobrazenie"})}):I.map(e=>(0,j.jsxs)("tr",{className:"group hover:bg-slate-50 dark:hover:bg-zinc-900/30 transition-colors",children:[(0,j.jsx)("td",{className:"px-6 py-4 align-top",children:(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)("a",{onClick:()=>P(e),className:"text-sm font-bold text-slate-900 dark:text-white hover:text-primary transition-colors cursor-pointer mb-1 line-clamp-1",children:e.contact_name}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[e.phone&&(0,j.jsxs)("span",{className:"flex items-center gap-1 text-xs text-slate-500 dark:text-zinc-500 uppercase tracking-wider group/contact",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-[14px] text-zinc-400 group-hover/contact:text-primary transition-colors",children:"call"}),e.phone]}),e.email&&(0,j.jsxs)("span",{className:"flex items-center gap-1 text-xs text-slate-500 dark:text-zinc-500 uppercase tracking-wider group/contact",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-[14px] text-zinc-400 group-hover/contact:text-primary transition-colors",children:"mail"}),e.email]})]}),e.company_name&&(0,j.jsx)("div",{className:"mt-2 text-[10px] text-zinc-500 uppercase tracking-wider border border-zinc-200 dark:border-zinc-800 px-2 py-0.5 inline-block w-fit bg-slate-50 dark:bg-zinc-900",children:e.company_name})]})}),(0,j.jsx)("td",{className:"px-6 py-4 align-top",children:(0,j.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 dark:bg-zinc-900 text-slate-700 dark:text-zinc-300 text-xs font-bold border border-slate-200 dark:border-zinc-700",children:[(0,j.jsx)("span",{className:"material-symbols-outlined text-sm",children:"facebook_ads"===e.source_type?"web":"public"}),r8[e.source_type]||"Neznámy"]})}),(0,j.jsxs)("td",{className:"px-6 py-4 align-top",children:["new"===e.status&&(0,j.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-blue-100 dark:bg-blue-500/10 text-blue-700 dark:text-blue-400 text-xs font-bold border border-blue-200 dark:border-blue-500/20",children:[(0,j.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Nový dopyt"]}),"contacted"===e.status&&(0,j.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-400 text-xs font-bold border border-purple-200 dark:border-purple-900/30",children:[(0,j.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"Kontaktovaný"]}),"offer"===e.status&&(0,j.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-orange-100 dark:bg-orange-500/10 text-orange-700 dark:text-orange-400 text-xs font-bold border border-orange-200 dark:border-orange-500/20",children:[(0,j.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-500"}),"Cenová ponuka"]}),"won"===e.status&&(0,j.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-emerald-100 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-400 text-xs font-bold border border-emerald-200 dark:border-emerald-500/20",children:[(0,j.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"Úspešný"]}),["lost","waiting"].includes(e.status)&&(0,j.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-slate-700 dark:text-zinc-300 text-xs font-bold border border-slate-200 dark:border-zinc-700",children:[(0,j.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500"}),r6[e.status]]})]}),(0,j.jsx)("td",{className:"px-6 py-4 align-top",children:(0,j.jsx)("div",{className:"flex items-center gap-2",children:(0,j.jsx)("div",{className:"h-6 w-6 rounded-full bg-zinc-800 text-zinc-100 flex items-center justify-center text-[10px] font-bold border border-zinc-700",children:(e=>{if(!e)return"?";let t=O.find(t=>t.id===e);return t?.full_name?t.full_name.substring(0,2).toUpperCase():"?"})(e.assigned_user_id)})})}),(0,j.jsx)("td",{className:"px-6 py-4 align-top",children:(0,j.jsxs)("div",{className:"flex flex-col",children:[(0,j.jsx)("span",{className:"text-[10px] text-zinc-500 uppercase tracking-wider",children:new Date(e.created_at).toLocaleDateString("sk-SK")}),(0,j.jsx)("span",{className:"text-sm text-slate-900 dark:text-white mt-0.5",children:"Vytvorenie dopytu"})]})}),(0,j.jsx)("td",{className:"px-6 py-4 text-right align-top",children:(0,j.jsx)("div",{className:"flex items-start justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,j.jsx)("button",{onClick:()=>P(e),className:"p-1.5 bg-slate-100 dark:bg-zinc-900 border border-slate-200 dark:border-zinc-800 text-slate-400 dark:text-zinc-400 hover:text-primary hover:border-primary transition-colors",title:"Zobraziť detaily",children:(0,j.jsx)("span",{className:"material-symbols-outlined text-sm",children:"visibility"})})})})]},e.id))})]})})})]})}),(0,j.jsx)(eF,{open:p,onOpenChange:x}),(0,j.jsx)(eR,{lead:m,open:N,onOpenChange:S}),(0,j.jsx)(eO,{lead:m,open:v,onOpenChange:y}),(0,j.jsx)(eW,{lead:m,open:_,onOpenChange:D})]})}e.s(["LeadsClientView",()=>r9],52114)},51067,e=>{e.n(e.i(52114))}]);